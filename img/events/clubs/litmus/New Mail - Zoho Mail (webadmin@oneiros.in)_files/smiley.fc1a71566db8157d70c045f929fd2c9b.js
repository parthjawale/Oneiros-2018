"use strict";define([],function(a){var b,c,d=a("zmText"),e=a("zmail.Core.Namespaces"),f=a("_zm"),g=a("zmail.Utils.DOM"),h=e.create("zmSmiley"),i=!1,j=d.get("smiley","smileys.header"),k="smileys-2x/",l=function(){return b||(b=d.get("smiley","smileys.tooltips")),c||(c={":smile:":{"class":"smile",category:"smiley"},":)":{"class":"smile",category:"smiley"},":-)":{"class":"smile",category:"smiley"},":happy:":{"class":"happy",category:"smiley"},":joy:":{"class":"joy",category:"smiley"},":D":{"class":"happy",category:"smiley"},":grinning:":{"class":"grinning",category:"smiley"},":cool:":{"class":"cool",category:"smiley"},"B-)":{"class":"cool",category:"smiley"},":love:":{"class":"love",category:"smiley"},":xs":{"class":"love",category:"smiley"},":curious:":{"class":"curious",category:"smiley"},":awe:":{"class":"awe",category:"smiley"},":thinking:":{"class":"thinking",category:"smiley"},":search:":{"class":"search",category:"smiley"},":idea:":{"class":"idea",category:"smiley"},"*-:)":{"class":"idea",category:"smiley"},":wink:":{"class":"wink",category:"smiley"},";-)":{"class":"wink",category:"smiley"},";)":{"class":"wink",category:"smiley"},":razz:":{"class":"razz",category:"smiley"},":P":{"class":"razz",category:"smiley"},":p":{"class":"razz",category:"smiley"},":relaxed:":{"class":"relaxed",category:"smiley"},":angel:":{"class":"peace",category:"smiley"},":peace:":{"class":"peace",category:"smiley"},"(a)":{"class":"peace",category:"smiley"},":blush:":{"class":"blush",category:"smiley"},":yummy:":{"class":"yummy",category:"smiley"},":yuck:":{"class":"yuck",category:"smiley"},":sad:":{"class":"sad",category:"smiley"},":(":{"class":"sad",category:"smiley"},":-(":{"class":"sad",category:"smiley"},":upset:":{"class":"upset",category:"smiley"},":anxious:":{"class":"anxious",category:"smiley"},"D:":{"class":"anxious",category:"smiley"},":worry:":{"class":"worry",category:"smiley"},":stressed-out:":{"class":"stressed-out",category:"smiley"},":-s":{"class":"stressed-out",category:"smiley"},":angry:":{"class":"angry",category:"smiley"},"X-(":{"class":"angry",category:"smiley"},":tensed:":{"class":"tensed",category:"smiley"},":tired:":{"class":"tired",category:"smiley"},":bored:":{"class":"bored",category:"smiley"},":sleepy:":{"class":"sleepy",category:"smiley"},"|-)":{"class":"sleepy",category:"smiley"},":jealous:":{"class":"jealous",category:"smiley"},":evil:":{"class":"evil",category:"smiley"},":facepalm:":{"class":"facepalm",category:"smiley"},":doubt:":{"class":"doubt",category:"smiley"},":shock:":{"class":"shock",category:"smiley"},":o":{"class":"shock",category:"smiley"},":O":{"class":"shock",category:"smiley"},":faint:":{"class":"faint",category:"smiley"},"(6.6)":{"class":"faint",category:"smiley"},":headache:":{"class":"headache",category:"smiley"},":sick:":{"class":"sick",category:"smiley"},"+o(":{"class":"sick",category:"smiley"},":injured:":{"class":"injured",category:"smiley"},":neutral:":{"class":"neutral",category:"smiley"},":smirk:":{"class":"smirk",category:"smiley"},":/":{"class":"smirk",category:"smiley"},":shutup:":{"class":"keep-quiet",category:"smiley"},":keep-quiet:":{"class":"keep-quiet",category:"smiley"},":-#":{"class":"keep-quiet",category:"smiley"},":feeling-warm:":{"class":"feeling-warm",category:"smiley"},":feeling-cold:":{"class":"feeling-cold",category:"smiley"},":rofl:":{"class":"rofl",category:"smiley"},":tongue-out:":{"class":"tongue-out",category:"smiley"},":surprise:":{"class":"surprise",category:"smiley"},":nerd:":{"class":"nerd",category:"smiley"},":rich:":{"class":"rich",category:"smiley"},":shush:":{"class":"shush",category:"smiley"},":crying:":{"class":"crying",category:"smiley"},":thumbsup:":{"class":"thumbsup",category:"smiley"},":thumbsdown:":{"class":"thumbsdown",category:"smiley"},":namaste:":{"class":"namaste",category:"smiley"},"(y)":{"class":"thumbsup",category:"smiley"},"(Y)":{"class":"thumbsup",category:"smiley"},":x-":{"class":"thumbsup",category:"smiley"},"(n)":{"class":"thumbsdown",category:"smiley"},"(N)":{"class":"thumbsdown",category:"smiley"},":super:":{"class":"super",category:"smiley"},":victory:":{"class":"victory",category:"smiley"},":yoyo:":{"class":"yoyo",category:"smiley"},":raising-hand:":{"class":"raising-hand",category:"smiley"},":clap:":{"class":"clap",category:"smiley"},":bye-bye:":{"class":"bye-bye",category:"smiley"},":thug:":{"class":"fist",category:"smiley"},":fist:":{"class":"fist",category:"smiley"},":flexed-biceps:":{"class":"biceps",category:"smiley"},":biceps:":{"class":"biceps",category:"smiley"},":birthday:":{"class":"birthday",category:"celebration"},":champagne:":{"class":"champagne",category:"celebration"},":chicken:":{"class":"chicken",category:"celebration"},":christmas-tree:":{"class":"christmas-tree",category:"celebration"},":eid-mubarak:":{"class":"eid-mubarak",category:"celebration"},":fireworks:":{"class":"fireworks",category:"celebration"},":gift-box:":{"class":"gift-box",category:"celebration"},":kaaba:":{"class":"kaaba",category:"celebration"},":new-year:":{"class":"new-year",category:"celebration"},":party:":{"class":"party",category:"celebration"},":santa-hat:":{"class":"santa-hat",category:"celebration"},":coffee-cup:":{"class":"coffee-cup",category:"office"},":food:":{"class":"food",category:"office"},":peanuts:":{"class":"peanuts",category:"office"},":fire:":{"class":"fire",category:"office"},":fire-extinguisher:":{"class":"fire-extinguisher",category:"office"},":first-aid-box:":{"class":"first-aid-box",category:"office"},":medicine:":{"class":"medicine",category:"office"},":poop:":{"class":"poop",category:"office"},":target:":{"class":"target",category:"office"},":task:":{"class":"task",category:"office"},":calendar:":{"class":"calendar",category:"office"},":report:":{"class":"report",category:"office"},":bug:":{"class":"bug",category:"office"},":milestone:":{"class":"milestone",category:"office"},":security:":{"class":"security",category:"office"},":processor:":{"class":"processor",category:"office"},":laptop:":{"class":"laptop",category:"office"},":server:":{"class":"server",category:"office"},":break-boy:":{"class":"break-boy",category:"sports"},":break-girl:":{"class":"break-girl",category:"sports"},":singing:":{"class":"singing",category:"sports"},":man-dancing:":{"class":"man-dancing",category:"sports"},":woman-dancing:":{"class":"woman-dancing",category:"sports"},":male-cyclist:":{"class":"man-cycling",category:"sports"},":man-cycling":{"class":"man-cycling",category:"sports"},":male-runner:":{"class":"man-running",category:"sports"},":man-running:":{"class":"man-running",category:"sports"},":male-swimmer:":{"class":"man-swimming",category:"sports"},":man-swimming:":{"class":"man-swimming",category:"sports"},":female-cyclist:":{"class":"woman-cycling",category:"sports"},":woman-cycling:":{"class":"woman-cycling",category:"sports"},":female-runner:":{"class":"woman-running",category:"sports"},":woman-running:":{"class":"woman-running",category:"sports"},":female-swimmer:":{"class":"woman-swimming",category:"sports"},":woman-swimming:":{"class":"woman-swimming",category:"sports"},":yoga:":{"class":"yoga",category:"sports"},":badminton:":{"class":"badminton",category:"sports"},":baseball:":{"class":"baseball",category:"sports"},":basketball:":{"class":"basketball",category:"sports"},":chess:":{"class":"chess",category:"sports"},":cricket:":{"class":"cricket",category:"sports"},":flag:":{"class":"flag",category:"sports"},":foosball:":{"class":"foosball",category:"sports"},":football:":{"class":"football",category:"sports"},":golf:":{"class":"golf",category:"sports"},":hockey:":{"class":"hockey",category:"sports"},":snooker:":{"class":"snooker",category:"sports"},":table-tennis:":{"class":"table-tennis",category:"sports"},":tennis:":{"class":"tennis",category:"sports"},":volleyball:":{"class":"volleyball",category:"sports"},":gold-medal:":{"class":"gold-medal",category:"sports"},":silver-medal:":{"class":"silver-medal",category:"sports"},":bronze-medal:":{"class":"bronze-medal",category:"sports"},":archery:":{"class":"archery",category:"sports"},":boxing:":{"class":"boxing",category:"sports"},":badminton-player:":{"class":"badminton-player",category:"sports"},":basketball-player:":{"class":"basketball-player",category:"sports"},":batsman:":{"class":"batsman",category:"sports"},":batter:":{"class":"batter",category:"sports"},":bowler:":{"class":"bowler",category:"sports"},":canoeing:":{"class":"canoeing",category:"sports"},":chess-player:":{"class":"chess-player",category:"sports"},":discus-throw:":{"class":"discus-throw",category:"sports"},":diving:":{"class":"diving",category:"sports"},":equestrian:":{"class":"equestrian",category:"sports"},":fencing:":{"class":"fencing",category:"sports"},":football-player:":{"class":"football-player",category:"sports"},":female-tennis-player:":{"class":"female-tennis-player",category:"sports"},":female-TT-player:":{"class":"female-tabletennis-player",category:"sports"},":female-tabletennis-player:":{"class":"female-tabletennis-player",category:"sports"},":female-volleyball-player:":{"class":"female-volleyball-player",category:"sports"},":golfer:":{"class":"golfer",category:"sports"},":gymnast:":{"class":"gymnast",category:"sports"},":hockey-player:":{"class":"hockey-player",category:"sports"},":hammer-throw:":{"class":"hammer-throw",category:"sports"},":hurdles:":{"class":"hurdles",category:"sports"},":javelin-throw:":{"class":"javelin-throw",category:"sports"},":judo:":{"class":"judo",category:"sports"},":long-jump:":{"class":"long-jump",category:"sports"},":pole-vault:":{"class":"pole-vault",category:"sports"},":running:":{"class":"running",category:"sports"},":rhythmic-gymnastics:":{"class":"rhythmic-gymnastics",category:"sports"},":shooting:":{"class":"shooting",category:"sports"},":shotput-throw:":{"class":"shotput-throw",category:"sports"},":high-jump:":{"class":"high-jump",category:"sports"},":karate:":{"class":"karate",category:"sports"},":male-TT-player:":{"class":"male-tabletennis-player",category:"sports"},":male-tabletennis-player:":{"class":"male-tabletennis-player",category:"sports"},":male-volleyball-player:":{"class":"male-volleyball-player",category:"sports"},":male-tennis-player:":{"class":"male-tennis-player",category:"sports"},":pitcher:":{"class":"pitcher",category:"sports"},":snooker-player:":{"class":"snooker-player",category:"sports"},":weightlifting:":{"class":"weightlifting",category:"sports"},":wrestling:":{"class":"wrestling",category:"sports"},":bicycle:":{"class":"bicycle",category:"travel"},":sports-bike":{"class":"sports-bike",category:"travel"},":cruiser-bike:":{"class":"cruiser-bike",category:"travel"},":motor-scooter:":{"class":"motor-scooter",category:"travel"},":car:":{"class":"car",category:"travel"},":taxi:":{"class":"taxi",category:"travel"},":bus:":{"class":"bus",category:"travel"},":train:":{"class":"train",category:"travel"},":police-car:":{"class":"police-car",category:"travel"},":ambulance:":{"class":"ambulance",category:"travel"},":fire-engine:":{"class":"fire-engine",category:"travel"},":aeroplane:":{"class":"aeroplane",category:"travel"},":passenger-ship:":{"class":"passenger-ship",category:"travel"},":parking:":{"class":"parking",category:"travel"},":cafeteria:":{"class":"cafeteria",category:"travel"},":garden:":{"class":"garden",category:"travel"},":playground:":{"class":"playground",category:"travel"},":home:":{"class":"home",category:"travel"},":office:":{"class":"office",category:"travel"},":library:":{"class":"library",category:"travel"},":auditorium:":{"class":"auditorium",category:"travel"},":store:":{"class":"store",category:"travel"},":mail-room:":{"class":"mail-room",category:"travel"},":pharmacy:":{"class":"pharmacy",category:"travel"},":gym:":{"class":"gym",category:"travel"},":americas:":{"class":"americas",category:"travel"},":europe-africa:":{"class":"europe-africa",category:"travel"},":asia-pacific:":{"class":"asia-pacific",category:"travel"}}),i=!0,c},m=function(b,c,d){var e=" "+g.getData(c,"text")+" ";if(d)d.insertTextAtCursorPosition(e,d.getCursorPosition());else{var f=a("zmMention");f.insertAtCursor(b,e),g.focus(b)}g.unmount(g.selector("#zm_dropDown"),!0)},n=function(){var a={};i||l(),a=c;var d,e=[],f="",g="",h=zdom("li",{style:{paddingTop:"5px"}},zdom("div",{className:"smileydivmn"},zdom("div",{className:"smileydiv zmsc_smiley"},zdom("h5",null,j.smiley)),zdom("div",{className:"smileydiv zmsc_celebration"},zdom("h5",null,j.celebration)),zdom("div",{className:"smileydiv zmsc_office"},zdom("h5",null,j.office)),zdom("div",{className:"smileydiv zmsc_sports"},zdom("h5",null,j.sports)),zdom("div",{className:"smileydiv zmsc_travel"},zdom("h5",null,j.travel))),zdom("ul",{className:"smileyCateg"},zdom("li",{className:"sel","data-category":"smiley"},zdom("em",{className:"zcslymsg-smile"})),zdom("li",{"data-category":"celebration"},zdom("em",{className:"zcslymsg-birthday"})),zdom("li",{"data-category":"office"},zdom("em",{className:"zcslymsg-coffee-cup"})),zdom("li",{"data-category":"sports"},zdom("em",{className:"zcslymsg-football"})),zdom("li",{"data-category":"travel"},zdom("em",{className:"zcslymsg-bus"})))),k={smiley:h.getElementsByClassName("zmsc_smiley")[0],celebration:h.getElementsByClassName("zmsc_celebration")[0],office:h.getElementsByClassName("zmsc_office")[0],sports:h.getElementsByClassName("zmsc_sports")[0],travel:h.getElementsByClassName("zmsc_travel")[0]};for(d in a)f=a[d]["class"],g=a[d].category,e.indexOf(f)===-1&&(e.push(f),k[g].appendChild(zdom("div",{"data-text":d,title:b[f],className:"smlynone"},zdom("div",{className:"zcsly-"+f}))));return h},o=function(a){var b=a.getElementsByClassName("smileyCateg")[0].getBoundingClientRect().height,c=g.selector("#zm_dropDown").children("ul")[0],d=c.getBoundingClientRect().height-b;a.getElementsByClassName("smileydivmn")[0].style.height=d+"px",a.style.paddingBottom=b+5+"px"},p=function(a,b,d,e){var h,i=n(),j=f("<","LI",f(".","smileyCateg",i)[0]),l=!1,o=f(".","smileydivmn",i)[0];g.element(j).each(function(){g.element(this).on("click",function(){if(!g.hasClass(this,"sel")){g.element(this).siblings(".sel").removeClass("sel"),g.addClass(this,"sel"),h=g.getData(this,"category"),l=!0;var a=f(".","zmsc_"+h,o),b=0,c=g.element(a).prevAll();if(c.length)for(var d=0,e=c.length;d<e;d++)b+=c[d].offsetHeight;g.element(o).animate({scrollTop:b},function(){l=!1})}})});var p=f(".","smlynone",i);g.element(p).each(function(){g.element(this).on("click",function(f){var h=this;if(a&&"function"==typeof a){var i="";if(h&&g.getData(h,"text")){var j=g.getData(h,"text");i=zmResource.__getNoCacheBust("image",k+c[j]["class"]+".png")}a(i)}else b&&m(d,this,e)})});var q=0;return g.element(o).scroll(function(a){if(!l){var b,c=g.element(this),d=g.element(c).siblings(".smileyCateg").find(".sel"),e=g.element(this).scrollTop(),f=e>q;if(b=f?g.element(d).next():g.element(d).prev(),b.length){var h,i,j,k,m=c[0].getBoundingClientRect(),n=m.height/2;j=f?g.getData(b,"category"):g.getData(d,"category"),k=g.selector(".zmsc_"+j,g.element(c)),h=k[0].getBoundingClientRect(),i=f?m.bottom-h.top>=n:m.bottom-h.top<n,m.bottom>h.top&&i&&(g.removeClass(d,"sel"),g.addClass(b,"sel"))}q=e}}),i},q=function(b,c,d,e){var f=a("zmUtil"),g=p("",!0,b,e);g.getElementsByClassName("smileydivmn")[0].style.height="300px";var h={par:c,showArrow:!0,liDom:[g],id:"zmsmiley",defaultclass:!1,ulClass:"noclass",direction:"right",spanClass:"noPad"};f.showMenu(h),f.stopEvents(d),o(g)},r=function(a){i||l();var d,e,f,g="";for(d in c)""!==g?g+="|"+d:g=d;g=g.replace(/\|-\)/g,"\\|-)"),g=g.replace(/[[\]()*+.?^]/g,function(a){return"\\"+a}),g="("+g+")";for(var h,j=new RegExp("(\\n|\\s|^)("+g+")+(?=[\\s<\\n]|$)","g"),k=[];null!==(h=j.exec(a));){if(e=$.trim(h[0]),e&&(f=c[e])){f=f["class"];var m="zcslymsg-"+f;k.push({from:h.index,to:j.lastIndex,type:"SMILEY",text:m,title:b[f]})}h.index===j.lastIndex&&j.lastIndex++}return k};return h.showList=q,h.replaceText=r,h.getSmiley=p,h.setHeight=o,h.init=l,h}),define([],function(a){var b=a("zmail.Core.Namespaces"),c=a("zmail.Components.AutoComplete.System.AbstractTrigger"),d=b.create("zmSmiley"),e=/(?:^[:]{1}([^\d]*))/i,f=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"textChangeAction",value:function(){var a=this,b=a._input,c=b.getCurrentTypingWord();if(/\s$/.test(c))return void a.publishNegativeTriggerEvent();e.lastIndex=0;var d=e.exec(c);if(d){var f=c||"";a.publishTriggerEvent({searchToken:f})}else a.publishNegativeTriggerEvent()}}]),b}(c);return d.SmileyTrigger=f,d}),define([],function(a){var b=a("zmail.Core.Namespaces"),c=a("zmail.Components.AutoComplete.System.AbstractListItemModel"),d=b.create("zmSmiley"),e=c.extend({defaults:{text:"",id:"","class":"",selected:!1}});return d.SmileyListItemModel=e,d}),define([],function(a){var b=a("zmail.Core.Namespaces"),c=a("_zm"),d=a("zmail.Components.AutoComplete.System.AbstractListModel"),e=b.create("zmSmiley"),f=d.extend({selectDownItem:function(a){var b=this,d=b.getListItems();if(d.length){for(var e=a.offsetWidth,f=c(".","zcsimleys",a)[0].offsetWidth,g=Math.floor(e/f),h=0,i=null,j=0,k=d.length;j<k;j++)if(i=d[j],i.attributes.selected){h=j+g;break}h>=d.length&&(h=d.length-1),b.selectItem(d[h].attributes.id)}},selectUpItem:function(a){var b=this,d=b.getListItems();if(d.length){for(var e=a.offsetWidth,f=c(".","zcsimleys",a)[0].offsetWidth,g=Math.floor(e/f),h=0,i=null,j=0,k=d.length;j<k;j++)if(i=d[j],i.attributes.selected){h=j-g;break}h<0&&(h=0),b.selectItem(d[h].attributes.id)}}});return e.SmileyListModel=f,e}),define([],function(a){var b=a("zmText"),c=a("zmail.Core.Namespaces"),d=a("zmail.Components.AutoComplete.System.AbstractDataProvider"),e=a("zmSmiley.SmileyListItemModel"),f=c.create("zmSmiley"),g=function(){var a=f.init();return a},h=b.get("smiley","smileys.tooltips"),i=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"searchData",value:function(a){var b,c=a.searchToken||"",d=g(),f=null,i=null;if(a=a||{},f=a.collection,i=a.deferred,!c)return void i.reject();c=c.toLowerCase();var j,k=Object.keys(d),l=[];if(k&&k.length)for(var m in d)if(j=d[m]["class"],b=m.toLowerCase(),0===b.indexOf(c)&&l.indexOf(j)===-1){l.push(j);var n=new e({"class":j,id:m,text:h[j]});f.add(n)}i.resolve()}}]),b}(d);return f.SmileyDataProvider=i,f}),define([],function(a,b){var c=a("zmail.Core.Namespaces"),d=a("zmail.Components.AutoComplete.System.AbstractDataAccumulator"),e=c.create("zmSmiley"),f=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"accumulateData",value:function(a){var b=this,c=a.collectionList;c.forEach(function(a){b.dataCollection.add(a.models)}),b.triggerAccumulationComplete()}}]),b}(d);return e.SmileyDataAccumulator=f,e}),define([],function(a,b){var c=a("zmail.Utils.DOM"),d=a("zmail.Core.Namespaces"),e=a("zmail.Components.AutoComplete.System.AbstractListItemComponent"),f=d.create("zmSmiley"),g={ITEM:['<div ref = "wrapper" class="zcsimleys" elemtype="smiley">','<div ref = "code" class="smlglst" purpose="search">','<em ref = "icon"></em>','<span ref = "text"></span>',"</div>","</div>"].join("")},h=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"getTemplate",value:function(){return g.ITEM}},{key:"render",value:function(a,b){var d=this;b=b||{},d._preRender(a),d.state.searchWord=b.searchWord||d.state.searchWord||"";var e=a.attributes,f="srchbn SC_Psli";d.state.selected?c.addClass(d.refs.code,f):c.removeClass(d.refs.code,f);var g=e.id;c.setAttribute(d.refs.code,{code:g});var h="zcslymsg-"+e["class"];c.addClass(d.refs.icon,h);var i=e.text;c.setText(d.refs.text,i),c.setAttribute(d.refs.code,{title:i}),d._postRender()}},{key:"focus",value:function(){var a=this,b=c.element(a.dom).parents(".smilyatdrpdwnmn")[0].getBoundingClientRect(),d=a.dom.getBoundingClientRect(),e=b.top>d.top,f=e||b.bottom<d.bottom;a.focusTimeoutID=setTimeout(function(){a._mounted&&(c.focus(a.refs.wrapper),f&&a.refs.wrapper.scrollIntoView(e))},0)}}]),b}(e);return f.SmileyListItemComponent=h,f}),define([],function(a,b){var c=a("zmail.Core.Namespaces"),d=a("zmail.Components.AutoComplete"),e=a("zmail.Utils.DOM"),f=c.create("zmSmiley"),g=d.System.AbstractListComponent,h={LIST:['<div ref="wrapper" class="SC_dd shw smilyatdrpdwnmn" style="max-width:780px; overflow: hidden; bottom: auto; height: auto; max-height:auto;">','<div ref="scrollWrapper" class="smilyatdrpdwn ps-container ps-theme-default ps-active-y">','<div ref="listWrapper" id="smileys" searchcatagory="smileys"></div>',"</div>","</div>"].join("")},i=d.Constants,j=i.KEYS,k={SELECT_UP:"selectUp",SELECT_DOWN:"selectDown",SELECT_NEXT:"selectNext",SELECT_PREVIOUS:"selectPrevious",ITEM_SELECTION:"itemSelection",ITEM_SELECTION_CURRENT:"itemSelectionCurrent"},l=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),c=a;return c.popUp=!0,a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"getTemplate",value:function(){return h.LIST}},{key:"getScrollWrapperDOM",value:function(){var a=this;return a.refs.scrollWrapper}},{key:"handleListSpaceOverflow",value:function(a){var b=this;a=a||{};var c=b.getScrollWrapperDOM();e.setStyle(c,{height:a.height+"px"})}},{key:"positionComponent",value:function(a){var c=this,d=c.getScrollWrapperDOM();e.setStyle(d,{height:"auto"}),e.setStyle(c.dom,{height:c.dom.getElementsByClassName("smilyatdrpdwn")[0].offsetHeight+"px"});var f=babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"positionComponent",this).call(this,a);return f}},{key:"selectUpListItem",value:function(){var a=this;e.element(a).triggerHandler(k.SELECT_UP)}},{key:"selectDownListItem",value:function(){var a=this;e.element(a).triggerHandler(k.SELECT_DOWN)}},{key:"_mouseDownHandler",value:function(a){var b=this;b.mouseDown=!0,_zm.stopEvents(a)}},{key:"_clickHandler",value:function(a){var b=this;b.hide()}},{key:"_keyDownHandler",value:function(a,b){var c=this;b=b||{};var d=a.which||a.keyCode,e=!0,f=!1;switch(d){case j.LEFT:c.selectPreviousListItem();break;case j.RIGHT:c.selectNextListItem();break;case j.UP:c.selectUpListItem();break;case j.DOWN:c.selectDownListItem();break;case j.ENTER:f=c.choseCurrentSelectedItem(),a.ignoreKeyUp=!0,!f&&b.isProxyEvent&&(e=!1);break;default:e=!1}e&&(a.stopPropagation(),a.preventDefault())}},{key:"show",value:function(){var a=this;e.addClass(a.dom,"shown"),e.removeClass(a.dom,"hidden"),e.setStyle(a.dom,{visibility:"visible"}),a.visible=!0}},{key:"hide",value:function(){var a=this;e.addClass(a.dom,"hidden"),e.removeClass(a.dom,"shown"),e.setStyle(a.dom,{visibility:"hidden"}),a.visible=!1}}]),b}(g);return l.EVENTS=k,f.SmileyListComponent=l,f}),define([],function(a){var b=a("zmail.Core.Namespaces"),c=a("zmail.Components.AutoComplete.System.AbstractListItemComponentFactory"),d=a("zmSmiley.SmileyListItemComponent"),e=a("zmSmiley.SmileyListItemModel"),f=b.create("zmSmiley"),g=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"createComponent",value:function(a){if(a instanceof e)return new d}}]),b}(c);return f.SmileyListItemComponentFactory=g,f}),define([],function(a){var b=a("zmail.Core.Namespaces"),c=a("zmail.Components.AutoComplete"),d=a("zmSmiley.SmileyDataProvider"),e=a("zmSmiley.SmileyListComponent"),f=a("zmSmiley.SmileyListItemComponentFactory"),g=a("zmSmiley.SmileyTrigger"),h=a("zmSmiley.SmileyDataAccumulator"),i=a("zmSmiley.SmileyListModel"),j=a("zmail.Utils.DOM"),k=b.create("zmSmiley"),l=c.System.BaseHTMLEditableAutoCompleteSystem,m=c.System.AbstractHTMLTextArea,n={LIST_SHOWN:"listShown",LIST_HIDDEN:"listHidden",CLICK:"click"},o={TEXTAREA:"1",EDITOR:"2"},p=function(b){function k(){return babelHelpers.classCallCheck(this,k),babelHelpers.possibleConstructorReturn(this,(k.__proto__||Object.getPrototypeOf(k)).apply(this,arguments))}return babelHelpers.inherits(k,b),babelHelpers.createClass(k,[{key:"initUserInput",value:function(a){var b=this,c=a.inputElement;switch(b.inputType){case"1":b.userInput=new m,b.userInput.init(c);break;case"2":b.userInput=c}}},{key:"createDataProviders",value:function(){return[new d]}},{key:"createTrigger",value:function(){return new g}},{key:"createDataAccumulator",value:function(){return new h}},{key:"createListComponent",value:function(){return new e}},{key:"createListItemComponentFactory",value:function(){return new f}},{key:"createListModel",value:function(){return new i}},{key:"invokeDataProviderSearch",value:function(a){var b=this,c=b.dataProviders;b.dataAccumulator.dataCollection.reset(null),b.listModel.resetData(),b.listModel.set({currentSearchKey:a.searchToken}),b.disable||c.forEach(function(b){b.getData({searchToken:a.searchToken,trigger:a.trigger})})}},{key:"showComponent",value:function(){var b=a("_zm"),d=this,e=d.dataAccumulator.dataCollection,f=e.find(function(a){return a.attributes.selected});f&&f.set({selected:!1});var g=d.listComponent.dom;if(e.length){var h=d.userInput._element.getBoundingClientRect();"2"===d.inputType&&(h=d.userInput.editor.iframe.getBoundingClientRect());var i=b(".","zcsimleys",g),k=i.length>5?5:i.length,l=i[0].offsetWidth,m=1===k?10:30,o=Math.floor(h.width/l);o=o<k?o:k;var p=l*o+m;p=p>h.width?780:p,j.setStyle(g,{width:p+"px"});var q,r=d.userInput.getListAnchorBounds();r.top-=d.userInput._element.scrollTop,r.bottom-=d.userInput._element.scrollTop,d.listComponent.positionComponent({anchorBounds:r});var s=g.getBoundingClientRect();Math.abs(r.right-h.right)<s.width&&(q=s.left+(h.right-s.right)+"px"),j.setStyle(g,{left:q}),d.listComponent.listItemComponents[0].model.set("selected",!0),d.listComponent.show(),j.element(d).triggerHandler(n.LIST_SHOWN),c.Utils.autoCompleteListsShown({instance:d})}}},{key:"hideComponent",value:function(){var a=this;a&&a.listComponent&&(a.listComponent.hide(),j.element(a).triggerHandler(n.LIST_HIDDEN),c.Utils.autoCompleteListsShown({instance:a,hide:!0}))}},{key:"_componentSelectUpHandler",value:function(){var a=this;a.listModel.selectUpItem(a.listComponent.dom);var b=a.listModel.getSelectedItem();b&&a.listItemFocusSelectAction({listItemModel:b})}},{key:"_componentSelectDownHandler",value:function(){var a=this;a.listModel.selectDownItem(a.listComponent.dom);var b=a.listModel.getSelectedItem();b&&a.listItemFocusSelectAction({listItemModel:b})}},{key:"_inputClickHandler",value:function(){var a=this;a.hideComponent()}},{key:"bindEvents",value:function(){var a=this;a._componentSelectUpHandler=a._componentSelectUpHandler.bind(a),j.element(a.listComponent).on(e.EVENTS.SELECT_UP,a._componentSelectUpHandler),a._componentSelectDownHandler=a._componentSelectDownHandler.bind(a),j.element(a.listComponent).on(e.EVENTS.SELECT_DOWN,a._componentSelectDownHandler),j.element(a.userInput._element).on(n.CLICK,a._inputClickHandler.bind(a)),babelHelpers.get(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"bindEvents",this).call(this)}},{key:"unbindEvents",value:function(){var a=this;j.element(a.listComponent).off(e.EVENTS.SELECT_UP,a._componentSelectUpHandler),j.element(a.listComponent).off(e.EVENTS.SELECT_DOWN,a._componentSelectDownHandler),j.element(a.userInput._element).off(n.CLICK,a._inputClickHandler),babelHelpers.get(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"unbindEvents",this).call(this)}}]),k}(l);return p.EVENTS=n,p.INPUTS=o,k.SmileyAutoCompleteSystem=p,k}),define([],function(a){var b=a("zmail.Core.Namespaces"),c=a("zmail.Components.AutoComplete"),d=a("zmail.Utils.DOM"),e=b.create("zmSmiley"),f=c.System.AbstractAutoCompleteSystem,g=e.SmileyAutoCompleteSystem,h=function(a){a=a||{};var b=a.input,c=new g;return"TEXTAREA"===d.element(b,!0).nodeName?c.inputType=g.INPUTS.TEXTAREA:b.editor&&(c.inputType=g.INPUTS.EDITOR),c.disable=a.disable||!1,c.inputInstance=a.inputInstance,c.init({inputElement:b,parentDOM:document.body}),d.element(c).on(f.EVENTS.ITEM_SELECTED,a.onSelect),d.element(c).on(g.EVENTS.LIST_SHOWN,a.listShown),d.element(c).on(g.EVENTS.LIST_HIDDEN,a.listHidden),c};return e.SmileyAutoComplete=h,e});