"use strict";define([],function(a){var b=zmail.Core.Namespaces,c=b.create("zmail.Utils.IntervalManager"),d=null,e=function(){function a(){babelHelpers.classCallCheck(this,a);var b=this;b.activeIntervalMap={}}return babelHelpers.createClass(a,[{key:"init",value:function(){var a=this;a.defaultSetInterval=window.setInterval,a.defaultClearInterval=window.clearInterval,window.setInterval=a.setInterval.bind(a),window.clearInterval=a.clearInterval.bind(a)}},{key:"setInterval",value:function(a,b){var c=this,d=c.defaultSetInterval.apply(window,arguments);return d&&(c.activeIntervalMap[d]={start:Date.now(),interval:b,callback:a}),d}},{key:"clearInterval",value:function(a){var b=this;return delete b.activeIntervalMap[a],b.defaultClearInterval.apply(window,arguments)}},{key:"getActiveIntervals",value:function(){var a=this;return Object.keys(a.activeIntervalMap).map(function(b){return{id:b,runningFor:Date.now()-a.activeIntervalMap[b].start+" ms",runsEvery:a.activeIntervalMap[b].interval+" ms",callback:a.activeIntervalMap[b].callback}})}},{key:"getActiveIntervalCount",value:function(){var a=this;return Object.keys(a.activeIntervalMap).length}}]),a}();c.getActiveIntervalCount=function(){return d.getActiveIntervalCount()},c.getActiveIntervals=function(){return d.getActiveIntervals()};var f=function(){d=new e,d.init()};return f(),c}),define([],function(a){var b=a("$"),c=a("zmComponent"),d=a("zmail.Utils.DOM"),e={theme1:"zmThmDBlue",theme2:"zmThmDGreen",theme3:"zmThmLGreen",theme4:"zmThmLBlue",theme5:"zmThmDRed",theme6:"zmThmLRed",theme7:"zmThmDYellow",theme8:"zmThmLYellow",theme9:"zmThmLBlack",theme10:"zmThmVintage"},f=document,g=navigator.userAgent.toLowerCase(),h=[],i=function(a,b,c){var d="#"!==a&&c?c:f;switch(a){case"#":return d.getElementById(b);case".":return d.getElementsByClassName(b);case"<":return d.getElementsByTagName(b)}};i.is_mac=g.indexOf("mac")!==-1,i.is_ie11=/Trident\/7.0;/.test(navigator.userAgent)&&/rv:11.0/i.test(navigator.userAgent),i.is_ie=g.indexOf("msie")!==-1,i.is_opera=g.indexOf("opera")!==-1,i.is_typesafari=g.indexOf("safari")!==-1,i.findParentWithClass=function(a,b){for(;a&&a.parentNode;)if(a=a.parentNode,i.hasClass(a,b))return a},i.remove=function(a){if(a instanceof HTMLCollection||a instanceof NodeList)for(var b=i.nodeList2Array(a),c=b.length,d=0;d<c;d++)i.removeElement(b[d]);else i.removeElement(a)},i.removeElement=function(a){(a instanceof HTMLElement||a instanceof Node)&&f.body.contains(a)&&a.parentNode.removeChild(a)},i.blindRemoveElement=function(a){a&&a.parentNode&&a.parentNode.removeChild(a)},i.addClass=function(a,b){d.addClass(a,b)},i.removeClass=function(a,b){d.removeClass(a,b)},i.hasClass=function(a,b){return a&&a.classList&&a.classList.contains(b)||!1},i.show=function(a,b){b===!0?a.style.visibility="visible":a.style.display=""},i.hide=function(a,b){b?a.style.visibility="hidden":a.style.display="none"},i.bindkeys=function(a,b){var c=function(a){var c=this||window,d=a.keyCode||a.which,e=b[d];e&&(e.length>1?e[0].apply(c,e[1]):e[0].apply(c))};a.addEventListener?a.addEventListener("keyup",c,!1):a.attachEvent&&a.attachEvent("keyup",c)},i.bind=function(a,b,d,e,f){c.bind({elm:a,ev:b,fn:d,args:e,capture:f})},i.unbind=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},i.bindReset=function(a,b,c,d,e){i.unbind(a,b,c),i.bind(a,b,c,d,e)};var j=function(a,b){var c;return a&&a.elm===!0&&(a.args?(c=i.copyOf(a.args),c.unshift(b)):c=[b]),c};i.bind2Nodes=function(a,b,c,d){var e;if(a instanceof NodeList||a instanceof HTMLCollection)for(var f=0;f<a.length;f++)e=j(d,a[f]),i.bind(a[f],b,c,e);else e=j(d,a),i.bind(a,b,c,e)};var k=function(a,b,c){var e=b.parentNode;a?e.lastChild===b?e.appendChild(c):d.mountBefore(c,b.nextSibling):d.mountBefore(c,b)};i.before=function(a,b){k(!1,a,b)},i.after=function(a,b){k(!0,a,b)},i.append=function(a,b){a.appendChild(b)},i.attr=function(a,b){return a.getAttribute(b)},i.setAttr=function(a,b){for(var c in b){var d=b[c];a.setAttribute(c,d)}},i.concatJSON=function(a,b,c){c=void 0===c||c;for(var d in a)c?b[d]=a[d]:void 0===b[d]&&(b[d]=a[d])},i.clearField=function(a){a&&(a.value="")},i.clearHTML=function(a){a&&d.clearHTML(a)},i.emptyString=function(a){return null===a||void 0===a||0===a.trim().length},i.copyOf=function(a){for(var b=a instanceof Array==!1?{}:[],c=Object.keys(a),d=0,e=c.length;d<e;d++){var f=c[d];b[f]=a[f]}return b};var l=new Image;i.preloadimg=function(a){l.src=a},i.indexOf=function(a,b){var c,d;if(Array.prototype.indexOf)return a.indexOf(b);for(d=a.length,c=0;c<d;c++)if(a[c]===b)return c;return-1},i.pluck=function(a,b){var c,d,e=[];for(d=a.length,c=0;c<d;c++)a[c]!==b&&e.push(a[c]);return e},i.bindFn=function(a,b){return Function.prototype.bind.apply(a,Array.prototype.slice.call(arguments,1))},i.stopEvents=function(a,b){try{a||(a=window.event),a.stopPropagation?(b||a.preventDefault(),a.stopPropagation()):(a.cancelBubble=!0,a.returnValue=!1)}catch(c){}},i.nodeList2Array=function(a){var b,c=[],d=a.length;for(b=d-1;b>=0;b--)c.push(a.item(b));return c.reverse()},i.isVisible=function(a){if(!a)return!1;if(a.style){if("none"===a.style.display)return!1;if("hidden"===a.style.visibility)return!1}return!0},i.setCookie=function(a,b){var c=new Date;c.setTime(c.getTime()+31536e6),f.cookie=a+"="+b+";expires="+c.toGMTString()},i.getCookie=function(a){var b,c,d,e,g;return b=f.cookie.indexOf(a),b!==-1?(g=a.length,d=f.cookie.indexOf(a)+g,e=f.cookie.indexOf(";",d),e===-1&&(e=f.cookie.length),c=f.cookie.substring(d+1,e)):null},i.removeCookie=function(a){f.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},i.getDOM=function(){return function(a){return c.htmlizer(a)}}(),i.setTextContent=function(a,b,c){c&&d.clearHTML(a),a.appendChild(f.createTextNode(b))},i.topBarHamburgerReference=function(){return d.selector(".zmHamburger")},i.escapeTags=function(a){return a=a||"",a=a.replace(/&/gi,"&amp;").replace(/"/gi,"&quot;").replace(/'/gi,"&#39;").replace(/</gi,"&lt;").replace(/>/gi,"&gt;")},i.unescapeTags=function(a){return a=a||"",a=a.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&#39;/gi,"'").replace(/&quot;/gi,'"').replace(/&apos;/gi,"'").replace(/&amp;/gi,"&")},i.getProperty=function(a,b){for(var c,d=b.split("."),e=a,f=d.length,g=0;g<f;g++)if(e=c=e[d[g]],void 0===c)return c;return c},i.registerLeftClickHandlers=function(a){h.push(a)},i.getLeftClickHandlers=function(){return h},i.getDOMReferenceMap=function(a,b,c){c=c||"ref","string"==typeof a&&(a=d.__dangerouslyParseHTML(a)),a=d.element(a);var e,f,g,h=d.selector("["+c+"]",a),i={};for(h=h||[],d.getAttribute(a,c)&&h.push(d.element(a,!0)),e=0,f=h.length;e<f;e++)g=h[e],i[d.getAttribute(g,c)]=d.element(g,!0),b&&d.removeAttribute(g,c);return i};var m=function(a){var b=!1;return b=zmail.ContactBook.isGroup(a)};return i._isPrivilegedUser=function(){if("undefined"!=typeof zmail.isPrivilegedUser)return zmail.isPrivilegedUser;var a,b=!1,c=["36902612"];zmail.zohoUrl.indexOf("localzoho")!==-1&&c.push("11160417");var d=c.length;for(a=0;a<d&&!(b=m(c[a]));a++);return b},i.checkForCRMMailAddonUser=function(){window.zmail.isCRMMailAddonUser=null;var a=null;return function(c){if(!zmail.IntegrationStatus.CRM)return window.zmail.isCRMMailAddonUser=!1,b.Deferred().resolve(!1).promise();if(c&&(a=null),null!==a)return a.promise();if(a=b.Deferred(),null!==window.zmail.isCRMMailAddonUser&&!c)return a.resolve(window.zmail.isCRMMailAddonUser).promise();try{var d=JSON.parse(zmail.userService)||[];d=d[0]||{},d=d.Service||"",d=d.toLowerCase(),d=d.split(","),d.indexOf("zohocrm")!==-1?(window.zmail.isCRMMailAddonUser=!0,a.resolve(window.zmail.isCRMMailAddonUser)):(window.zmail.isCRMMailAddonUser=!1,a.resolve(!1))}catch(e){window.zmail.isCRMMailAddonUser=!1,a.resolve(!1)}return a.promise()}}(),i.checkForCRMUser=function(){window.zmail.isCRMServiceUser=null;var a=null;return function(c){if(c&&(a=null),!zmail.IntegrationStatus.CRM)return window.zmail.isCRMServiceUser=!1,b.Deferred().resolve(!1).promise();if(null!==a)return a.promise();if(a=b.Deferred(),null!==window.zmail.isCRMServiceUser&&!c)return a.resolve(window.zmail.isCRMServiceUser).promise();var d=zmAdHocSettings.getWhatsNewVersion();if(d.hasOwnProperty("isCRMUser")&&d.hasOwnProperty("crmUserLastCheck")&&!c){var e=d.crmUserLastCheck||0,f=Date.now(),g=6048e5;if(f-e<=g)return window.zmail.isCRMServiceUser=d.isCRMUser,a.resolve(window.zmail.isCRMServiceUser),a.promise()}return d.crmUserLastCheck=Date.now(),zmAjq.XHR({u:zmail.conPath+"/isCRMAccountExists.do",p:{},t:"get",fn:function(b){window.zmail.isCRMServiceUser=b.isCRMAccountExists||!1,d.isCRMUser=window.zmail.isCRMServiceUser,zmAdHocSettings.setWhatsNewVersion(d),a.resolve(window.zmail.isCRMServiceUser)},efn:function(b){window.zmail.isCRMServiceUser=!1,d.isCRMUser=window.zmail.isCRMServiceUser,zmAdHocSettings.setWhatsNewVersion(d),a.resolve(!1)}}),a.promise()}}(),i.checkAndSetDarkMode=function(){var a="zmDefaultMode";"1"===zmAdHocSettings.getNightMode()&&(a="zmNightMode"),d.addClass(document.body,a)},i.getOnBoardingState=function(){return zmAdHocSettings.getOnBoardingPage()},i.getTemplateView=function(){return zmAdHocSettings.getTemplateView()},i.getcontactsSuggestionType=function(){return zmAdHocSettings.getContactsSuggestionType()},i.getTemplateView=function(){return zmAdHocSettings.getdragNDropInfo()},i.getcustomFontFamilyList=function(){return zmAdHocSettings.getcustomFontFamilyList()},i.getFeaturesListOrder=function(){var a=["f1-streams","f2-integrations","f3-folsharing","f4-crminteg","f5-schedulemail"];return a},i.toggleNightModeTheme=function(a,b){a=a||{};var c,e,f,g=a.set,h=document.body,i="zmNightMode",j="zmDefaultMode";c="undefined"!=typeof g?String(g):d.hasClass(h,i)?"0":"1","1"===c?(e=i,f=j):(e=j,f=i),d.removeClass(h,f),d.addClass(h,e),zmAdHocSettings.setNightMode(c,b)},i.isSmartComposeEnabled=function(){return i._isPrivilegedUser()||zmail.isSmartComposeEnabled},i.getClassNameForTheme=function(a){return e[a]},i.windowOpen=function(a){var b=window.open(a);b.opener=null},i.openZohoOneSearch=function(b){b=b||window.event;var c=a("zgssearch");c&&c.toggleGlobalsearch(b,{origin:"ZMDL",service:"ZM"})},i.isAllUnreadEnabled=function(){return i._isPrivilegedUser()&&zmail.streamsHbaseReadEnabled},i.autoBind=function(a,b){var c=Array.isArray(b)?b:[b];c.forEach(function(b){a[b]=a[b].bind(a)})},i.isHelperBlockVisibility=function(){return"1"===zmAdHocSettings.getHelperBlockVisibility()},i.isSecureDownloadEnabled=function(){return"1"===zmAdHocSettings.getSecuredownload()},i.mapCreator=function(a){var b={};return a.forEach(function(a){b[a.value]=a.text}),b},i.clearSavedContent=function(){if("localStorage"in window&&null!==window.localStorage){var a=zmail.zuid+"_streamsContent";localStorage.removeItem(a)}},i.isWSActive=function(){return zmail.isWSEnabled&&zmail._ws.isConnected()},i.isCloudServiceIntegEnabled=!0,window._zm=i,i}),define([],function(a,b){var c=/^on/,d="dangerouslySetInnerHTML",e=["viewBox"].reduce(function(a,b){return a=a||{},a[b]=!0,a},{}),f=function(a){return c.test(a)},g=function(a){return a.slice(2).toLowerCase()},h=function(a){return e[a]},i=function(a,b){if(b)for(var c in b)"ref"===c&&"function"==typeof b[c]?b[c](a):f(c)?a.addEventListener(g(c),b[c]):"style"===c&&"object"===babelHelpers["typeof"](b[c])?_.extend(a.style,b[c]):"className"===c?a.setAttribute("class",b[c]):c===d?a.innerHTML=b[c]:"undefined"!=typeof b[c]&&(h(c)?a.setAttributeNS("",c,b[c]):a.setAttribute(c,b[c]))},j=function l(a){var b,c;return"string"==typeof a?document.createTextNode(a):"number"==typeof a?document.createTextNode(a.toString()):a instanceof Node?a:(b=document.createElement(a.type),a.props&&i(b,a.props),c=a.children||[],c=c.reduce(function(a,b){return a.concat(b)},[]),c.forEach(function(a){"undefined"!=typeof a&&b.appendChild(l(a))}),b)},k=function(a,b){for(var c=arguments.length,d=Array(c>2?c-2:0),e=2;e<c;e++)d[e-2]=arguments[e];return j({type:a,props:b,children:d})};return window.zdom=k,k}),define([],function(a){var b=a("_zm"),c=a("zmail.Utils.DOM"),d=document,e=function(e,f,g){if(f){var h,i,j,k,l=null;if(j={s:"SC_smsg",e:"SC_emsg",i:"SC_imsg"},k=j[e]||j.i,g=g||{},l=zdom("div",null),"html"!==g.type&&c.setText(l,f),g.noHide&&c.mount(zdom("i",{className:"msi-close"}),l),h=zdom("div",{className:"SC_msg"},zdom("span",null,l.innerHTML)),b.bind(h,"click",function(a){var c=a.target||a.srcElement;"msi-close"===c.className&&b.remove(c.parentNode.parentNode)},[]),"html"===g.type&&("string"==typeof f&&(f=c.__dangerouslyParseHTML(f)),c.mountAtStart(f,c.selector("span",h))),i=g.appId?a("zmsuite").getCenter(g.appId)[0].$el[0].parentNode:g.parElem?g.parElem:d.body,i.appendChild(h),b.show(h),b.addClass(h,k),!g.noHide){var m=3e3;g.hideAfter=g.hideAfter||"auto","auto"===g.hideAfter&&"html"!==g.type&&(m=zmail.Utils.TextUtil.calculateReadTime(f),m<3e3&&(m=3e3),g.hideAfter=m),setTimeout(function(){b.removeClass(h,k),g.onHide&&g.onHide(),setTimeout(function(){b.remove(h)},1e3)},g.hideAfter)}}};return b.succErrMsg=e,b}),define([],function(a){var b,c=a("_zm"),d=a("zmail.Utils.DOM"),e=function(e,f){e=e||{};var g,h,i,j={s:"SC_smsg",e:"SC_emsg",i:"SC_imsg",undefined:"SC_imsg"},k=null,l=e.links||[],m={},n=function(){g&&(g.remove(),g=void 0)};return i=e.appId?a("zmsuite").getCenter(e.appId)[0].$el[0].parentNode:e.parElem?e.parElem:document.body,k=zdom("span",null),l.forEach(function(a){var b=a.name,c=a.callback,e=a.type||"link";if("text"===e){var f=document.createTextNode(b);d.mount(f,k)}else d.mount(zdom("i",{"data-type":b,className:"SC_lnk",style:{marginLeft:"3px",marginRight:"3px"}},b),k);c&&(m[b]=c,m[b+"stay"]=a.stay)}),e.isClose&&d.mount(zdom("i",{className:"msi-close"}),k),h=zdom("div",{className:"SC_msg"}),d.mount(k,h),g=d.element(h),b=g,g.on("click","i",function(a){var c=d.getData(a.target,"type"),e=m[c];e&&e(),m[c+"stay"]||(g.remove(),b=void 0)}),d.mount(h,i),c.show(h),c.addClass(h,j[f]||""),n},f=function(){b&&(b.remove(),b=void 0)};return c.actionMessages=e,c.removeActionMessages=f,c}),define([],function(a){var b,c=a("$"),d=a("zmail.Utils.DOM"),e={networkUnreachable:"Unable to reach the server. Please check your network connections.",captchaFail:"Operation not permitted due to captcha validation failure",sessionInvalid:"Your session is invalid. You will be logged out in 3 seconds!!"},f=function(){},g=[],h=[];f.getCookie=function(a){a=new RegExp("^"+a+"=");for(var b=document.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].trim();if(a.test(d))return d.replace(a,"")}return null},b=function(a,b,c,d){var e=8*c,f=(b-a)/1e3,g=e/f,i=g/1e6,j={requestTime:a,requestUrl:d,duration:f,contentSize:e,speed:i+"Mbps"};h.push(j),h.length>50&&h.splice(0,1)},f.getRequestNetworkSpeed=function(){return h},f.getErrorDebuggerLog=function(){return g},f.failCodes={unknown:0,0:"unknown",connectivity:"1",1:"connectivity",captcha:"2",2:"captcha",others:"3",3:"others"},f.XHR=function(d){var h,i,j,k=a("_zm"),l=a("zmscaptcha"),m=(new Date).getTime(),n=d.u,o=d.p||{},p=d.t,q={};h=m,j=new Date,"get"===p.toLowerCase()?n=n+(n.indexOf("?")+1?"&":"?")+"xhr="+m:d.h?q={"X-ZCSRF-TOKEN":"zmrcsr="+f.getCookie("zmcsr")}:o.zmrcsr=f.getCookie("zmcsr"),d.setSessionId===!0&&zmail.isWSEnabled&&zmail._ws&&zmail._ws.getSessionId()&&(q.sId=zmail._ws.getSessionId());var r=function(a,b){var c=!0,g="undefined"==typeof a?"undefined":babelHelpers["typeof"](a);if("object"===g&&(d.removeLoader&&d.removeLoader(),1===Number(a[0])&&(c=!1,d.fn&&d.fn(a[1],d.ep))),c){var h="";h="string"===g?a:d.onerror?a[1]:a[1]&&a[1].msg;var i=f.failCodes,j=i.unknown;b.responseText||0!==b.status?d.oncaptchafailure&&a instanceof Array&&a[1]instanceof Object&&a[1].captcha?(k.succErrMsg("e",e.captchaFail),d.oncaptchafailure(h,d.ep,b),j=i.captcha):d.onerror?(j=i.others,d.onerror(h,d.ep,b,j)):(d.efn||("string"==typeof h?k.succErrMsg("e",h):"object"===("undefined"==typeof h?"undefined":babelHelpers["typeof"](h))&&h.msg&&"string"==typeof h.msg&&k.succErrMsg("e",h.msg)),j=i.others):(d.onnetfailure?d.onnetfailure(d.ep):"abort"!==b.statusText&&k.succErrMsg("e",e.networkUnreachable),j=i.connectivity),d.efn&&d.efn(h,d.ep,b,j)}},s={url:n,type:p,data:c.param(o,!0),dataType:"json",headers:q,success:function(a,c,d){i=(new Date).getTime();var e=JSON.stringify(a);e=void 0===e?0:e.length,b(h,i,e,n,j),r(a,d)},error:function(a,b,d){a.responseText=c.trim(a.responseText);var f;try{f=c.parseJSON(a.responseText)}catch(h){f={}}var i=!1;f instanceof Array&&f.length>1&&!isNaN(f[0])&&f[1]instanceof Object||(g.push({xhrObj:s,xhrresp:a,rstatus:b}),i=!0),i||(f[1].authFail?(k.succErrMsg("e",e.sessionInvalid),setTimeout(function(){window.location.href=zmail.logoutURL},3e3)):f[1].captcha?l.createCaptchaDialog(f[1].captcha,s,function(){r(a.responseText&&f,a)}):i=!0),i&&r(a.responseText&&f,a)}};return c.ajax(s)},f.formSubmit=function(b,c,e,g){var h=a("_zm");if(h("#","tarIframe")){var i=document.getElementById("tarIframe");i.parentNode.removeChild(i)}var j="tarIframe";d.mount(zdom("iframe",{id:j,name:j,width:"0",height:"0",frameBorder:"0",style:{display:"none"}}),document.body);var k="dwnFrm",l=zdom("form",{id:k,target:j,name:k,action:c,encType:"multipart/form-data",method:e||"post",style:{display:"none"}});d.mount(l,document.body);for(var m in b)d.mount(zdom("input",{type:"hidden",name:m,value:b[m]}),l);if(d.mount(zdom("input",{type:"hidden",name:"zmrcsr",value:f.getCookie("zmcsr")}),l),g){var n=document.getElementById("tarIframe");n.onload=function(){try{var a=n.innerText||n.textContent,b=JSON.parse(a);0===b[0]&&g(b[1])}catch(c){}}}l.submit(),setTimeout(function(){h.remove(l)},0)};try{var i={};i[zmail.urls.gadURL]=1,window.addEventListener("message",function(a){if(a.origin in i){var b=c.parseJSON(a.data);c.publish(b.eventName,b.data)}})}catch(j){window.console.error&&window.console.error(j)}return window.zmAjq=f,f}),define([],function(a){var b=a("$"),c=a("zmail.Utils.DOM"),d=c.element({}),e=function(){d.on.apply(d,arguments)},f=function(){d.off.apply(d,arguments)},g=function(){d.trigger.apply(d,arguments)};return b.subscribe=e,b.unsubscribe=f,b.publish=g,b}),define([],function(a){var b=a("zmail.Core.Namespaces"),c=b.create("zmail.Framework.Utils"),d=a("zmail.Utils.DOM"),e=function(){function a(){babelHelpers.classCallCheck(this,a),this.eventObj={}}return babelHelpers.createClass(a,[{key:"_subscribeHandler",value:function(a,b){var c=this;"function"==typeof b&&d.element(c.eventObj).on(a,b)}},{key:"_unsubscribeHandler",value:function(a,b){var c=this;"function"==typeof b&&d.element(c.eventObj).off(a,b)}},{key:"publish",value:function(a,b){var c=this;d.element(c.eventObj).trigger(a,b)}},{key:"_silenceObject",value:function(){var a=this;d.element(a.eventObj).off()}}]),a}();return c.PUBSUB=e,e}),define([],function(a){var b=a("$"),c=a("_"),d=a("zmail.Utils.DOM"),e={},f=!0,g=0,h=function(){return g+=1,"zmailpw"+g+"_blank"},i=function(){return"status=yes,toolbar=no,menubar=no,location=no,scrollbars=yes,resizable=yes,titlebar=yes"},j=function(){var a=window.open("",h(),i());return a&&a.opener&&(a.opener=void 0),a},k=function(a){return c.isString(a)?a:(a=d.element(a,!0),a.outerHTML)},l=[];l=zmail.isProduction?["zmcss.css","zmprint.css"]:["font.css","base.css","nightmode.css","zmprint.css"];var m={js:["printEvents.js"],css:l},n=function(a){return a.createTitle=function(a){return zdom("title",null,a.title).outerHTML},a.cssLinks=function(a){if(a&&a.length)return a.map(function(a){return a=zmResource.get("css",a),0!==a.indexOf("http")&&(a=window.location.protocol+a),"<link href='"+a+"'  rel='stylesheet' />"}).join("")},a.scriptTags=function(a){if(a&&a.length)return a.map(function(a){return a=zmResource.get("js",a),0!==a.indexOf("http")&&(a=window.location.protocol+a),"<script src='"+a+"'></script>"}).join("")},a.createButton=function(){return["<div id='pbtn'>","<div class='rgtdiv'>","<div class='SC_PactionBg' onclick='window.print()'>","<span>","<i class='msi-print'></i>","Print","</span>","</div>","</div>","<div class='rgtdiv'>","<div class='SC_PactionBg cancel' onclick='window.close()'>","<span>","Cancel","</span>","</div>","</div>","</div>"].join("")},a}({}),o=function(a){var b=a.printWindow||j();if(b){b.document.open("text/html"),b.document.write(n.createTitle(a));var d=c.isArray(a.css)?a.css:[];b.document.write(n.cssLinks(d.concat(m.css))),b.document.write("<body class='zmDefaultMode'>"),b.document.write(n.createButton()),b.document.write(k(a.content));var e=c.isArray(a.js)?a.js:[];b.document.write(n.scriptTags(e.concat(m.js))),b.document.write("</body>"),b.document.close()}},p=function(){return f=!0,b.Deferred().reject().promise()},q=function(){var b=a("zmTab"),c=b.getTabObject();return c&&c.print?c.print:p};return e.print=function(a){var b;return a?void o(a):void(f&&(f=!1,q()().progress(function(){b=j()}).done(function(a){a.printWindow=b,o(a)}).always(function(){f=!0})))},window.zmail.Printer=b.extend(window.zmail.Printer,e),e}),window.zmshCut=function(a){var b=zmail.Utils.DOM,c=function(a,b,c){return zmText.get("preUtils","shortcut."+a,b,c)},d={shortcutException:!0,type:"i",message:c("dispMsg.selectMail")},e={shortcutException:!0,type:"i",message:c("dispMsg.selectMails")},f={mail:"m",task:"t",notes:"n",calendar:"c",streams:"zmStreamsApp",attachmentViews:"attView",notifications:"zmncenter",settings:"settings"},g={sc:function(){zmUtil.hideMenu();var a=zmApp.currentApp,b="6";"c"===a?b="4":"t"===a?b="3":"n"===a&&(b="2"),zmUtil.loadSmartCompose({eType:b,type:"tab"})},m:function(){zmUtil.hideMenu(),zmUtil.compose()},t:function(){zmUtil.hideMenu(),zmUtil.loadTask({action:"addCTask",groupId:zmail.zuid})},n:function(){zmUtil.hideMenu(),"n"===zmApp.currentApp?znNote.createInlineNotes():zmUtil.loadNotes("popup")},c:function(){zmUtil.hideMenu(),zmApp.loadCalendar("/calendar/event")},b:function(){zmUtil.hideMenu(),zmUtil.loadLink({mode:"create",groupId:zmail.zuid,catid:""})}},h=function(a,b){var c,f=zmUtil.getSelectedMails(),g=f[0].length,h=f[1].length;if(g||h){if(a||1===g&&0===h||0===g&&1===h){if(a)return f;c=g?f[0][0]:f[1][0]}else if(!b)throw d}else if(!b)throw e;return c},i=function(a){var b,c=zmInit.getListingDetObj();return a=a||c.fId,b=zmail.folId,a===b.dId||a===b.teId||a===b.oId},j={"!":"shift+1","@":"shift+2","#":"shift+3",$:"shift+4","%":"shift+5","^":"shift+6","&":"shift+7","*":"shift+8","(":"shift+9",")":"shift+0","{":"shift+openBracket","}":"shift+closeBracket","|":"shift+backSlash","/":"forwardSlash","\\":"backSlash","[":"openBracket","]":"closeBracket","`":"backtick","~":"shift+backtick","'":"singleQuote",'"':"shift+singleQuote",";":"semiColon",":":"shift+semiColon",".":"period",",":"comma","=":"equalTo","+":"shift+equalTo","-":"minus",_:"shift+minus"},k=["gotoInbox","gotoUnreadView","gotoSentbox","gotoDraft","gotoFlagView","gotoAllView","gotoLabelView","selectMail","selectAllMail","deSelectAllMail","previousMail","nextMail","expandFolder","collapseFolder","previousTab","nextTab","closeTab","sendMail","sendMailNow","saveDraft","saveTemplate","cmposeToWin","compose","reply","replyAll","forward","editAsNew","search","advanceSearch","markmenu","labelMenu","shortcutMenu","moveToMenu","viewMenu","clearMenu","clearLabel","openMailInTab","openMailInWin","closePreview","showOriginalMail","fetchMail","reportSpam","printMail","markAsUnread","markAsRead","deleteMail","archiveMail","addToFilter","previousTask","nextTask","previousNote","nextNote"],l={},m=function(a){var b,c,d,e,f,g,h,i,l,m=zmail.encodedShortcut||{},n=Object.keys(m).length;for(i=1;i<=n;i++){for(c="",b=m[i],b=b.replace(/&#34;/g,'"'),b=b.replace(/&#39;/g,"'"),b=b.replace(/&#92;/g,"\\"),b.length>4&&b.indexOf("ctrl")!==-1&&(c+="ctrl+",b=b.replace("ctrl","")),b.length>5&&b.indexOf("shift")!==-1&&(c+="shift+",b=b.replace("shift","")),b.length>4&&b.indexOf("enter")!==-1&&(c+="enter",b=b.replace("enter",""),b&&(c+="+")),b.length>2&&b.indexOf("ESC")!==-1&&(c+="esc",b=b.replace("ESC",""),b&&(c+="+")),b.length>2&&b.indexOf("Delete")!==-1&&(c+="delete",b=b.replace("Delete",""),b&&(c+="+")),e=b.length,f=e-1,l=0;l<e;l++)g=b.charCodeAt(l),h=b.charAt(l),c+=g>=65&&g<=90?"shift+"+h.toUpperCase():h in j?j[h]:h.toUpperCase(),l<f&&(c+="/");d=k[i-1]||i,a[d]=c}},n=[],o=[],p=[],q=[],r=[],s=[],t=function(a,c){c||(c=b.selector("#"+a)),c.trigger("click");var d=c[0];d.scrollIntoView&&d.scrollIntoView()};a.currentLeftId="";var u=function(c){var d,e,f,g,h;switch(c){case"gotoInbox":t(zmail.folId.iId);break;case"gotoUnreadView":t("zm_unread");break;case"gotoSentbox":t(zmail.folId.sId);break;case"gotoDraft":t(zmail.folId.dId);break;case"gotoFlagView":t("zm_flag");break;case"gotoAllView":t("zm_all");break;case"gotoLabelView":t(null,b.element(b.selector("#zmllabel").children()[0]));break;case"expandFolder":"zm_Container"===zmTab.currentTab&&zmInit.isLeftFocused&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&(h=zmail.mailLeft.getNodes()[0].el.find("#"+a.currentLeftId),h.hasClass("SC_ltl")?h.next(".SC_ldt").is(":visible")||h.trigger("click"):zmInit.findFolName(a.currentLeftId)&&h.find("i").not(".msi-arrow45").trigger("click"));break;case"collapseFolder":"zm_Container"===zmTab.currentTab&&zmInit.isLeftFocused&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&(h=zmail.mailLeft.getNodes()[0].el.find("#"+a.currentLeftId),h.hasClass("SC_ltl")?h.next(".SC_ldt").is(":visible")&&h.trigger("click"):zmInit.findFolName(a.currentLeftId)&&h.find("i.msi-arrow45").trigger("click"));break;case"nextRow":if("zm_Container"===zmTab.currentTab&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&zmInit.isLeftFocused&&!zmsuite.getCenter("zm_Container")[1].$el.hasClass("shw")&&(e=zmail.mailLeft.getNodes()[0],f=e.el,d=f.find(".SC_ltl:visible, .SC_tre:visible"),h=f.find("#"+a.currentLeftId),g=d.index(h[h.length-1]),g<d.length-1)){if(h=b.element(d[g+1]),h.hasClass("SC_ltl")){for(h=e.getLayer(h[0].id);h&&h.disableSelection;)h=e.getNextLayer(h.id);h&&(a.currentLeftId=h.id,d.filter(".Stre").removeClass("Stre"),b.addClass(h.el.children()[0],"Stre"),h=h.el)}else h.trigger("click");h&&h.position().top>f.height()-20&&f.scrollTop(f.scrollTop()+33)}break;case"previousRow":if("zm_Container"===zmTab.currentTab&&!zmList.isListingChecked(zmail.mailCenter.listElem)&&zmInit.isLeftFocused&&!zmsuite.getCenter("zm_Container")[1].$el.hasClass("shw")){e=zmail.mailLeft.getNodes()[0],f=e.el,d=f.find(".SC_ltl:visible, .SC_tre:visible"),h=f.find("#"+a.currentLeftId),g=d.index(h[h.length-1]);var i=b.element(d[g]);if(i.hasClass("SC_ltl")){i=e.getLayer(i[0].id);for(var j=e.getPreviousLayer(i.id);j&&j.disableSelection;)i=j,j=e.getPreviousLayer(i.id);h=f.find("#"+i.id),g=d.index(h[h.length-1])}g>0&&(h=b.element(d[g-1]),h.hasClass("SC_ltl")?(a.currentLeftId=h[0].id,d.filter(".Stre").removeClass("Stre"),h.addClass("Stre")):h.trigger("click"),h.position().top<20&&f.scrollTop(f.scrollTop()-33))}}},v=function(a,b){if("zm_Container"===zmTab.currentTab||zmTab.currentTab.indexOf("zm_srch")!==-1)switch(a){case"selectMail":"zmStreamTree"===zmail.mailLeft.selLayerId&&zmTab.currentTab.indexOf("zm_srch")===-1||zmList.chkSingleMsg();break;case"selectAllMail":"zmStreamTree"===zmail.mailLeft.selLayerId&&zmTab.currentTab.indexOf("zm_srch")===-1||zmList.chkAll();break;case"deSelectAllMail":"zmStreamTree"===zmail.mailLeft.selLayerId&&zmTab.currentTab.indexOf("zm_srch")===-1||zmList.unchkAll();break;case"previousMail":zmInit.isLeftFocused?(u("previousRow"),b.preventDefault()):zmList.listingFocused&&(zmPreviewTemplate.loadPrevMail(),b.preventDefault());break;case"nextMail":zmInit.isLeftFocused?(u("nextRow"),b.preventDefault()):zmList.listingFocused&&(zmPreviewTemplate.loadNextMail(),b.preventDefault());break;case"expandMail":zmInit.isLeftFocused?u("expandFolder"):zmList.showThreadTree();break;case"collapseMail":zmInit.isLeftFocused?u("collapseFolder"):zmList.hideThreadTree()}},w=function(a){var b,c,d,e,f,g,j,k,l=zmTab.currentTab.indexOf("zm_tab")!==-1?1:0;try{switch(a){case"reply":g=h(),j=zmUtil.getMailObj(g,"FD"),i()||zmUtil.isSharedFolder(j,"RW")||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"reply",type:"t",msgId:g}));break;case"replyAll":g=h(),j=zmUtil.getMailObj(g,"FD"),i()||zmUtil.isSharedFolder(j,"RW")||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"replyall",type:"t",msgId:g}));break;case"forward":g=h(),j=zmUtil.getMailObj(g,"FD"),i()||zmUtil.isSharedFolder(j,"RW")||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"fwdi",type:"t",msgId:g}));break;case"editAsNew":g=h(),j=zmUtil.getMailObj(g,"FD"),i()||zmUtil.isSharedFolder(j,"RW")||(zmUtil.hideMenu(),zmUtil.cmpReply({mode:"eanew",type:"t",msgId:g}));break;case"viewMenu":i()||"zm_Container"===zmTab.currentTab&&""!==zmInit.getListingDetObj().fId&&zmsuite.getCenter()[l].getNodes()[0].$el.find(".msi-filter").trigger("click");break;case"labelMenu":f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,b!==zmail.folId.spId&&!i()&&h(!0,!0)&&(zmUtil.hideMenu(),k=zmsuite.getCenter()[l].getNodes()[0].$el.find(".msi-label"),k.is(":visible")&&k.trigger("click"));break;case"moveToMenu":f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,b===zmail.folId.spId||i()||!h(!0,!0)||zmUtil.isSharedFolder(b)||(zmUtil.hideMenu(),k=zmsuite.getCenter()[l].getNodes()[0].$el.find(".msi-folder"),k.is(":visible")&&k.trigger("click"));break;case"clearLabel":i()||(c=zmUtil.getSelectedMailsWithLabels(),d=c[0],e=c[1],(d.length||e.length)&&zmail.MailAction.Initializer.applyActions("label","click",{lA:"deleteall",msgId:d,thd:e}));break;case"openMailInTab":zmInit.getListingDetObj().fId!==zmail.folId.oId&&(zmInit.rclkId=h(),zmList.bindAction({action:"opentab",opentype:2}),zmInit.rclkId=0);break;case"openMailInWin":i()||(zmInit.rclkId=h(),zmUtil.getMailObj(zmInit.rclkId,"streams")||zmList.bindAction({action:"openwindow",opentype:2}),zmInit.rclkId=0);break;case"showOriginalMail":b=h(),i(zmUtil.getMailObj(b,"FD"))||zmPreviewTemplate.showOrgMsg({mId:b});break;case"reportSpam":c=zmail.folId,f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,!h(!0,!1)||i(b)||zmUtil.isSharedFolder(b)||b!==c.spId&&b!==c.sId&&zmail.MailAction.Initializer.doActions("spam");break;case"reportNotSpam":c=zmail.folId,f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,h(!0,!1)&&b===c.spId&&zmail.MailAction.Initializer.doActions("notspam");break;case"openReader":b=h(),zmPreviewTemplate.shortCutHandler(a,{mId:b});break;case"printMail":b=h(),zmPreviewTemplate.shortCutHandler(a,{mId:b});break;case"markAsUnread":f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,i()||zmUtil.isSharedFolder(b,"R")||(c=h(!0,!1),d=c[0],e=c[1],(d.length||e.length)&&zmail.MailAction.Initializer.applyActions("unread",null,{msgId:d,thd:e}));break;case"markAsRead":f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,i()||zmUtil.isSharedFolder(b,"R")||(c=h(!0,!1),d=c[0],e=c[1],(d.length||e.length)&&zmail.MailAction.Initializer.applyActions("read",null,{msgId:d,thd:e}));break;case"deleteMail":f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,(c=h(!0,!1))&&!zmUtil.isSharedFolder(b)&&(d=c[0],e=c[1],(d.length||e.length)&&zmail.MailAction.Initializer.doActions("delete",null,{msgId:d,thd:e}));break;case"archiveMail":c=zmail.folId,f=zmsuite.getCenterOuter().$el.data("data-detail"),b=f&&f.fId||zmInit.getListingDetObj().fId,h(!0,!1)&&!zmUtil.isSharedFolder(b)&&b!==c.teId&&b!==c.spId&&b!==c.dId&&b!==c.oId&&b!==c.tId&&zmail.MailAction.Initializer.doActions("archive")}}catch(m){m.shortcutException&&_zm.succErrMsg(m.type,m.message)}},x=function(a,b,c){if(zmApp&&"m"===zmApp.currentApp)switch(b){case"mailLeft":u(a);break;case"mailListing":v(a,c);break;case"mailSelection":w(a)}},y=function(a,b,c){if(zmApp&&"t"===zmApp.currentApp)switch(b){case"taskListing":zmTask.navigateListing(a)}},z=function(a,b,c){if(zmApp&&"n"===zmApp.currentApp)switch(b){case"noteListing":znNote.navigateListing(a)}},A=function(a,c,d){if(zmTab.currentTab.indexOf("Cmp")!==-1)switch(a){case"sendMail":zmComp.sendMail({action:"compose",sendIm:!1,cmpId:zmTab.currentTab});break;case"sendMailNow":zmComp.sendMail({
action:"compose",sendIm:!0,cmpId:zmTab.currentTab});break;case"saveDraft":zmComp.sendMail({action:"sdraft",cmpId:zmTab.currentTab});break;case"saveTemplate":zmComp.sendMail({action:"stemplate",cmpId:zmTab.currentTab});break;case"gotoSubject":var e=b.element(d.target||d.srcElement),f=e.closest(".ze_body");f.length>0&&(f.focusout(),b.focus(b.selector("#zmsub_"+zmTab.currentTab)))}},B=function(a){var b=zmail.appList.appObj;switch(a){case"toMail":b.mail.selectApp(),zmApp.showApp(f.mail);break;case"toCalendar":b.cal.selectApp(),zmApp.showApp(f.calendar);break;case"toTask":b.task.selectApp(),zmApp.showApp(f.task);break;case"toNotes":b.notes.selectApp(),zmApp.showApp(f.notes);break;case"toStreams":zmsuite.loadStreams();break;case"toAttachment":zmsuite.loadAttachView()}},C=function(a){var b;switch(a){case"create":var c=zmApp.currentApp;zmail.isSmartComposeEnabled&&(c="sc"),b=g[c],b&&b();break;case"composeMail":g.m();break;case"createEvent":g.c();break;case"createTask":g.t();break;case"createNotes":g.n();break;case"addBookmark":g.b()}},D=function(a){var b={},c=zmail.newSearch?zmail.Search.Models.Contexts:{},d=function(){b=zmail.newSearch?{MAIL:c.mailSearchContext,STREAMS:c.streamSearchContext,TASK:c.taskContextSearch,NOTES:c.noteSearchContext,QUICK_ACCESS:c.Commands,BOOKMARKS:c.linkSearchContext,ATTACHMENT:c.attachmentSearchContext,CALENDAR:c.calendarContextSearch,CONTACTS:(window.ZContacts||{}).newSearchContext}:{MAIL:f.mail,STREAMS:f.streams,TASK:f.task,NOTES:f.notes}},e=function(a){$.publish("mailsuite/searchOpen",{context:a})},g=function(a){var c=function(){};a=a||b.MAIL;var d=(zmail.newSearch?e:zmSearch.updateSearchValues)||c;d(a)};switch(d(),a){case"search":break;case"mailSearch":g(b.MAIL);break;case"notesSearch":g(b.NOTES);break;case"taskSearch":g(b.TASK);break;case"streamsSearch":g(b.STREAMS);break;case"quickAccess":g(b.QUICK_ACCESS);break;case"bookmarksSearch":g(b.BOOKMARKS);break;case"attachmentsSearch":g(b.ATTACHMENT);break;case"calendarSearch":g(b.CALENDAR);break;case"contactsSearch":g(b.CONTACTS)}zmail.newSearch?$.publish("mailsuite/searchOpen"):zmSearch.searchField.select().focus()},E=function(a,b,c){var d,e;switch(a){case"clearMenu":zmUtil.hideMenu(!0);break;case"expandMail":case"collapseMail":case"previousMail":case"nextMail":x(a,b,c);break;case"previousTab":d=zmTab.getPreviousTabId(zmTab.currentTab),d&&(zmUtil.hideMenu(!0),zmsuite.showWorkSpace(d));break;case"nextTab":d=zmTab.getNextTabId(zmTab.currentTab),d&&(zmUtil.hideMenu(!0),zmsuite.showWorkSpace(d));break;case"closeTab":zmsuite.closeWorkspace(zmTab.currentTab)&&zmUtil.hideMenu(!0);break;case"closePreview":if(e=zmsuite.getCenter()[1],e&&e.$el&&e.$el.hasClass("shw")){var f=e.headerObj.$el.find(".msi-close");f&&f.trigger("click")}$.publish("zm/shortcuts/global/closepreview",{});break;case"gotoSubject":A(a,b,c);break;case"toMail":case"toCalendar":case"toTask":case"toNotes":case"toStreams":case"toAttachment":B(a,b);break;case"create":case"composeMail":case"createEvent":case"createTask":case"createNotes":case"addBookmark":C(a,b);break;case"genericSearch":case"mailSearch":case"taskSearch":case"notesSearch":case"streamsSearch":case"quickAccess":case"bookmarksSearch":case"attachmentsSearch":case"calendarSearch":case"contactsSearch":D(a);break;case"print":zmail.Printer.print();break;case"systemPrint":window.print()}},F=function(a,b,c,d,e,f,g,h){return{scope:a,group:b||"default",uid:c,keyStr:d,actions:[e],includeHandling:g,preventDefault:h,displayName:f}},G=function(a){return a=a||{},a.toMail="A/M",a.toCalendar="A/C",a.toTask="A/T",a.toNotes="A/N",a.toStreams="A/S",a.toAttachment="A/F",a.create="C",a.composeMail="C/M",a.createEvent="C/E",a.createTask="C/T",a.createNotes="C/N",a.addBookmark="C/B",a.search="forwardSlash",a.mailSearch="forwardSlash/M",a.taskSearch="forwardSlash/T",a.notesSearch="forwardSlash/N",a.streamsSearch="forwardSlash/S",a.quickAccess="forwardSlash/Q",a.calendarSearch="forwardSlash/C",a.bookmarksSearch="forwardSlash/B",a.attachmentsSearch="forwardSlash/A",a.contactsSearch="forwardSlash/I",a},H=function(){if(n.push(F("default","mailListing","expandMail","rightArrow",E,c("dispNames.expandMail")),F("default","mailListing","collapseMail","leftArrow",E,c("dispNames.collapseMail")),F("default","mailListing","previousMail","upArrow",E,c("dispNames.previousMail")),F("default","mailListing","nextMail","downArrow",E,c("dispNames.nextMail")),F("default",null,"print","ctrl+P",E,c("dispNames.print"),!1,!0),F("default",null,"systemPrint","ctrl+shift+P",E,c("dispNames.systemPrint"),!1,!0)),zmail.mailOpt.isKey){n.push(F("default",null,"previousTab",l.previousTab,E,c("dispNames.previousTab"),!1,!0),F("default",null,"nextTab",l.nextTab,E,c("dispNames.nextTab"),!1,!0),F("default",null,"closeTab",l.closeTab,E,c("dispNames.closeTab"),!1,!0),F("default",null,"closePreview",l.closePreview,E,c("dispNames.closePreview")),F("default",null,"clearMenu",l.clearMenu,E,c("dispNames.clearMenu"),!0)),zmail.fromOtherService||n.push(F("default","appNavigation","toMail",l.toMail,E,c("dispNames.toMail")),F("default","appNavigation","toCalendar",l.toCalendar,E,c("dispNames.toCalendar")),F("default","appNavigation","toTask",l.toTask,E,c("dispNames.toTask")),F("default","appNavigation","toNotes",l.toNotes,E,c("dispNames.toNotes")),F("default","appNavigation","toStreams",l.toStreams,E,c("dispNames.toStreams")),F("default","appNavigation","toAttachment",l.toAttachment,E,c("dispNames.toAttachment"))),n.push(F("default","newCreation","create",l.create,E,c("dispNames.create"),!1,!0),F("default","newCreation","composeMail",l.composeMail,E,c("dispNames.composeMail"),!1,!0)),zmail.fromOtherService||n.push(F("default","newCreation","createEvent",l.createEvent,E,c("dispNames.createEvent"),!1,!0),F("default","newCreation","createTask",l.createTask,E,c("dispNames.createTask"),!1,!0),F("default","newCreation","createNotes",l.createNotes,E,c("dispNames.createNote"),!1,!0),F("default","newCreation","addBookmark",l.addBookmark,E,c("dispNames.addBookmark"),!1,!0)),n.push(F("default","search","genericSearch",l.search,E,c("dispNames.contextualSearch"),!1,!0));var a={mail:["mail","streams","attachment"],cal:["calendar"],notes:["notes"],task:["task"],contacts:["contacts"],links:["bookmarks"]},b=[],d=String(window.location.href);zmail.fromOtherService?(b=["mail","contacts"],"recruit"===d.match(/fromService=?(.*)/)[1].toString().slice(0,7)&&b.push("cal")):b=Object.keys(a);for(var e=[],f=0;f<b.length;++f){var g=String(b[f]).toLowerCase();a[g]&&Array.isArray(a[g])&&(e=e.concat(a[g]))}e.forEach(function(a){switch(a){case"mail":n.push(F("default","search","mailSearch",l.mailSearch,E,c("dispNames.mailSearch"),!1,!0));break;case"streams":n.push(F("default","search","streamsSearch",l.streamsSearch,E,c("dispNames.streamsSearch"),!1,!0));break;case"attachment":n.push(F("default","search","attachmentsSearch",l.attachmentsSearch,E,c("dispNames.attachmentsSearch"),!1,!0));break;case"calendar":n.push(F("default","search","calendarSearch",l.calendarSearch,E,c("dispNames.calendarSearch"),!1,!0));break;case"notes":n.push(F("default","search","notesSearch",l.notesSearch,E,c("dispNames.notesSearch"),!1,!0));break;case"task":n.push(F("default","search","taskSearch",l.taskSearch,E,c("dispNames.taskSearch"),!1,!0));break;case"contacts":n.push(F("default","search","contactsSearch",l.contactsSearch,E,c("dispNames.contactsSearch"),!1,!0));break;case"bookmarks":n.push(F("default","search","bookmarksSearch",l.bookmarksSearch,E,c("dispNames.bookmarksSearch"),!1,!0))}}),zmail.fromOtherService||n.push(F("default","search","quickAccess",l.quickAccess,E,c("dispNames.quickAccess"),!1,!0)),o.push(F("mail","mailLeft","gotoInbox",l.gotoInbox,x,c("dispNames.goToInbox")),F("mail","mailLeft","gotoUnreadView",l.gotoUnreadView,x,c("dispNames.goToUnreadView")),F("mail","mailLeft","gotoSentbox",l.gotoSentbox,x,c("dispNames.goToSent")),F("mail","mailLeft","gotoDraft",l.gotoDraft,x,c("dispNames.goToDraft")),F("mail","mailLeft","gotoFlagView",l.gotoFlagView,x,c("dispNames.goToFlag")),F("mail","mailLeft","gotoAllView",l.gotoAllView,x,c("dispNames.goToAllView")),F("mail","mailLeft","gotoLabelView",l.gotoLabelView,x,c("dispNames.goToLabelView")),F("mail","mailLeft","expandFolder",l.expandFolder,x,c("dispNames.expandFolder")),F("mail","mailLeft","collapseFolder",l.collapseFolder,x,c("dispNames.collapseFolder")),F("mail","mailListing","selectMail",l.selectMail,x,c("dispNames.selectMail"),!1,!0),F("mail","mailListing","selectAllMail",l.selectAllMail,x,c("dispNames.selectAllMail"),!1,!0),F("mail","mailListing","deSelectAllMail",l.deSelectAllMail,x,c("dispNames.deselectAllMail"),!1,!0),F("mail","mailListing","previousMail",l.previousMail,x,c("dispNames.previousMail")),F("mail","mailListing","nextMail",l.nextMail,x,c("dispNames.nextMail")),F("mail","mailSelection","reply",l.reply,x,c("dispNames.reply"),!1,!0),F("mail","mailSelection","replyAll",l.replyAll,x,c("dispNames.replyAll"),!1,!0),F("mail","mailSelection","forward",l.forward,x,c("dispNames.forward"),!1,!0),F("mail","mailSelection","editAsNew",l.editAsNew,x,c("dispNames.editAsNew"),!1,!0),F("mail","mailSelection","viewMenu",l.viewMenu,x,c("dispNames.viewMenu"),!1,!0),F("mail","mailSelection","labelMenu",l.labelMenu,x,c("dispNames.labelMenu"),!1,!0),F("mail","mailSelection","moveToMenu",l.moveToMenu,x,c("dispNames.moveToMenu"),!1,!0),F("mail","mailSelection","clearLabel",l.clearLabel,x,c("dispNames.clearLabel")),F("mail","mailSelection","openMailInTab",l.openMailInTab,x,c("dispNames.openMailInTab")),F("mail","mailSelection","openMailInWin",l.openMailInWin,x,c("dispNames.openMailInWindow")),F("mail","mailSelection","showOriginalMail",l.showOriginalMail,x,c("dispNames.showOriginal")),F("mail","mailSelection","reportSpam",l.reportSpam,x,c("dispNames.reportSpam")),F("mail","mailSelection","printMail",l.printMail,x,c("dispNames.printMail")),F("mail","mailSelection","markAsUnread",l.markAsUnread,x,c("dispNames.markAsUnread")),F("mail","mailSelection","markAsRead",l.markAsRead,x,c("dispNames.markAsRead")),F("mail","mailSelection","deleteMail",l.deleteMail,x,c("dispNames.deleteMail"),!1,!0),F("mail","mailSelection","archiveMail",l.archiveMail,x,c("dispNames.archiveMail")),F("mail","mailSelection","reportNotSpam","shift+N",x,c("dispNames.reportNotSpam")),F("mail","mailSelection","openReader","shift+R",x,c("dispNames.readerView"))),p.push(F("compose",null,"sendMail",l.sendMail,A,c("dispNames.sendMail"),!1,!0),F("compose",null,"sendMailNow",l.sendMailNow,A,c("dispNames.sendMailNow"),!1,!0),F("compose",null,"saveDraft",l.saveDraft,A,c("dispNames.saveDraft"),!1,!0),F("compose",null,"previousTab",l.previousTab,E,c("dispNames.previousTab"),!1,!0),F("compose",null,"nextTab",l.nextTab,E,c("dispNames.nextTab"),!1,!0),F("compose",null,"closeTab",l.closeTab,E,c("dispNames.closeTab"),!1,!0),F("compose",null,"clearMenu",l.clearMenu,E,c("dispNames.clearMenu"),!0),F("compose",null,"saveTemplate",l.saveTemplate,A,c("dispNames.saveTemplate"),!1,!0)),q.push(F("streams","default","AddPost","ctrl+enter","",c("dispNames.addPost"),!1,!0),F("streams","default","AddComment","ctrl+enter","",c("dispNames.addComment"),!1,!0)),r.push(F("task","taskListing","previousTask","upArrow",y,c("previous task")),F("task","taskListing","nextTask","downArrow",y,c("next task"))),s.push(F("note","noteListing","previousNote","upArrow",z,c("previous note")),F("note","noteListing","nextNote","downArrow",z,c("next note")))}else n.push(F("default",null,"clearMenu","ESC",E,c("dispNames.clearMenu"),!0))};return m(l),G(l),H(),a.decodedShortcut=l,a.shortcutNames=k,a["default"]=n,a.mail=o,a.compose=p,a.streams=q,a.task=r,a.note=s,a}(window.zmshCut||{}),define([],function(a){var b,c=a("$"),d=a("zmail.Utils.DOM"),e={},f={},g=function(a,b){a&&a.trim()&&"function"==typeof b&&(f[a]=b)},h=function(a){"function"==typeof a&&(b=a)},i=function(b){var c=a("zmsuite"),d=a("zmTab"),e=c.getAppObj(b||d.currentTab),f=e&&e.obj||{};return f.defaultAppName||f.appname||""},j=function(b){var c=a("zmsuite"),d=a("zmTab"),e=c.getAppObj(b||d.currentTab),f=e&&e.obj||{};return f.hasOwnProperty("defaultAppName")},k=function(){var c=a("zmTab"),d=c.currentTab,e=f[d],g=i(d);return g&&(g=g.charAt(0).toUpperCase()+g.substr(1)),e&&!j(d)?e:g?function(){return g}:b?b:function(){return""}},l=function(){return zmail.i18n&&zmail.i18n.zmail||zmail.globalI18N.productName||"Zoho Mail"},m=function(){return zmail.aInfo&&zmail.aInfo[zmail.accId]&&zmail.aInfo[zmail.accId].mailId||""},n=function(){return zmail.aInfo&&zmail.aInfo[zmail.accId]&&zmail.aInfo[zmail.accId].disName||""},o=function(a){var b,c=m(),e=n();a=a||[],"string"==typeof a&&(a=[a]),c||e?a.push(l()+" ("+(c||e)+")"):a.push(l()),b=a.join(" - "),document.title=b;var f=d.element(d.selector("title",document.head));return d.setText(f,b),b},p=function(){var a=e.getTitleProvider();return o(a())},q=function(){c.subscribe("mailsuite/appCreated",function(){e.updateTitle()}),c.subscribe("mailsuite/appOpened",function(){e.updateTitle()}),c.subscribe("mailsuite/appClosed",function(){e.updateTitle()}),c.subscribe("mail/listing/viewchanged",function(){e.updateTitle()}),c.subscribe("/apps/tabSwitched",function(){e.updateTitle()})};return e.registerTitleProvider=g,e.getTitleProvider=k,e.registerDefaultProvider=h,e.setTitle=o,e.updateTitle=p,e.init=q,window.zmWinTitle=e,e}),define([],function(){var a=zmail.Core.Namespaces,b=a.create("zmHash"),c=zmail.Utils.DOM,d="undefined"!=typeof window.history&&"function"==typeof window.history.pushState,e={},f=null,g=function(a){a=a||location.hash||"";var b="",c=[];c=a.split("#"),c.shift(),c=c.join("").split("/"),b=c.shift();for(var d in c)(c[d]||"").trim()||c.splice(d,1);return{key:b,params:c}},h=function(a,b){if(a=a||"",b=b||"","string"!=typeof b){for(var c in b)(b[c]||"").trim()||b.splice(c,1);b=b.join("/")}b&&"/"!==b.charAt(0)&&(b="/"+b);var d="#"+a+b;return d},i=function(a,b){var d=!1,f=!0;return a&&c.element(e).triggerHandler("hash/"+a,{key:a,params:b,handled:function(){d=!0},preventDefaultAction:function(){f=!1}}),{handled:d,defaultAction:f}},j=function(){function a(){babelHelpers.classCallCheck(this,a)}return babelHelpers.createClass(a,[{key:"hashChangeHandler",value:function(){var a=g(location.hash),b={handled:!1,defaultAction:!0};b=i(a.key,a.params),b.defaultAction===!0&&$.publish("mailsuite/hashurl/changed",{hashKey:a.key,hashParams:a.params,trigger:!0}),$.publish("mailsuite/hashurl/updated",{hashKey:a.key,hashParams:a.params})}},{key:"bindRouteChangeEvent",value:function(){}},{key:"initialize",value:function(a){var b=this;b.hashChangeHandler=b.hashChangeHandler.bind(b),b.bindRouteChangeEvent()}},{key:"setHash",value:function(a){}},{key:"replaceHash",value:function(a){}}]),a}(),k=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"bindRouteChangeEvent",value:function(){var a=this;c.element(window).off("popstate",a.hashChangeHandler).on("popstate",a.hashChangeHandler)}},{key:"setHash",value:function(a){history.pushState({},"",a)}},{key:"replaceHash",value:function(a){history.replaceState({},"",a)}}]),b}(j),l=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"bindRouteChangeEvent",value:function(){var a=this;c.element(window).off("hashchange",a.hashChangeHandler).on("hashchange",a.hashChangeHandler)}},{key:"setHash",value:function(a){var b=this,d=function(){setTimeout(function(){c.element(window).off("hashchange",b.hashChangeHandler).on("hashchange",b.hashChangeHandler)},0)};c.element(window).off("hashchange",b.hashChangeHandler).on("hashchange",d),location.hash=a,setTimeout(function(){c.element(window).off("hashchange",d)},0)}},{key:"replaceHash",value:function(a){var b=this;b.setHash(a)}}]),b}(j),m=function(a,b){a&&"function"==typeof b&&"function"==typeof b._proxyCallback&&c.element(e).off("hash/"+a,b._proxyCallback)},n=function(a,b){if(a&&"function"==typeof b){m(a,b);var d=function(a,c){var d=b(c.key,c.params);c.handled(),d.defaultAction===!1&&c.preventDefaultAction()};b._proxyCallback=d,d._originalCallback=b,c.element(e).on("hash/"+a,d)}},o=function(a,b){b=b||{};var c=location.hash;c!==a&&(b.replace?f.replaceHash(a):f.setHash(a))},p=function(a,b){var c=h(a,b);o(c)},q=function(a,b){var c=h(a,b);o(c,{replace:!0})},r=function(){o("")},s=function(){var a=d?k:l;f=new a,f.initialize()};return b.register=n,b.unregister=m,b.setHash=p,b.replaceHash=q,b.clearHash=r,b.decode=g,b.encode=h,s(),b}),define([],function(){var a=zmail.Core.Namespaces,b=a.create("zmail.Utils.EmailValidator"),c={COMMENT_PART_ATSTART:/^\([^)]*\)/gim,COMMENT_PART_ATEND:/\([^)]*\)$/gim,LOCAL_PART_ALPNUM:/[A-Za-z0-9]/gim,LOCAL_PART_ALLOWED_CHARS:/[!#$%&'*+\-\/=?^_`{|}~]/gim,LOCAL_PART_QUOTED_STRING_ALLOWED_CHARS:/[ "(),:;\\<>@[\\\]]/gim,LOCAL_PART_ALLOWED_UNICODE_CHARS:/[^\u0000-\u007F]/gim,LOCAL_PART_PERIOD_CHAR:/[.]/gim,LOCAL_PART_QUOTED_STRING_FETCH:/(?:\."(.*)"\.)/gim,LOCAL_PART_QUOTED_STRING:/(\.".*"\.)/gim,LOCAL_PART_CONSECUTIVE_PEROID_CHARS:/\.{2,}/gim,DOMAIN_PART_IPV4_CHECK:/\[((?:\d{1,3}\.){3}\d{1,3})\]/gim,DOMAIN_PART_IPV6_CHECK:/\[IPV6:[\d.:a-f]+\]/gim,DOMAIN_SUBPARTS_CHECK:/^(?=[^\-".\s]{1})[^"\s.]+(?![^-".\s]{1})$/gim,DOMAIN_LAST_SUBPART_CHECK:/^(?=[^\-".\s]{1})[a-zA-Z0-9]{2,}(?![^-".\s]{1})$/gim},d={INVALID_LENGTH:[1,"Length of Email Address is invalid"],MISSING_ATTHERATE:[2,"An Email address should have a '@' character"],INVALID_DOMAINLENGTH:[3,"Length of Domain part (after @) of email address is invalid"],INVALID_LOCALPARTLENGTH:[4,"Length of Local part (before @) of email address is invalid"],INVALID_DOMAINPART:[5,"Domain part (after @) of email address is invalid"],INVALID_PERIODUSAGE:[6,"Peroid character (.) usage is invalid in Local part"],INVALID_QUOTE_ENCLOSED_FORMAT:[7,"The quote enclosed local part has character which are now allowed"],INVALID_QUOTED_PART:[8,"The quoted string in local part has characters which are not allowed"],INVALID_LOCALPART_CHARACTERS:[9,"The local part of email has characters which are not allowed"]},e=null,f=function(a){e=a||null},g=function(a){return a=a||"",a=a.replace(c.COMMENT_PART_ATSTART,""),a=a.replace(c.COMMENT_PART_ATEND,"")},h=function(){var a=function(a){return a=a||"",a=a.replace(c.LOCAL_PART_ALPNUM,""),a=a.replace(c.LOCAL_PART_ALLOWED_CHARS,""),a=a.replace(c.LOCAL_PART_QUOTED_STRING_ALLOWED_CHARS,""),a=a.replace(c.LOCAL_PART_ALLOWED_UNICODE_CHARS,""),a=a.replace(c.LOCAL_PART_PERIOD_CHAR,""),0===a.length},b=function(a){return a=a||"",a=a.replace(c.LOCAL_PART_ALPNUM,""),a=a.replace(c.LOCAL_PART_ALLOWED_CHARS,""),a=a.replace(c.LOCAL_PART_ALLOWED_UNICODE_CHARS,""),a=a.replace(c.LOCAL_PART_PERIOD_CHAR,""),0===a.length},e=function(a){if(a=a||"",'"'===a.charAt(0)&&'"'===a.charAt(a.length-1))return!0},h=function(a){return a=a||"",null!==a.match(c.LOCAL_PART_QUOTED_STRING)},i=function(a){return a=a||"",a.match(c.LOCAL_PART_QUOTED_STRING_FETCH)[0]},j=function(a){return a=a||"",a.replace(c.LOCAL_PART_QUOTED_STRING,"")},k=function(a){return a=a||"",a.length>0},l=function(a){a=a||"";var b=!0;return a.indexOf(".")===-1?b:("."===a.charAt(0)||"."===a.charAt(a.length-1)?b=!1:null!==a.match(c.LOCAL_PART_CONSECUTIVE_PEROID_CHARS)&&(b=!1),b)},m=function(c){c=c||"";var m,n=!0;if(k(c)){if(c=g(c),!l(c))return f(d.INVALID_PERIODUSAGE),n=!1;if(e(c))return c=c.substr(1,c.length-2),n=a(c),n||f(d.INVALID_QUOTE_ENCLOSED_FORMAT),n;h(c)?(m=i(c),c=j(c),a(m)?b(c)||(n=!1,f(d.INVALID_LOCALPART_CHARACTERS)):(n=!1,f(d.INVALID_QUOTED_PART))):(n=b(c),n||f(d.INVALID_LOCALPART_CHARACTERS))}else f(d.INVALID_LOCALPARTLENGTH),n=!1;return n};return{validate:m}}(),i=function(){var a=function(a){a=a||"";var b=c.DOMAIN_PART_IPV4_CHECK;return null!==a.match(b)},b=function(a){var b=c.DOMAIN_PART_IPV6_CHECK;return null!==b.exec(a)},e=function(a,b){var d=a.split(".");if(!b.allowLocalDomains&&d.length<2)return!1;var e,f,g,h=c.DOMAIN_SUBPARTS_CHECK,i=c.DOMAIN_LAST_SUBPART_CHECK,j=!0;for(e=0,f=d.length;e<f;e++)if(g=d[e],h.lastIndex=0,e===f-1){if(i.lastIndex=0,null===g.match(i)){j=!1;break}}else if(null===g.match(h)){j=!1;break}return j},h=function(a){return a=a||"",a.length>0},i=function(c,i){c=c||"";var j,k,l=!0;return h(c)?(c=g(c),j=a(c),k=b(c),j||k||(l=e(c,i),l||f(d.INVALID_DOMAINPART))):(f(d.INVALID_DOMAINLENGTH),l=!1),l};return{validate:i}}(),j=function(a){return a=a||"",a.length>0&&a.length<255},k=function(a,b){b=b||{},f(),a=a||"";var c,g,k,l=!0;k=a.lastIndexOf("@"),j(a)?k===-1?(f(d.MISSING_ATTHERATE),l=!1):(c=a.substr(0,k),g=a.substring(k+1),l=h.validate(c,b)&&i.validate(g,b)):(f(d.INVALID_LENGTH),l=!1);var m={};return m.status=l,l||(m.errorCode=e[0],m.errorMessage=e[1]),m};return b.validate=k,b}),define([],function(a){var b=a("$"),c=zmail.Core.Namespaces,d=c.create("zmail.Utils.DeferredCollection"),e=function(){function a(b){babelHelpers.classCallCheck(this,a);var c=this;b=b||{},c._collection={},c._keepDeferreds=b.keepDeferreds||!1}return babelHelpers.createClass(a,[{key:"has",value:function(a){var b=this;return a=(a||"").trim(),!!a&&"undefined"!=typeof b._collection[a]}},{key:"get",value:function(a,c){var d=this;return c=c||{},(a=(a||"").trim())?(d._collection[a]||(d._collection[a]=b.Deferred(),d._keepDeferreds||d._collection[a].always(function(){d._collection[a]=void 0})),d._collection[a]):null}},{key:"clear",value:function(a){var b=this,c=null;return(a=(a||"").trim())?(b._collection[a]&&(c=b._collection[a],b._collection[a]=void 0,delete b._collection[a]),c):null}}]),a}(),f=function(a){return new e(a)};return d.create=f,d}),define([],function(){var a,b=zmail.Core.Namespaces,c=b.create("zmail.Utils.FeatureUtil");zmail.hamburgerDeferred=$.Deferred();var d=function(){return a=[],zmail.isRebranded?(a=["FeatureCards","topbar:apps","SiteTour","ForumAccess","newHelpMenu"],zmAjq.XHR({u:"/migration/rebrand.do",t:"POST",p:{zmsa:"isRebrandingAdditonalFeatureEnabled",mode:"ZohoAppsEnabled"},fn:function(b){b.isEnabled&&(a.splice(a.indexOf("topbar:apps"),1),zmail.hamburgerDeferred.resolve())}})):zmail.isBaihui?(a=["FeatureCards","SiteTour"],zmail.hamburgerDeferred.resolve()):zmail.isFuji?(zmail.hamburgerDeferred.resolve(),a=["FeatureCards","topbar:apps","SiteTour","ForumAccess","newHelpMenu"]):zmail.hamburgerDeferred.resolve(),zmail.hamburgerDeferred.promise()},e=function(b){var c=!1;return"undefined"!=typeof b&&(c=a.indexOf(b)>-1),c};return c.isHidden=e,d(),c}),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=this.Map=function(a){return this instanceof c?(a=a||{},this.hash={},void(this.sort=a.sort===!0)):new c(a)};c.prototype={add:function(a,b){if(!a||!b)return this;a=a.toLowerCase();var c=this.hash,d=c[a];return c[a]&&c.hasOwnProperty(a)||(d=c[a]=[]),d.indexOf(b)===-1&&(d.push(b),this.sort&&d.sort()),this},get:function(a){b.isArray(a)||(a=[a]);var c=this.hash;return a.reduce(function(a,b){return b=b.toLowerCase(),a.concat(c[b]||[])},[])},getAll:function(){var a=this;return Object.keys(this.hash).reduce(function(b,c){return b.concat(a.get(c))},[])},remove:function(a,b){a=a.toLowerCase();var c,d=this.hash[a];return d&&d.length&&(c=d.indexOf(b),c>=-1&&d.splice(c,1)),this},update:function(a,b,c){return this.remove(a,b).add(a,c)}}}),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=a("zmail.Maps.Map"),d=this.IndexedMap=function(){return this instanceof d?(this.charMap=new c({}),void(this.stringMap=new c({}))):new d};d.prototype={add:function(a,b){return a&&b&&(a=a.toLowerCase(),this.charMap.add(a.charAt(0),a),this.stringMap.add(a,b)),this},getValues:function(a){var b=this.stringMap;return a.reduce(function(a,c){return a.concat(b.get(c))},[])},get:function(a){b.isArray(a)||(a=[a]);var c=this;return this.getValues(a.reduce(function(a,b){b=b.toLowerCase();var d=c.charMap.get(b.charAt(0));return b.length>=2&&(d=d.filter(function(a){return 0===a.indexOf(b)})),a.concat(d)},[]))},getAll:function(){var a=this.charMap.getAll();return this.getValues(a)},remove:function(a,b){return a=a.toLowerCase(),this.charMap.remove(a.charAt(0),a),this.stringMap.remove(a,b),this},update:function(a,b,c){return this.remove(a,b).add(a,c),this}}}),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=a("zmail.Maps.Map"),d=this.DelimitedMap=function(a){a=a||{},b.extend(this,this.defaults(),a)};d.prototype={defaults:function(){return{map:new c,delimiter:"_"}},delimitedNames:function(a){var b=this.delimiter,c=a.split(b),d=[];return c.map(function(a){return d.push(a),d.join(b)})},add:function(a,b){var c=this.delimitedNames(a),d=this.map;return c.forEach(function(a){d.add(a,b)}),this},get:function(a){var c=this.delimitedNames(a),d=this.map;return b.unique(c.reduce(function(a,b){return a.concat(d.get(b))},[]))},getAll:function(){return this.map.getAll()},remove:function(a,b){var c=this.delimitedNames(a),d=this.map;return c.forEach(function(a){d.remove(a,b)}),this}}}),function(a){a.call(zmail.Core.Namespaces.create("zmail.Maps"),zmail.Core.Namespaces.get)}(function(a){var b=a("_"),c=this.MapKeeper=function(a){return this instanceof c?void(this.maps=a):new c(a)};c.prototype={add:function(a){var b=this.maps;for(var c in a){var d=b[c];if(d){var e=a[c];d.add(e.name,e.value)}}return this},get:function(a,c){var d=this.maps,e=[];return c=c||Object.keys(d),c.forEach(function(b){var c=d[b],f=a[b];c&&f&&(e=e.concat(c.get(f)))}),b.unique(e)},getAll:function(a){var b=this.maps;return a=a||Object.keys(b),a.reduce(function(a,c){var d=b[c];return d?a.concat(d.getAll()):a},[])}}});