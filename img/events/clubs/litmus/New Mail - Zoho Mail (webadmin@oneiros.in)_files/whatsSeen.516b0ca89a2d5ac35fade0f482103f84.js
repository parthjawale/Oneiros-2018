"use strict";define([],function(a){function b(){return t.getWhatsNewSeen()}function c(a){t.setWhatsNewSeen(a)}function d(a,b){return!("null"===a||!a)&&a===b}function e(){c(q)}function f(a,b){var c=b.data||{};"NEWUI_SETTINGS_UPDATE"===c.act&&"whatsNewSeen"===c.settingsName&&d(q,c.settingsValue)&&(n.publish(p.WHATSSEEN_HIDE),s.hideWhatsNew())}function g(b){a("zmail").whatsSeen=q=b}function h(a,c){c=c||{},!c.newWhatsSeenValue||d(q,c.newWhatsSeenValue)||d(b(),c.newWhatsSeenValue)||(g(c.newWhatsSeenValue),s.showWhatsNew())}function i(){n.subscribe(p.WHATSSEEN_CLICK,e),r.addHandler("mail",f)}function j(){n.unsubscribe(p.WHATSEEN_CLICK,e),r.removeHandler("mail",f)}function k(){return!("null"===q||!q)&&!d(q,b())}function l(){i(),k()&&s.showWhatsNew()}function m(){j()}var n=a("$"),o=a("zmail.Components.WhatsSeen"),p={WHATSSEEN_CLICK:"/whatsSeen/click",WHATSSEEN_HIDE:"/whatsSeen/hide"},q=a("zmail").whatsSeen,r=a("zmComponent.notifier"),s=a("zmTopBar"),t=a("zmAdHocSettings");return o.init=l,o.getUserWhatsSeenVersion=b,o.setUserWhatsSeenVersion=c,o.updaterHandler=h,o.destroy=m,o});