"use strict";define([],function(a){var b=a("zmText"),c=b.get("captcha"),d={};return d.getCaptchaDialog=function(a){var b=null;a.incorrectCaptcha&&(b=zdom("tr",null,zdom("td",null," "),zdom("td",{className:"SC_Fred"},c.captcha.incorrectCaptcha)));var d=zdom("table",{width:"100%",cellSpacing:"0",cellPadding:"5",border:"0",align:"center"},zdom("tbody",null,zdom("tr",null,zdom("td",{colSpan:"2"})),zdom("tr",null,zdom("td",null," "),zdom("td",null,"i18nObj.captcha.enterTextInfo")),zdom("tr",null,zdom("td",null," "),zdom("td",null,"i18nObj.captcha.caseSensitiveInfo")),zdom("tr",null,zdom("td",null," "),zdom("td",null,zdom("div",null,zdom("img",{className:"SC_captcha",align:"absmiddle",height:"72px",alt:"HIP Image",title:c.captcha.imageTitle,name:"ze_hipImg"}),zdom("i",{className:"msi-refresh"})))),b,zdom("tr",null,zdom("td",null," "),zdom("td",null,zdom("input",{type:"text",style:{width:"202px"}})))));return d},window.zmscaptcha=window.zmscaptcha||{},window.zmscaptcha.views=d,d}),define([],function(a){var b,c,d=a("$"),e=a("zmText"),f=a("zmsDialog"),g=a("zmail.Utils.DOM"),h=window.zmscaptcha||{},i="",j=h.views,k=function(){var a=g.element(g.selector(".msi-refresh",g.selector("#captchapopup")),!0),c=g.element(g.selector("input",g.selector("#captchapopup")),!0);setTimeout(function(){c.focus()},550),a.on("click",function(){d.ajax(b)})},l=function(a,d,h){i=a;var l,m,n,o=Boolean(d.prevCaptchaError);g.selector("#captchapopup").length||g.mount(zdom("div",{id:"captchapopup"}),document.body),l=j.getCaptchaDialog({incorrectCaptcha:o}),g.clearHTML(g.selector("#captchapopup")),g.mount(l,g.selector("#captchapopup")),m=g.selector("img",g.selector("#captchapopup")),m.eq(0).attr("src",zmail.conPath+"/showcaptcha?digest="+i),n={title:e.get("captcha","captcha.captchaTitle"),style:{width:"300px"},buttons:[{txt:e.get("captcha","common.go"),callback:function(){c()}},{isCancel:!0,txt:e.get("captcha","common.cancel"),callback:function(){f.remove()}}],drag:!0,mask:!0,pos:"center",isCancel:!0,forceShow:!0,closeaction:h},f.create("captchapopup",n),k(),b=d};return c=function(){var a=g.element(g.selector("input",g.selector("#captchapopup")),!0),c=a.val();if(c=c.trim(),""===c)return zmUtil.succErrMsg("e",e.get("captcha","captcha.emptyCaptcha")),!1;var h=i+"="+c;f.remove(!0),i="",b.data+="&"+h,b.prevCaptchaError=!0,setTimeout(function(){d.ajax(b)},500)},h.createCaptchaDialog=l,h.resendRequest=c,h});