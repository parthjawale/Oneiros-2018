"use strict";_defineSettingsModule("Models",function(a){var b=function(a,b){return Backbone.Model.extend(a,b)},c=function(a,b){return Backbone.Collection.extend(a,b)},d=b({}),e=c({model:d});a.Events={propsChange:"change",collectionAdd:"add",collectionRemove:"remove"},a.defineModel=b,a.defineCollection=c,a.BaseModel=d,a.BaseCollection=e},"Platform"),_defineSettingsModule("EntityModel",function(a,b){var c=b("Platform.Models");a.Props=c.defineModel({}),a.State=c.defineModel({}),a.Attributes=c.defineModel({defaults:{id:""}})},"Platform.Models"),_defineSettingsModule("ComponentModel",function(a,b){var c=b("Platform.Models");a.Props=c.defineModel({}),a.State=c.defineModel({}),a.Attributes=c.defineModel({defaults:{id:"",name:"",type:""}})},"Platform.Models"),_defineSettingsModule("Base",function(a,b,c){var d=b("Platform.System.Utils"),e=b("Platform.Models.EntityModel"),f=b("Platform.Events.Base"),g=c.Class,h=function(){};h.prototype=new g,h.prototype.constructor=h,h.Events={change:"change",propsChange:"props.change",stateChange:"state.change",attributesChange:"attributes.change",exclusiveSetAdded:"exclusiveset.add",exclusiveSetRemoved:"exclusiveset.remove",managerAdded:"manager.add",managerRemoved:"manager.remove",destroyed:"destroyed"},h.validateID=function(a){a=a||"";var b=/^([a-z-]+)$/gm,c=/([-]{2,})/gm;if(!a)throw new Error("[id] value is not valid - Cannot be empty");if(b.test(a)===!1)throw new Error("[id] value is not valid - Should only contain [a-z] & [-]");if("-"===a.charAt(0)||"-"===a.charAt(a.length-1))throw new Error("[id] value is not valid - [-] are allowed only in-between");if(a.replace(c,"-").length!==a.length)throw new Error("[id] value is not valid - Consecutive [-] are not allowed")};var i=d.makePrivateMethod(function(a){a=a||{};var b=this,c=a.props||{},e=a.state||{},f=a.attributes||{},g=d.copyProperties(b.constructor.prototype._required(),{props:[],state:[],attributes:[]});g.props.forEach(function(a){if(!c.hasOwnProperty(a))throw new Error("Required prop missing: "+a)}),g.state.forEach(function(a){if(!e.hasOwnProperty(a))throw new Error("Required state missing: "+a)}),g.attributes.forEach(function(a){if(!f.hasOwnProperty(a))throw new Error("Required attribute missing: "+a)})},h),j=d.makePrivateMethod(function(a){var b=this,c=b._default();a=a||{},a.props=a.props||{},a.state=a.state||{},a.attributes=a.attributes||{},i.call(b,a),a.props=d.copyProperties(a.props,c.props),a.state=d.copyProperties(a.state,c.state),a.attributes=d.copyProperties(a.attributes,c.attributes),b.props=new e.Props(a.props),b.state=new e.State(a.state),b.attributes=new e.Attributes(a.attributes)},h),k=d.makePrivateMethod(function(){var a=this,b=a._instanceProperties();d.copyProperties(b,a)},h),l={_required:function(){return{props:[],state:[],attributes:[]}},_default:function(){return{props:{},state:{},attributes:{}}},_instanceProperties:function(){return{_defaultEventHandlers:void 0}},init:function(a){var b=this;j.call(b,a),k.call(b),b.bindEvents()},bindEvents:function(){var a=this;a.unbindEvents(),a.props.on("change",function(b){var c={instance:a,changed:d.cloneObject(b.changed),props:a.props,type:"props"};f.publishEvent(a,h.Events.propsChange,c)}),a.state.on("change",function(b){var c={instance:a,changed:d.cloneObject(b.changed),state:a.state,type:"state"};f.publishEvent(a,h.Events.stateChange,c)}),a.attributes.on("change",function(b){var c={instance:a,changed:d.cloneObject(b.changed),attributes:a.attributes,type:"attributes"};f.publishEvent(a,h.Events.attributesChange,c)});var b=[h.Events.propsChange,h.Events.stateChange,h.Events.attributesChange].join(" ");f.subscribeEvent(a,b,function(b){f.publishEvent(a,h.Events.change,b)});var c,e,g,i,j,k=a._defaultEventHandlers;if(k)for(c in k){e=k[c]||[],e.constructor!==Array&&(e=[e]);for(i in e)i=e[i],"function"==typeof i?(g=a,j=i):(g=i.source||a,"function"==typeof g&&(g=g()),j=i.handler);f.subscribeEvent(g,c,j)}},unbindEvents:function(){var a=this;a.props.off(),a.state.off(),a.attributes.off();var b=[h.Events.change,h.Events.propsChange,h.Events.stateChange,h.Events.attributesChange,h.Events.exclusiveSetAdded,h.Events.exclusiveSetRemoved,h.Events.managerAdded,h.Events.managerRemoved,h.Events.destroyed].join(" ");f.unsubscribeEvent(a,b);var c,d,e,g,i,j=a._defaultEventHandlers;if(j)for(c in j){d=j[c]||[],d.constructor!==Array&&(d=[d]);for(g in d)g=d[g],"function"==typeof g?(e=a,i=g):(e=g.source||a,"function"==typeof e&&(e=e()),i=g.handler);f.unsubscribeEvent(e,c,i)}},destroy:function(a){var b=this;a=a||{},f.publishEvent(b,h.Events.destroyed),b.unbindEvents()},getProp:function(a){var b,c=this;return b=1===arguments.length?c.props.get(a):d.cloneObject(c.props.attributes)},setProp:function(){var a,b,c,d=this,e=[],f={};1===arguments.length&&"object"===babelHelpers["typeof"](arguments[0])?(a=arguments[0],c=arguments[1]||{},e=[a,c],f=a):2===arguments.length&&"object"===babelHelpers["typeof"](arguments[0])&&"object"===babelHelpers["typeof"](arguments[1])?(a=arguments[0],c=arguments[1]||{},e=[a,c],f=a):"string"==typeof arguments[0]&&(a=arguments[0],b=arguments[1],c=arguments[2]||{},e=[a,b,c],f[a]=b),c=c||{},d.props.set.apply(d.props,e),c.triggerChange&&!d.props.hasChanged()&&(d.props.changed=f,d.props.trigger("change",d.props))},getState:function(a){var b=this;return 1===arguments.length?b.state.get(a):d.cloneObject(b.state.attributes)},setState:function(){var a,b,c,d=this,e=[],f={};1===arguments.length&&"object"===babelHelpers["typeof"](arguments[0])?(a=arguments[0],c=arguments[1]||{},e=[a,c],f=a):2===arguments.length&&"object"===babelHelpers["typeof"](arguments[0])&&"object"===babelHelpers["typeof"](arguments[1])?(a=arguments[0],c=arguments[1]||{},e=[a,c],f=a):arguments.length>1&&"string"==typeof arguments[0]&&(a=arguments[0],b=arguments[1],c=arguments[2]||{},e=[a,b,c],f[a]=b),c=c||{},d.state.set.apply(d.state,e),c.triggerChange&&!d.state.hasChanged()&&(d.state.changed=f,d.state.trigger("change",d.state))},getAttribute:function(a){var b=this;return 1===arguments.length?b.attributes.get(a):d.cloneObject(b.attributes.attributes)},setAttribute:function(){var a,b,c,d=this,e={};1===arguments.length&&"object"===babelHelpers["typeof"](arguments[0])?(a=arguments[0],c=arguments[1]||{},e=a):2===arguments.length&&"object"===babelHelpers["typeof"](arguments[0])&&"object"===babelHelpers["typeof"](arguments[1])?(a=arguments[0],c=arguments[1]||{},e=a):arguments.length>1&&"string"==typeof arguments[0]&&(a=arguments[0],b=arguments[1],c=arguments[2]||{},e[a]=b),c=c||{},d.attributes.set(a,b),c.triggerChange&&!d.attributes.hasChanged()&&(d.attributes.changed=e,d.attributes.trigger("change",d.attributes))},reset:function(){throw new Error("Not implemented")},on:function(a,b){var c=this;f.subscribeEvent(c,a,b)},off:function(a,b){var c=this;f.unsubscribeEvent(c,a,b)}};d.copyProperties(l,h.prototype),a.Entity=h},"Platform.System"),_defineSettingsModule("Models",function(a,b,c){var d=b("Platform.System.Base"),e=b("Platform.System.Utils"),f=d.Class,g=c.defineModel({defaults:{id:"",entity:null}}),h=c.defineCollection({model:g}),i=function(){};i.prototype=new f,i.prototype.constructor=i;var j={init:function(a){var b=this;if(a=a||{},b._collection=new h,"function"!=typeof a.type)throw new Error("Required property [type] missing in [opts] argument");b._class=a.type},get:function(a){var b=this,c=b._collection,d=function(b){if(b.get("id")===a)return!0},e=c.find(d);return e?e.get("entity"):null},getAll:function(){var a=this,b=a._collection,c=[];return b.each(function(a){c.push(a.get("entity"))}),c},put:function(a){var b=this,c=b._collection,d=b.get(a.getAttribute("id"));if(d)throw new Error("Entity with [id]="+a.getAttribute("id")+" exists in collection");if(!(a instanceof b._class))throw new Error("Entity not an instance of provided class type");c.add(new g({id:a.getAttribute("id"),entity:a}))},remove:function(a){var b=this,c=b._collection,d=function(b){if(b.get("id")===a)return!0},e=c.find(d);return e?(c.remove(e),e.get("entity")):null}};e.copyProperties(j,i.prototype);var k=function(a,b){b=b||{},b.type=a;var c=new i;return c.init(b),c};i.create=k,a.EntityCollectionSet=i},"Platform"),_defineSettingsModule("EntitySet",function(a,b){var c=b("Platform.Models"),d=b("Platform.System.Base"),e=b("Platform.System.Utils"),f=b("Platform.Events.Base"),g=d.Class,h=d.Entity,i=c.BaseCollection,j=function(){};j.prototype=new g,j.prototype.constructor=j,j.Events={entityAdded:"entityAdded",entityRemoved:"entityRemoved",selectionChanged:"selectionChanged"};var k=e.makePrivateMethod(function(a){var b=this,c=b._collection,d=c.find(function(b){return b.get("entity")===a});return d},j),l=e.makePrivateMethod(function(a){var b=this,c=k.call(b,a);return"undefined"!=typeof c},j),m=e.makePrivateMethod(function(a){var b=this,c=a.getState("selected");if(c){var d=b._selected;d&&d!==a&&d.setState("selected",!1),b._selected=a,f.publishEvent(b,j.Events.selectionChanged,{instance:b,selected:a})}},j),n={init:function(a){var b=this;a=a||{},b._collection=new i,b._selected=null},destroy:function(){},addEntity:function(a){var b=this,c=b._collection;if(a instanceof h&&!l.call(b,a)){c.add({entity:a}),m.call(b,a);var d=function(){m.call(b,a)};a.on(h.Events.stateChange,d),a._exclusiveSetStateChange=d,f.publishEvent(a,h.Events.exclusiveSetAdded,{exclusiveSet:b})}},removeEntity:function(a){var b=this,c=b._collection;if(a instanceof h){var d=k.call(b,a);d&&(c.remove(d),a.off(h.Events.stateChange,a._exclusiveSetStateChange),a._exclusiveSetStateChange=void 0,a===b._selected&&(b._selected=null),f.publishEvent(a,h.Events.exclusiveSetRemoved,{exclusiveSet:b}))}},on:function(a,b){var c=this;f.subscribeEvent(c,a,b)},off:function(a,b){var c=this;f.unsubscribeEvent(c,a,b)},getSelected:function(){var a=this;return a._selected},setSelected:function(a){var b=this,c=k.call(b,a);c&&a.setState("selected",!0)}};e.copyProperties(n,j.prototype),a.ExclusiveSelection=j},"Platform.Models"),_defineSettingsModule("EntitySet",function(a,b){var c=b("Platform.Models"),d=b("Platform.System.Base"),e=b("Platform.System.Utils"),f=b("Platform.Events.Base"),g=d.Class,h=d.Entity,i=c.BaseCollection,j=function(){};j.prototype=new g,j.prototype.constructor=j,j.Events={selectionChanged:"selectionChanged"};var k=e.makePrivateMethod(function(a){var b=this,c=b._collection,d=c.find(function(b){return b.get("entity")===a});return d},j),l=e.makePrivateMethod(function(a){var b=this,c=k.call(b,a);return"undefined"!=typeof c},j),m=e.makePrivateMethod(function(a){var b=this;a.getState("selected")&&f.publishEvent(b,j.Events.selectionChanged,{instance:b,selected:b.getSelected()})},j),n={init:function(a){var b=this;a=a||{},b._collection=new i},destroy:function(){},addEntity:function(a){var b=this,c=b._collection;if(a instanceof h&&!l.call(b,a)){c.add({entity:a}),m.call(b,a);var d=function(){m.call(b,a)};a.on(h.Events.stateChange,d),a._inclusiveSetStateChange=d}},removeEntity:function(a){var b=this,c=b._collection;if(a instanceof h){var d=k.call(b,a);d&&(c.remove(d),a.off(h.Events.stateChange,a._inclusiveSetStateChange),m.call(b,a))}},on:function(a,b){var c=this;f.subscribeEvent(c,a,b)},off:function(a,b){var c=this;f.unsubscribeEvent(c,a,b)},getSelected:function(){var a=this,b=a._collection,c=[];return b.each(function(a){var b=a.get("entity");b.getState("selected")&&c.push(b)}),c},setSelected:function(a,b){var c=this,d=k.call(c,a);d&&a.setState("selected",b)}};e.copyProperties(n,j.prototype),a.InclusiveSelection=j},"Platform.Models"),_defineSettingsModule("Components",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.Models"),e=b("Platform.System.Utils"),f=b("Platform.Events.Base"),g=c.Class,h=d.EntityCollectionSet,i=function(){};i.prototype=new g,i.prototype.constructor=i,i.Events={entityAdded:"entity.added",entityRemoved:"entity.removed"};var j={init:function(a){var b=this;a=a||{},b._entityType=a.entityType,b._entitySet=h.create(b._entityType),b._collection=b._entitySet._collection},create:function(){throw new Error("Abstract method")},get:function(a){var b=this;return b._entitySet.get(a)},getAll:function(){var a=this;return a._entitySet.getAll()},add:function(a){var b=this;try{b._entitySet.put(a)}catch(c){return!1}return f.publishEvent(b,i.Events.entityAdded,{entity:a}),!0},put:function(a){var b=this;return b.add(a)},remove:function(a){var b=this,c=b._entitySet.remove(a);return c&&f.publishEvent(b,i.Events.entityRemoved,{entity:c}),"undefined"!=typeof c},on:function(a,b){var c=this;f.subscribeEvent(c,a,b)},off:function(a,b){var c=this;f.unsubscribeEvent(c,a,b)},filterBy:function(a){var b=this,c=b.getAll();a=e.copyProperties(a,{props:{},state:{},attributes:{}});var d=!a.hasOwnProperty("matchAll")||a.matchAll;return c=c.filter(function(b){var c,e,f,g,h,i=b.getProp(),j=b.getState(),k=b.getAttribute(),l=!0;for(c in a.props)h=i[c],g=a.props[c],l=h===g?d?l&&!0:l||!0:d?l&&!1:l||!1;for(e in a.state)h=j[e],g=a.state[c],l=h===g?d?l&&!0:l||!0:d?l&&!1:l||!1;for(f in a.attributes)h=k[f],g=a.attributes[f],l=h===g?d?l&&!0:l||!0:d?l&&!1:l||!1;return l})}};e.copyProperties(j,i.prototype),a.EntityManager=i},"Platform"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=c.Entity,f=function(){};f.prototype=new e,f.prototype.constructor=f;var g={_default:function(){return{props:{iconImage:""},state:{hidden:!1,disabled:!1,selected:!1},attributes:{"default":!1}}},_required:function(){return{props:["title"],attributes:["id"]}},init:function(a){var b=this;a=a||{},e.prototype.init.call(b,a);var c=b.getAttribute("id");e.validateID(c)}};d.copyProperties(g,f.prototype),a.Category=f},"Platform"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=c.Entity,f=function(){};f.prototype=new e,f.prototype.constructor=f;var g={_required:function(){return{props:["transformer"],attributes:["id"]}},init:function(a){var b=this;a=a||{},e.prototype.init.call(b,a);var c=b.getAttribute("id");e.validateID(c)},transform:function(){var a=this,b=a.getProp("transformer");if("function"!=typeof b)throw new Error("[transformer] should be a function");return b.apply(a,arguments)}};d.copyProperties(g,f.prototype);var h=function(a){try{return a instanceof f}catch(b){return!1}};f.isDataTransformerInstance=h,a.DataTransformer=f},"Platform"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=c.Entity,f=function(){};f.prototype=new e,f.prototype.constructor=f;var g={_required:function(){return{props:["errors","fetch","save"],attributes:["id"]}},init:function(a){var b=this;a=a||{},e.prototype.init.call(b,a);var c=b.getProp("errors");if("object"!==("undefined"==typeof c?"undefined":babelHelpers["typeof"](c))&&"function"!=typeof c)throw new Error("[errors] property is not valid");var d=b.getProp("fetch");if("function"!=typeof d)throw new Error("[fetch] property is not valid");var f=b.getProp("save");if("function"!=typeof f)throw new Error("[save] property is not valid");var g=b.getAttribute("id");e.validateID(g)},fetch:function(a){var b=this;a=a||{};var c=b.getProp("fetch"),e=b.getProp("errors"),f=d.makeDeferred();"function"!=typeof e&&(e=function(a){return e[a]});var g=c(a);if(!d.isPromise(g))throw new Error("[fetch] function did not return a valid promise");return g.done(function(a){f.resolve(a)}),g.fail(function(a){if(arguments.length<1)throw new Error("[fetch] promise.fail() did not return a valid errCode");f.reject({code:a,message:e(a)})}),f.promise()},save:function(a,b){var c=this;b=b||{};var e=c.getProp("save"),f=c.getProp("errors"),g=d.makeDeferred();"function"!=typeof f&&(f=function(a){return f[a]});var h=e(a,b);if(!d.isPromise(h)&&!d.isNativePromise(h))throw new Error("[save] function did not return a valid promise");return h.then(function(){g.resolve()},function(a){if(arguments.length<1)throw new Error("[save] promise.fail() did not return a valid errCode");g.reject({code:a,message:f(a)})}),g.promise()}};d.copyProperties(g,f.prototype);var h=function(a){try{return a instanceof f}catch(b){return!1}};f.isPersisterInstance=h,a.Persister=f},"Platform"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=c.Entity,f=function(){};f.prototype=new e,f.prototype.constructor=f;var g={_instanceProperties:function(){return{_openAction:null}},_default:function(){return{props:{title:"",selectable:!1,linkedPage:null,linkedPageSection:null},state:{selected:!1},attributes:{id:null,section:null}}},_required:function(){return{props:["title"],attributes:["id"]}},init:function(a){var b=this;a=a||{},e.prototype.init.call(b,a);var c=b.getAttribute("id");e.validateID(c)}};d.copyProperties(g,f.prototype),a.QuickNavigatorItem=f},"Platform"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=c.Entity,f=function(){};f.prototype=new e,f.prototype.constructor=f;var g={_default:function(){return{props:{title:""},state:{selected:!1},attributes:{id:null}}},_required:function(){return{props:["title"],attributes:["id"]}},init:function(a){var b=this;a=a||{},e.prototype.init.call(b,a);var c=b.getAttribute("id");e.validateID(c)}};d.copyProperties(g,f.prototype),a.QuickNavigatorSection=f},"Platform"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=c.Entity,f=function(){};f.prototype=new e,f.prototype.constructor=f;var g={_required:function(){return{props:["errors","validator"],attributes:["id"]}},init:function(a){var b=this;a=a||{},e.prototype.init.call(b,a);var c=b.getProp("errors");if("object"!==("undefined"==typeof c?"undefined":babelHelpers["typeof"](c))&&"function"!=typeof c)throw new Error("[errors] property is not valid");var d=b.getProp("validator");if("function"!=typeof d)throw new Error("[validator] property is not valid");var f=b.getAttribute("id");e.validateID(f)},validate:function(a,b){var c=this;b=b||{};var d=c.getProp("validator"),e=d(a,b);if(!e)throw new Error("[validator] result is invalid");if(!e.hasOwnProperty("valid"))throw new Error("[validator] result is invalid. No [valid] property found");var f=e.valid;if(!f&&!e.hasOwnProperty("errCode"))throw new Error("[validator] result is invalid. No [errCode] property found");var g;if(!f&&(g=e.errCode,!g||"number"!=typeof g))throw new Error("[validator] result is invalid. [errCode] should be a number");if(e={valid:f},!f){var h,i=c.getProp("errors");h="function"==typeof i?i(g):i[g],e.error={code:g,message:h}}return e}};d.copyProperties(g,f.prototype);var h=function(a){try{return a instanceof f}catch(b){return!1}};f.isValidatorInstance=h,a.Validator=f},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.Entities"),e=b("Platform.System.Utils"),f=d.Validator,g=c.EntityManager,h=function(){};h.prototype=new g,h.prototype.constructor=h;var i={init:function(a){var b=this;a=a||{},a.entityType=f,g.prototype.init.call(b,a)},create:function(a,b){var c=this,d=new f;return d.init({props:{errors:b.errors,validator:b.validator},attributes:{id:a}}),c.put(d),d}};e.copyProperties(i,h.prototype);var j=new h;j.init(),c.ValidatorManager=j},"Platform"),_defineSettingsModule("Basic",function(a,b){var c=b("Platform.Components"),d=c.ValidatorManager,e=zmText.get("zm-settings-platform","basicValidators.errors"),f=d.create("basic-range",{errors:{1:e.belowMinRange,2:e.aboveMaxRange},validator:function(a,b){var c={valid:!1,errCode:-1};if(b=b||{},!b.hasOwnProperty("max")&&!b.hasOwnProperty("min"))throw new Error("RangeValidator requires range [max], [min] in [opts] arguments");var d=b.max,e=b.min;return a<e?c.errCode=1:a>d?c.errCode=2:c.valid=!0,c}}),g=d.create("basic-optionset",{errors:{1:e.notInOptionsSet},validator:function(a,b){var c={valid:!1,errCode:-1};b=b||{};var d=b.options;if("function"==typeof d&&(d=d()),!d||d.constructor!==Array)throw new Error("OptionSetValidator required list of [options] in [opts] arguments");var e=d.indexOf(a);return e!==-1?c.valid=!0:c.errCode=1,c}});a.RangeValidator=f,a.OptionSetValidator=g},"Platform.Validators"),_defineSettingsModule("Types",function(a,b){var c=b("Platform.Components"),d=c.ValidatorManager,e=zmText.get("zm-settings-platform","typeValidators.errors"),f=d.create("type-number",{errors:{1:e.notNumber},validator:function(a,b){var c={valid:!1,errCode:-1};return b=b||{},"number"!=typeof a?c.errCode=1:c.valid=!0,c}});a.NumberValidator=f},"Platform.Validators"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=b("Platform.Entities"),f=b("Platform.Components"),g=c.Entity,h=e.Validator,i=e.Persister,j=f.ValidatorManager,k=function(){};k.prototype=new g,k.prototype.constructor=k;var l={_default:function(){return{props:{defaultValue:"",value:void 0},state:{initialized:!1,initializing:!1,disabled:!1,hidden:!1,fetching:!1,saving:!1},attributes:{category:null}}},_required:function(){return{props:["defaultValue"],attributes:["id"]}},_instanceProperties:function(){return{_validations:[],_persister:null,_compareValue:null}},init:function(a){var b=this;a=a||{},b._validations=[],b._persister=null,g.prototype.init.call(b,a);var c=b.getAttribute("id");g.validateID(c),a.props&&a.props.hasOwnProperty("value")&&b.set(a.props.value)},initialize:function(a){var b=this;a=a||{};var c=a.value;if(a.reInit===!0&&b.setState({initialized:!1}),b.getState("initialized"))return!0;b.setState({initializing:!0});var e,f=b._persister,g=function(a){var c=!1;"undefined"==typeof a&&(a=b.getProp("defaultValue"));var d=b.set(a,{noSave:!0});return d.valid&&(b.setState({initialized:!0}),c=!0),b.setState({initializing:!1}),c},h=function(a){a=a||{},d.debugLog("initialize.fetch failed for setting",b,a)};return!a.hasOwnProperty("value")&&f?(b.setState({fetching:!0}),e=f.fetch(),e.done(g),e.fail(h),e.always(function(){b.setState({fetching:!1})}),e):g(c)},get:function(){var a=this,b=a.getState("initialized");return b?a.getProp("value"):a.getProp("defaultValue")},set:function(a,b){var c=this,e=c.validate(a);b=b||{};var f,g,h=c._persister,i=!1;return e.valid?(g=c.get(),c.setProp({value:a}),e.success=!0):e.success=!1,i="function"==typeof c._compareValue?0!==c._compareValue(a,g):a!==g,i&&e.success===!0&&h&&!b.noSave&&c.getState("initialized")&&(c.setState({saving:!0}),f=h.save(a,b),f.fail(function(a){d.debugLog("set.save failed for setting",c,a),b.revertOnFail&&c.setProp({value:g})}),f.always(function(){c.setState({saving:!1})}),e.promise=f),e},validate:function(a){var b=this;arguments.length<1&&(a=b.getProp("value"));var c=b._validations;c=c||[];var d,e,f,g,h,i=function(a){return function(){return a.validate.apply(d,arguments)}};for(var j in c){if(d=c[j],g=d.opts,d=d.validator,f=i(d),e=f(a,g)||{},!e.hasOwnProperty("valid"))throw new Error("Validator returned invalid format result");if(e.valid===!1){if(!e.hasOwnProperty("error"))throw new Error("Validator returned invalid format result");if(h=e.error,!h||!h.hasOwnProperty("code")||!h.hasOwnProperty("message"))throw new Error("Validator returned invalid format result")}if(e.valid===!1)return e}return{valid:!0}},getPersister:function(){var a=this;return a._persister},setPersister:function(a){var b=this;if(!(a instanceof i)&&null!==a)throw new Error("Invalid persister argument");b._persister=a},addValidator:function(a,b){var c=this;"string"==typeof a&&(a=j.get(a)),a instanceof h?c._validations.push({validator:a,opts:b}):d.debugLog("addValidator: Invalid validator provided")},removeValidator:function(a){var b=this;if(a instanceof h){var c=-1;b._validations.filter(function(b,d){return b.validation===a&&(c=d),!0}),c!==-1&&b._validations.splice(c,1)}else d.debugLog("removeValidator: Invalid validator provided")}};d.copyProperties(l,k.prototype),a.Setting=k},"Platform"),_defineSettingsModule("Entities",function(a,b,c){var d=b("Platform.System.Utils"),e=b("Platform.Validators.Basic"),f=c.Setting,g=e.OptionSetValidator,h=function(){};h.prototype=new f,h.prototype.constructor=h;var i={init:function(a){var b=this;a=a||{},f.prototype.init.call(b,a),b.addValidator(g,{options:[!0,!1]})}};d.copyProperties(i,h.prototype),a.BooleanSetting=h},"Platform"),_defineSettingsModule("Entities",function(a,b,c){var d=b("Platform.System.Utils"),e=b("Platform.Validators.Basic"),f=c.Setting,g=e.OptionSetValidator,h=function(){};h.prototype=new f,h.prototype.constructor=h;var i={_default:function(){var a,b=this;return a=f.prototype._default.call(b),a=d.copyProperties(a,{props:{options:[]}},!0)},_required:function(){var a,b=this;return a=f.prototype._required.call(b),a.props.push("options"),a},init:function(a){var b=this;a=a||{},f.prototype.init.call(b,a),b.addValidator(g,{options:function(){return b.getProp("options")||[]}})}};d.copyProperties(i,h.prototype),a.OptionSetting=h},"Platform"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=c.Entity,f=function(){};f.prototype=new e,f.prototype.constructor=f;var g={_default:function(){return{props:{openable:!1,title:"",displayOrder:"auto",loadFrameworkOnCommandExecution:!0,addToSearch:!0},state:{hidden:!1,disabled:!1},attributes:{category:null}}},_required:function(){return{props:["title"],attributes:["id"]}},init:function(a){var b=this;a=a||{},e.prototype.init.call(b,a);var c=b.getAttribute("id");e.validateID(c)}};d.copyProperties(g,f.prototype),a.SettingCard=f},"Platform"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=c.Entity,f=function(){};f.prototype=new e,f.prototype.constructor=f;var g={_default:function(){return{props:{displayOrder:"auto",addToSearch:!0,loadFrameworkOnCommandExecution:!0,showInBreadCrumb:!1,showListCards:{}},attributes:{card:null}}},_required:function(){return{props:["title"],attributes:["id","type"]}},init:function(a){var b=this;a=a||{},e.prototype.init.call(b,a);var c=b.getAttribute("id");e.validateID(c)}};d.copyProperties(g,f.prototype);var h=function(a){try{return a instanceof f}catch(b){return!1}};f.isSettingCardItemInstance=h,f.Types={Label:"label",Action:"action",LabelValue:"label-value",LabelAction:"label-action",RollingText:"rolling-text",colorDom:"color-dom"},a.SettingCardItem=f},"Platform"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=c.Entity,f={Basic:"pt-basic",Title:"pt-title",TitleToggleSwitch:"pt-title-toggleswitch",TitleChoiceMenu:"pt-title-choicemenu",PageAlone:"pt-page-alone"},g=function(){};g.prototype=new e,g.prototype.constructor=g;var h={_default:function(){return{props:{title:"",showTitle:!1,toggleSwitchActive:!1,toggleSwitchFlex:!1,toggleSwitchOnText:"",toggleSwitchOffText:"",choiceItems:[],currentChoice:null,openPageAction:null,focusedSection:null},state:{active:!1},attributes:{type:f.Basic,appContainer:!1,pageCSSClass:"",pageClassNames:null,headerClassNames:null,containerClassNames:null,id:"",category:null,card:null,defaultPageName:null,activeCardItem:null,pageCSSClassName:null,mode:"",pageCategory:"",showActionable:!1}}},_required:function(){return{attributes:["id"]}},init:function(a){var b=this;a=a||{},e.prototype.init.call(b,a);var c=b.getAttribute("id");e.validateID(c)},isActive:function(){var a=this;return a.getState("active")},onComponentCreate:function(a){var b=this;"function"==typeof b._onComponentCreate&&b._onComponentCreate(a)},onFocusSection:function(a){var b=this;return"function"==typeof b._onFocusSection&&b._onFocusSection(a)}};d.copyProperties(h,g.prototype),g.Types=f,a.SettingPage=g},"Platform"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=c.Entity,f={Basic:"pst-basic",Title:"pst-title",TitleToggleSwitch:"pst-title-toggleswitch",PageAlone:"pst-page-alone"},g=function(){};g.prototype=new e,g.prototype.constructor=g;var h={_default:function(){return{props:{title:"",toggleSwitchActive:!1,toggleSwitchOnText:"",toggleSwitchOffText:"",showLoader:!1},state:{disabled:!1},attributes:{page:null,type:f.Basic,appContainer:!1}}},_required:function(){return{attributes:["id"]}},init:function(a){var b=this;a=a||{},e.prototype.init.call(b,a);var c=b.getAttribute("id");e.validateID(c)},isActive:function(){var a=this,c=a.getState(),d=a.getAttribute(),e=b("Platform.Components.SettingPageManager"),f=e.get(d.settingPage);return!(!f.isActive()||c.disabled)}};d.copyProperties(h,g.prototype),g.Types=f,a.SettingPageSection=g},"Platform"),_defineSettingsModule("Entities",function(a,b){var c=b("Platform.System.Base"),d=b("Platform.System.Utils"),e=b("Platform.Events.Base"),f=c.Entity,g=function(){};g.prototype=new f,g.prototype.constructor=g,g.Events={viewUpdated:"view.updated"};var h={_default:function(){return{props:{reactInstance:null},state:{initialized:!1,active:!1,viewMounted:!1},attributes:{id:null,page:null,pageSection:null,isReactApp:!1}}},_required:function(){return{attributes:["id"]}},init:function(a){var b=this;a=a||{},f.prototype.init.call(b,a);var c=b.getAttribute("id");f.validateID(c)},destroy:function(a){var b=this;a=a||{},b.uninitialize(a),f.prototype.destroy.call(b,a)},initialize:function(a){var b,c=this;d.debugLog("[app] initialize invoked on app",c.getAttribute("id"));try{b=c._initialize(a)}catch(e){b=!1,d.debugLog("Error in initializing app",e)}var f=function(){c.setState({initialized:!0})};return d.isPromise(b)?b.done(f):d.isNativePromise(b)?b.then(f):b&&f(),b},uninitialize:function(a){var b,c=this;d.debugLog("[app] uninitialize invoked on app",c.getAttribute("id"));try{b=c._uninitialize(a)}catch(e){b=!1,d.debugLog("Error in uninitializing app",e)}var f=function(){c.setState({initialized:!1})};return d.isPromise(b)?b.done(f):b&&f(),b},getView:function(){var a,b=this;d.debugLog("[app] getView invoked on app",b.getAttribute("id"));try{a=b._getView()}catch(c){a=null,d.debugLog("Error in acquiring view for app",c)}return a},triggerViewUpdate:function(a){var b=this;a=a||{},b.setState({viewUpdating:!0}),e.publishEvent(b,g.Events.viewUpdated,a),b.setState({viewUpdating:!1})},requestPreviewCard:function(a){a=a||{};var c=b("MailSuite.App.Core.Framework");return c.requestPreviewCard(a)},handleContainerEvent:function(a,b){var c,e=this;d.debugLog("[app] handleContainerEvent invoked on app",e.getAttribute("id"),a,b);try{c=e._handleContainerEvent(a,b)}catch(f){c=null,d.debugLog("Error in handleContainerEvent invocation",f)}return c}};d.copyProperties(h,g.prototype),a.SettingApp=g},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.Models"),e=b("Platform.Entities"),f=b("Platform.System.Base"),g=b("Platform.System.Utils"),h=b("Platform.Events.Base"),i=f.Entity,j=e.Category,k=c.EntityManager,l=d.EntitySet.ExclusiveSelection,m=function(){};m.prototype=new k,m.prototype.constructor=m,m.Events={categorySelected:"categorySelected",categoryAdded:"categoryAdded",categoryRemoved:"categoryRemoved"};var n={init:function(a){var b,c=this;a=a||{},a.entityType=j,k.prototype.init.call(c,a),c._exclusiveSet=new l,b=c._exclusiveSet,b.init();var d=l.Events.selectionChanged;b.on(d,function(a){h.publishEvent(c,m.Events.categorySelected,a)})},add:function(a){var b=this,c=b._exclusiveSet,d=k.prototype.add.call(b,a);d&&(c.addEntity(a),h.publishEvent(b,m.Events.categoryAdded,{category:a}),h.publishEvent(a,i.Events.managerAdded,{manager:b}))},remove:function(a){var b=this,c=b._exclusiveSet,d=b.get(a),e=k.prototype.remove.call(b,a);e&&(c.removeEntity(d),d&&(h.publishEvent(b,m.Events.categoryRemoved,{category:d}),h.publishEvent(d,i.Events.managerRemoved,{manager:b})))},getDefault:function(){var a=this,b=a.getAll(),c=g.findInArray(b,function(a){return a.getAttribute("default")===!0});return c?c.getAttribute("id"):null},getSelected:function(){var a=this,b=a._exclusiveSet,c=b.getSelected();return c?c.getAttribute("id"):null},setSelected:function(a){var b=this,c=b._exclusiveSet,d=b.get(a);return!!d&&c.setSelected(d)},create:function(a,b){var c=this;b=g.copyProperties(b,{attributes:{id:a}},!0);var d=new j;return d.init(b),c.put(d),d}};g.copyProperties(n,m.prototype);
var o=new m;o.init(),o.Events=m.Events,a.CategoryManager=o},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.Entities"),e=b("Platform.System.Utils"),f=d.DataTransformer,g=c.EntityManager,h=function(){};h.prototype=new g,h.prototype.constructor=h;var i={init:function(a){var b=this;a=a||{},a.entityType=f,g.prototype.init.call(b,a)},create:function(a,b){var c=this,d=new f;return d.init({props:{transformer:b.transformer},attributes:{id:a}}),c.put(d),d},transform:function(a,b,c){var d=this,e=d.get(a);if(!f.isDataTransformerInstance(e))throw new Error("No transformer found with given id "+a);return e.getProp("transformer").apply(e,[b,c])}};e.copyProperties(i,h.prototype);var j=new h;j.init(),a.DataTransformerManager=j},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.Entities"),e=b("Platform.System.Utils"),f=d.Persister,g=c.EntityManager,h=function(){};h.prototype=new g,h.prototype.constructor=h;var i={init:function(a){var b=this;a=a||{},a.entityType=f,g.prototype.init.call(b,a)},create:function(a,b){var d=this,e=new f;if(e.init({props:{errors:b.errors,fetch:b.fetch,save:b.save},attributes:{id:a}}),b.settingId){var g=c.SettingManager;g.setPersister(b.settingId,e)}return d.put(e),e}};e.copyProperties(i,h.prototype);var j=new h;j.init(),a.PersisterManager=j},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.Models"),e=b("Platform.Entities"),f=b("Platform.System.Utils"),g=e.QuickNavigatorItem,h=c.EntityManager,i=d.EntitySet.ExclusiveSelection,j=function(){};j.prototype=new h,j.prototype.constructor=j;var k={init:function(a){var b,c=this;a=a||{},a.entityType=g,h.prototype.init.call(c,a),c._exclusiveSet=new i,b=c._exclusiveSet,b.init()},add:function(a){var b=this,c=b._exclusiveSet,d=h.prototype.add.call(b,a);d&&c.addEntity(a)},remove:function(a){var b=this,c=b._exclusiveSet,d=b.get(a),e=h.prototype.remove.call(b,a);e&&c.removeEntity(d)},getSelected:function(){var a=this,b=a._exclusiveSet,c=b.getSelected();return c?c.getAttribute("id"):null},setSelected:function(a){var b=this,c=b._exclusiveSet,d=b.get(a);return!!d&&c.setSelected(d)},create:function(a,b){var c=this;b=f.copyProperties(b,{attributes:{id:a}},!0);var d=new g(b);return d.init(b),"function"==typeof b.openAction&&(d._openAction=b.openAction),c.put(d),d},getAllBySection:function(a){var b=this;return b.filterBy({attributes:{section:a}})}};f.copyProperties(k,j.prototype);var l=new j;l.init(),a.QuickNavigatorItemManager=l},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.Models"),e=b("Platform.Entities"),f=b("Platform.System.Utils"),g=e.QuickNavigatorSection,h=c.EntityManager,i=d.EntitySet.ExclusiveSelection,j=function(){};j.prototype=new h,j.prototype.constructor=j;var k={init:function(a){var b=this;a=a||{};var c;a.entityType=g,h.prototype.init.call(b,a),b._exclusiveSet=new i,c=b._exclusiveSet,c.init()},add:function(a){var b=this,c=b._exclusiveSet,d=h.prototype.add.call(b,a);d&&c.addEntity(a)},remove:function(a){var b=this,c=b._exclusiveSet,d=b.get(a),e=h.prototype.remove.call(b,a);e&&c.removeEntity(d)},getSelected:function(){var a=this,b=a._exclusiveSet,c=b.getSelected();return c?c.getAttribute("id"):null},setSelected:function(a){var b=this,c=b._exclusiveSet,d=b.get(a);return!!d&&c.setSelected(d)},create:function(a,b){var c=this;b=f.copyProperties(b,{attributes:{id:a}},!0);var d=new g;return d.init(b),c.put(d),d}};f.copyProperties(k,j.prototype);var l=new j;l.init(),a.QuickNavigatorSectionManager=l},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.System.Base"),e=b("Platform.Entities"),f=b("Platform.System.Utils"),g=e.SettingCardItem,h=c.EntityManager,i=c.DataTransformerManager,j=d.Entity,k=e.DataTransformer,l=function(a,b){var d=a.getProp(),e=a.getAttribute(),f=b.searchCommand||{},g=c.SettingCardManager.get(e.card),h=g.getProp();f.title=f.title||d.title,f.triggerCommand=f.triggerCommand||"card-command-"+e.card,f.callback=f.callback||function(){a._primaryAction()};var i=(b.searchCommand||d.addToSearch&&h.addToSearch)&&f.title.trim().length>0&&"function"==typeof a._primaryAction;if(i){var j=zmail.Settings.Platform.Commands,k=!0;f.hasOwnProperty("isSearchable")&&(k=f.isSearchable),j.register([{command:"carditem-command-"+e.id,title:f.title,executeDependentCommands:!1,on:f.triggerCommand,base:f.triggerCommand,isSearchable:k,callback:function(){var a=this;f.callback.call(a)}}])}},m=function(a,b){var d=a.getProp(),e=a.getAttribute(),f=c.SettingCardManager.get(e.card).getProp(),g=b.searchCommand||f.addToSearch&&d.addToSearch;if(g){var h=b.searchCommand||{},i=h.callback||function(){a._primaryAction()};zmail.Commander.register({name:"settings-card-item-command-"+e.id,description:h.title||d.title,group:[h.triggerCommand||"","settings"+e.card],action:function(){return d.loadFrameworkOnCommandExecution?this.execute("load-settings").then(i):i()}})}},n=function(){};n.prototype=new h,n.prototype.constructor=n;var o={init:function(a){var b=this;a=a||{},a.entityType=g,h.prototype.init.call(b,a)},create:function(a,b){var c=this;b=f.copyProperties(b,{attributes:{id:a}},!0);var d=new g;d.init(b);var e;return"string"==typeof b.transformer?e=i.get(b.transformer):k.isDataTransformerInstance(b.transformer)?e=b.transformer:"function"==typeof b.transformer&&(e=i.create(a,b)),e&&(d._transformer=e),b.primaryAction&&(d._primaryAction=b.primaryAction),b.secondaryAction&&(d._secondaryAction=b.secondaryAction),c.put(d),l(d,b),m(d,b),d},bindSetting:function(a,b){var c=this,d=b.getProp();d.value=b.get(),a._transformer&&(d=a._transformer.transform("props",d)),a.setProp(d),c.bindSettingEvents(a,b)},unbindSetting:function(a,b){var c=this;c.unbindSettingEvents(a,b)},bindSettingEvents:function(a,b){var c=j.Events;a._onSettingPropsChange=function(b){b=b||{};var c=b.changed||{};a._transformer&&(c=a._transformer.transform("props",c)),a.setProp(c)},b.on(c.propsChange,a._onSettingPropsChange)},unbindSettingEvents:function(a,b){var c=j.Events;b.off(c.propsChange,a._onSettingPropsChange),a._onSettingPropsChange=void 0},getAllByCard:function(a){var b=this;return b.filterBy({attributes:{card:a}})}};f.copyProperties(o,n.prototype);var p=new n;p.init(),p.CardItemActions={OpenPageAction:function(a,c){return function(){c=c||{};var d=b("MailSuite.App.Core.Framework");return d.requestShowPage(a,c)}}},a.SettingCardItemManager=p},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.Entities"),e=b("Platform.System.Base"),f=b("Platform.System.Utils"),g=b("Platform.Events.Base"),h=d.SettingCard,i=c.EntityManager,j=e.Entity,k=zmText.get("zm-settings-platform","components.cardManager"),l=function(a,b){var c=a.getProp(),d=a.getAttribute(),e=b.searchCommand||{};e.title=e.title||c.title,e.triggerCommand=e.triggerCommand||"goto",e.callback=e.callback||function(){a._openAction()};var f=(b.searchCommand||c.addToSearch)&&e.title.trim().length>0&&"function"==typeof e.callback;if(f){var g=zmail.Settings.Platform.Commands,h=zmail.Settings.SearchCommandIntegrator;g.register([{command:"card-command-goto-"+d.id,title:e.title,executeDependentCommands:!1,on:["goto"],isSearchable:!1,callback:function(){a._openAction()}}]),g.register([{command:"card-command-"+d.id,title:e.title,executeDependentCommands:!1,callback:function(){var a=this,b=a.getDependentCommands()||[];b.length?(b.unshift({command:"card-command-goto-"+d.id,title:k.labels.gotoPage}),h.showAutoFill(b)):e.callback.call(a)}}])}},m=function(){};m.prototype=new i,m.prototype.constructor=m;var n={init:function(a){var b=this;a=a||{},a.entityType=h,i.prototype.init.call(b,a)},create:function(a,b){var c=this;b=f.copyProperties(b,{attributes:{id:a}},!0);var d=new h;return d.init(b),c.put(d),b.openAction&&(d._openAction=b.openAction),l(d,b),d},bindEvents:function(){var a=this;i.prototype.bindEvents.call(a),a.on(i.Events.entityAdded,function(b){b=b||{};var c=b.entity;g.publishEvent(c,j.Events.managerAdded,{manager:a})}),a.on(i.Events.entityRemoved,function(b){b=b||{};var c=b.entity;g.publishEvent(c,j.Events.managerRemoved,{manager:a})})},unbindEvents:function(){var a=this;i.prototype.unbindEvents.call(a),a.off(i.Events.entityAdded),a.off(i.Events.entityRemoved)},getAllByCategory:function(a){var b=this;return b.filterBy({attributes:{category:a}})}};f.copyProperties(n,m.prototype);var o=new m;o.init(),o.CardActions={OpenPageAction:function(a,c){return function(){c=c||{};var d=b("MailSuite.App.Core.Framework");return d.requestShowPage(a,c)}}},a.SettingCardManager=o},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.Entities"),e=b("Platform.System.Utils"),f=d.Setting,g=d.BooleanSetting,h=d.OptionSetting,i=c.EntityManager,j=d.Validator,k={"boolean":"boolean",option:"option"},l=function(){};l.prototype=new i,l.prototype.constructor=l;var m={init:function(a){var b=this;a=a||{},a.entityType=f,i.prototype.init.call(b,a)},create:function(a,b){var i=this;b=e.copyProperties(b,{attributes:{id:a}},!0);var l=null;if(l=b.type===k.option?new h:b.type===k["boolean"]?new g:new f,l.init(b),i.put(l),b.persister){var m,n=d.Persister,o=c.PersisterManager;"string"==typeof b.persister?m=o.get(b.persister):n.isPersisterInstance(b.persister)?m=b.persister:"object"===babelHelpers["typeof"](b.persister)&&(m=o.create(a,b.persister)),m&&l.setPersister(m)}if("function"==typeof b.compareValue&&(l._compareValue=b.compareValue),b.validations){var p=b.validations;p&&p.constructor!==Array&&(p=[p]),p.forEach(function(a){j.isValidatorInstance(a)?l.addValidator(a):l.addValidator(a.validator,a.opts)})}if(b.category){var q,r=d.Category,s=c.CategoryManager;"string"==typeof b.category?q=s.get(b.category):r.isCategoryInstance(b.category)&&(q=b.category),q&&l.setAttribute({category:q.getAttribute("id")})}if(b.cardItem){var t,u=d.SettingCardItem,v=c.SettingCardItemManager;"string"==typeof b.cardItem?t=v.get(b.cardItem):u.isSettingCardItemInstance(b.cardItem)?t=b.cardItem:"object"===babelHelpers["typeof"](b.cardItem)&&(t=v.create(a,b.cardItem)),t&&v.bindSetting(t,l)}return l},getAllByCategory:function(a){var b=this,c=b.getAll();return c.filter(function(b){return b.getAttribute("category")===a})}};e.copyProperties(m,l.prototype);var n=new l;n.init(),n.Types=k,a.SettingManager=n},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.Entities"),e=b("Platform.System.Utils"),f=d.SettingPage,g=c.EntityManager,h=function(){};h.prototype=new g,h.prototype.constructor=h;var i={init:function(a){var b=this;a=a||{},a.entityType=f,g.prototype.init.call(b,a)},create:function(a,b){var c=this;b=e.copyProperties(b,{attributes:{id:a}},!0);var d=new f;return d.init(b),c.put(d),"function"==typeof b.onComponentCreate&&(d._onComponentCreate=b.onComponentCreate),"function"==typeof b.onFocusSection&&(d._onFocusSection=b.onFocusSection),d}};e.copyProperties(i,h.prototype);var j=new h;j.init(),a.SettingPageManager=j},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.Entities"),e=b("Platform.System.Utils"),f=d.SettingPageSection,g=c.EntityManager,h=function(){};h.prototype=new g,h.prototype.constructor=h;var i={init:function(a){var b=this;a=a||{},a.entityType=f,g.prototype.init.call(b,a)},create:function(a,b){var d=this;b=e.copyProperties(b,{attributes:{id:a}},!0);var g=new f;return g.init(b),b.quickNavigation&&c.QuickNavigatorItemManager.create(a,b.quickNavigation),d.put(g),g},getAllByPage:function(a){var b=this;return b.filterBy({attributes:{page:a}})}};e.copyProperties(i,h.prototype);var j=new h;j.init(),a.SettingPageSectionManager=j},"Platform"),_defineSettingsModule("Components",function(a,b,c){var d=b("Platform.Entities"),e=b("Platform.System.Base"),f=b("Platform.System.Utils"),g=e.Entity,h=g.Events,i=d.SettingApp,j=c.EntityManager,k=function(){};k.prototype=new j,k.prototype.constructor=k;var l={init:function(a){var b=this;a=a||{},a.entityType=i,j.prototype.init.call(b,a)},create:function(a,b){var d,e,g=this,j=c.SettingPageManager,k=c.SettingPageSectionManager;if(b=f.copyProperties(b,{attributes:{id:a}},!0),b.attributes.page&&b.attributes.pageSection)throw new Error("Only [page] or [pageSection] is allowed");var l=new i;return l.init(b),"function"==typeof b.initialize&&(l._initialize=b.initialize),"function"==typeof b.uninitialize&&(l._uninitialize=b.uninitialize),"function"==typeof b.getView&&(l._getView=b.getView),"function"==typeof b.handleContainerEvent&&(l._handleContainerEvent=b.handleContainerEvent),b.attributes.page?d=j.get(b.attributes.page):(e=k.get(b.attributes.pageSection),d=j.get(e.getAttribute("page"))),d.on(h.stateChange,function(a){a=a||{};var b=a.changed||{};if(b.hasOwnProperty("active")){var c=d.getState("active"),e=l.getState();l.setState({active:c&&e.initialized&&e.viewMounted})}}),l.on(h.stateChange,function(a){a=a||{};var b=a.changed||{},c=l.getState(),e=d.getState("active");b.hasOwnProperty("active")?l.handleContainerEvent(c.active?"active":"inactive",{}):(b.hasOwnProperty("initialized")||b.hasOwnProperty("viewMounted"))&&l.setState({active:e&&c.initialized&&c.viewMounted})}),g.put(l),l},getAppForPage:function(a){var b=this;if(!a)return null;var c=b.getAll();return c=c.filter(function(b){return b.getAttribute("page")===a}),c[0]||null},getAppForPageSection:function(a){var b=this;if(!a)return null;var c=b.getAll();return c=c.filter(function(b){return b.getAttribute("pageSection")===a}),c[0]||null}};f.copyProperties(l,k.prototype);var m=new k;m.init(),a.SettingAppManager=m},"Platform"),_defineSettingsModule("Commands",function(a,b,c){var d=function(a){a=a||{},this.map={},this.names=[]};d.prototype={add:function(a,b){var c,d=this.map;return a in d?c=d[a]:(c=[],d[a]=c,this.names.push(a),this.names.sort()),c.push(b),this},_remove:function(a){delete this.map[a];var b=this.names.indexOf(a);b>=-1&&this.names.splice(b,0)},remove:function(a,b){var c,d=this.map,e=d[a];return e&&e.length&&(c=e.indexOf(b),c>=-1&&(e.splice(c,0),this._remove(a))),this},get:function(a){var b=this.map,c=[],d=_(this.names).filter(function(b){return b.indexOf(a)!==-1});return d.length>0&&_(d).each(function(a){c=c.concat(_(b[a]).map(function(b){return{title:a,command:b}}))}),c}},c.SortedMap=d},"Platform"),_defineSettingsModule("Commands",function(a,b,c){var d={},e={},f=new c.SortedMap,g=new c.SortedMap,h=function(a){if(!(a&&a.command&&a.callback&&a.title))throw new Error("define commands in proper structure");if(a.command in d)throw new Error("command name already exists")},i=function(a,b){b=$.trim(b)||"",b=b.split(" "),b.length>0&&a in d&&_(b).each(function(b){b in e||(e[b]=a)})},j={getDependentCommands:function(){return _(g.get(this.command)).map(function(a){return{command:a.command,title:d[a.command].title,base:d[a.command].base}})}},k=function(a,b,c){void 0===a[b]&&(a[b]=c)},l=function(a){return _.extend(a,j),k(a,"executeDependentCommands",!0),k(a,"suppressError",!0),k(a,"isSearchable",!0),a},m=function(a){h(a),a=l(a),a.isSearchable&&f.add(a.title.toLocaleLowerCase(),a.command);var b=a.on&&$.trim(a.on)||"";if(b){var c=b.split(" ");_(c).each(function(b){b=e[b]||b,g.add(b,a.command)})}i(a.commandName,a.aliases),d[a.command]=a},n=function(a){_.isArray(a)||(a=[a]),_(a).each(function(a){m(a)})},o=function(a){return a=a||"",_(f.get(a.toLocaleLowerCase())).map(function(a){return{command:a.command,title:d[a.command].title,base:d[a.command].base}})},p=function(a){return d[a]},q=function(b,c){var d=g.get(b.command);_(d).each(function(b){a.execute(b.command,c)})},r=function(a,b){var c=d[a]||d[e[a]];if(c)try{var f=c.callback(b);return c.executeDependentCommands&&q(c,f),f}catch(g){if(!c.suppressError)throw g;window.console.error("Suppressed Error: ",g)}};a.register=n,a.setAliases=i,a.get=o,a.getByCommandName=p,a.execute=r},"Platform"),function(){var a=zmail.Settings.Platform.Commands,b={};b.getSearchField=function(){return zmSearch.searchField},b.updateSearchText=function(c){if(c&&c.title){var d=$.trim(c.base||""),e=[];if(d){var f=d.split(" ");e=_(f).map(function(b){return a.getByCommandName(b).title})}e.push(c.title),b.getSearchField().val(e.join(" => "))}},b.clearSearchAutoFill=function(){void 0!==zmSearch.currentAutoFillId&&zmAutoFill.removeAutoFill(zmSearch.currentAutoFillId)};var c;b.getAutoFillObj=function(d){return{contentArray:d||zmail.Settings.Platform.Commands.get(""),display:"title",compare:["title"],LType:"2",OType:"2",callback:function(d){b.updateSearchText(d),c&&_.isFunction(c.callback)?(c.callback(d),c=void 0):d&&d.title&&d.command&&a.execute(d.command)},text:!0}},b.updateAutoFill=function(a){b.clearSearchAutoFill(),zmSearch.currentAutoFillId=zmAutoFill.setAutofill(b.getAutoFillObj(a),b.getSearchField())},b.showAutoFill=function(a,d){c=d,setTimeout(function(){zmAutoFill.showAutoFill(b.getSearchField(),b.getAutoFillObj(a))})},zmail.Settings.SearchCommandIntegrator=b}(),function(a){var b=zmail.Settings.Platform.Commands,c=zmail.Settings.SearchCommandIntegrator,d=zmText.get("zm-settings-platform","commands"),e=function(a){var b=zmail.Settings.Platform.Components.SettingAppManager.getAppForPage(a),c=$.Deferred();if(b.getState().active)c.resolve();else{var d=function e(a){a.changed&&a.changed.active&&(b.off("state.change",e),c.resolve())};b.on("state.change",d)}return zmail.Settings.MailSuite.App.Core.Framework.requestShowPage(a),c.promise()};b.register([{command:"goto",title:d.labels["goto"],aliases:"",executeDependentCommands:!1,callback:function(){c.showAutoFill(this.getDependentCommands())}},{command:"show-carddeck",title:d.labels.dashboard,on:"goto",executeDependentCommands:!1,callback:function(){var b=a("MailSuite.App.Core.Framework");b.requestShowCardDeck()}},{command:"load-filters",title:d.labels.loadFilters,isSearchable:!1,executeDependentCommands:!1,callback:function(){return e("filters")}},{command:"load-importexport",title:d.labels.importExport,isSearchable:!1,executeDependentCommands:!1,callback:function(){return e("importexport")}}])}(zmail.Settings.Modules["import"]),function(a){a(zmail.Core.Namespaces.get)}(function(a){var b=a("zmail.Commander"),c=a("$.Deferred"),d=zmText.get("zm-settings-platform","commands");b.register([{name:"load-settings",group:"settings",description:d.labels.settings,searchable:!1,action:function(){return zmail.Settings.MailSuite.App.openApp()}},{name:"settings-card-deck",description:[d.labels.settingsDashboard,d.labels.gotoSettings],action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Framework");b.requestShowCardDeck()})}},{name:"load-antispam",description:"AntiSpam",group:"settings-antispam",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("antispam")})}},{name:"whitelist-domains",description:d.labels.whitelistdomain,group:"settings-antispam",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("antispam").then(function(){var a=zmail.Settings.Apps.AntiSpam;a.Models.tabs.set({currentTab:2}),ZMStore.getInstance("WLDomainCollection").fetchCombinedList().then(function(){setTimeout(function(){a.Events.trigger("wd/focus")},100)})})})}},{name:"whitelist-emails",description:d.labels.whitelistemail,group:"settings-antispam",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("antispam").then(function(){var a=zmail.Settings.Apps.AntiSpam;a.Models.tabs.set({currentTab:1}),ZMStore.getInstance("WLEmailCollection").fetchCombinedList().then(function(){setTimeout(function(){a.Events.trigger("we/focus")},100)})})})}},{name:"blacklist-emails",description:d.labels.blacklistemail,group:"settings-antispam",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("antispam").then(function(){var a=zmail.Settings.Apps.AntiSpam;a.Models.tabs.set({currentTab:1}),ZMStore.getInstance("WLEmailCollection").fetchCombinedList().then(function(){setTimeout(function(){a.Events.trigger("be/focus")},100)})})})}},{name:"blacklist-domains",description:d.labels.blacklistdomain,group:"settings-antispam",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("antispam").then(function(){var a=zmail.Settings.Apps.AntiSpam;a.Models.tabs.set({currentTab:2}),ZMStore.getInstance("WLDomainCollection").fetchCombinedList().then(function(){setTimeout(function(){a.Events.trigger("bd/focus")},100)})})})}},{name:"unsubscribed-list",description:d.labels.unsubscribedlist,group:"settings-antispam",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("antispam").then(function(){zmail.Settings.Apps.AntiSpam.Models.tabs.set({currentTab:3})})})}},{name:"language-filter",description:d.labels.langfilter,group:"settings-antispam",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("antispam").then(function(){zmail.Settings.Apps.AntiSpam.Models.tabs.set({currentTab:4})})})}},{name:"load-smart-menu-setting",description:[d.labels.smartMenu],group:"settings-system",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("general-settings").then(function(){zmail.Settings.MailSuite.Apps.GeneralSettings.AppCore.setFocusedSection("smart-menu")})})}},{name:"load-desktop-notification-setting",description:[d.labels.desktopNotification],group:"settings-system",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("general-settings").then(function(){zmail.Settings.MailSuite.Apps.GeneralSettings.AppCore.setFocusedSection("desktop-notification")})})}},{name:"load-secure-your-download-setting",description:[d.labels.secureYourDownload],group:"settings-system",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("general-settings").then(function(){zmail.Settings.MailSuite.Apps.GeneralSettings.AppCore.setFocusedSection("secure-download")})})}},{name:"load-trash-cleanup-setting",description:[d.labels.trashretention],group:"settings-system",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("general-settings").then(function(){zmail.Settings.MailSuite.Apps.GeneralSettings.AppCore.setFocusedSection("trash-cleanup")})})}},{name:"load-keyboard-shortcuts",description:"Keyboard Shortcuts",group:"settings-keyboard-shortcuts",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("keyboardshortcuts")})}},{name:"load-Compose",description:"Compose Settings",group:"settings-compose-settings",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("compose-settings")})}},{name:"load-mail-conversation-settings",description:"Conversation",group:"settings-conversation",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("mail-conversation-settings")})}},{name:"load-integrations-settings",description:"Integrations",group:"settings-integrations-settings",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("integrations-settings")})}},{name:"load-signature",description:"Signature",group:"settings-signatures",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("signatures")})}},{name:"load-vacationreply",description:"Vacation Reply",group:"settings-vacationreply",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("vacationreply")})}},{name:"load-sendmailas",description:"Send Mail As",group:"settings-sendmailas",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("sendmailas")})}},{name:"load-mail-view-options",description:"Mail View Options",group:"settings-view-options",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("mail-view-options")})}},{name:"load-folders",description:"Folders Settings",group:"settings-folders",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("folders")})}},{name:"load-filters",description:d.labels.filters,group:"settings-filters",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("filters")})}},{name:"import-filter",description:d.labels.importFilters,group:"settings-filters-import",action:function(){return this.execute("load-filters").done(function(){zmail.Settings.Apps.Filter.Views.Utils.importFilters()})}},{name:"export-filter",description:d.labels.exportFilters,group:"settings-filters-export",action:function(){return this.execute("load-filters").done(function(){zmail.Settings.Apps.Filter.Views.Utils.exportFilters()})}},{name:"create-new-incoming-filter",description:[d.labels.newIncomingFilter,d.labels.createIncomingFilter,d.labels.addIncomingFilter],group:"settings-filters-incoming-new",searchable:!0,action:function(){return this.execute("load-filters").then(function(){zmail.Settings.Apps.Filter.Events.trigger("show-filter-bottom-band"),zmail.Settings.Apps.Filter.Models.filterTabs.set({currentTab:1}),ZMStore.getInstance("IncomingFilterCollection").fetchFilters().then(function(){zmail.Settings.Apps.Filter.Events.trigger("create-new-filter")})})}},{name:"create-new-outgoing-filter",description:[d.labels.newOutgoingFilter,d.labels.createOutgoingFilter,d.labels.addOutgoingFilter],group:"settings-filters-outgoing-new",searchable:!0,action:function(){return this.execute("load-filters").then(function(){zmail.Settings.Apps.Filter.Models.filterTabs.set({currentTab:2}),ZMStore.getInstance("OutgoingFilterCollection").fetchFilters().then(function(){zmail.Settings.Apps.Filter.Events.trigger("create-new-filter")})})}},{name:"edit-incoming-filters",description:[d.labels.editIncomingFilters,d.labels.updateIncomingFilters],group:"settings-filters-edit",searchable:!0,action:function(){var a=this;this.preventDefault();var b=c();return this.execute("load-filters").then(function(){return ZMStore.getInstance("IncomingFilterCollection").fetchFilters().then(function(){var c=zmail.Settings.Apps.Filter.Models.getFilterNamesAndId();return zmail.Settings.Apps.Filter.Models.filterTabs.set({currentTab:1}),c&&c.length>0?(a.setPlaceholder(d.labels.selectFilters),b.resolve(),a.showList({provider:c,text:"name",filterProps:"name"}).then(function(b){zmail.Settings.Apps.Filter.Events.trigger("edit-filter"+b.id),a.reset(!0)})):(b.resolve(),void a.reset(!0))})}),b.promise()}},{name:"edit-outgoing-filters",description:[d.labels.editOutgoingFilters,d.labels.updateOutgoingFilters],searchable:!0,group:"settings-filters-edit",action:function(){var a=this;this.preventDefault();var b=c();return this.execute("load-filters").then(function(){return ZMStore.getInstance("OutgoingFilterCollection").fetchFilters().then(function(){var c=zmail.Settings.Apps.Filter.Models.getOutgoingFilterNamesAndId();return zmail.Settings.Apps.Filter.Models.filterTabs.set({currentTab:2}),c&&c.length>0?(a.setPlaceholder(d.labels.selectFilters),b.resolve(),a.showList({provider:c,text:"name",filterProps:"name"}).then(function(b){zmail.Settings.Apps.Filter.Events.trigger("edit-filter"+b.id),a.reset(!0)})):(b.resolve(),void a.reset(!0))})}),b.promise()}},{name:"run-through-filters",description:[d.labels.runThroughFilter,d.labels.filterRunThrough],group:"settings-filters-runThrough",action:function(){var b,e=this;this.preventDefault();var f=c();return this.execute("load-filters").then(function(){return ZMStore.getInstance("IncomingFilterCollection").fetchFilters().then(function(){var c=zmail.Settings.Apps.Filter.Models.getFilterNamesAndId();return zmail.Settings.Apps.Filter.Models.filterTabs.set({currentTab:1}),c&&c.length>0?(e.setPlaceholder(d.labels.selectFolder),e.showList({provider:a("zmfolAction").getMailFolderPaths(),text:"path"}).then(function(a){return b=a,e.setPlaceholder(d.labels.selectFilter),e.showList({provider:zmail.Settings.Apps.Filter.Models.getFilterNamesAndId(),text:"name"})}).then(function(a){return ZMStore.getInstance("IncomingFilterCollection").get(a.id).runThrough(b.id)}).then(function(){$.publish("/mail/listMails"),a("_zm").succErrMsg("s",d.labels.runThroughSuccessful),e.reset(!0)})):(f.resolve(),void e.reset(!0))})}),f.promise()}},{name:"load-import-export",description:d.labels.importExport,group:"settings-import-export",action:function(){return this.execute("load-settings").then(function(){var b=a("zmail.Settings.MailSuite.App.Core.Util");return b.loadSettingsPage("importexport")})}},{name:"show-export-log",description:d.labels.exportLog,group:"settings-import-export-exportLog",action:function(){return this.execute("load-import-export").then(function(){zmail.Settings.Apps.ImportExport.Views.Utils.showExportList()})}},{name:"show-import-log",description:d.labels.importLog,group:"settings-import-export-importLog",action:function(){return this.execute("load-import-export").then(function(){zmail.Settings.Apps.ImportExport.Views.Utils.showImportList()})}}])});