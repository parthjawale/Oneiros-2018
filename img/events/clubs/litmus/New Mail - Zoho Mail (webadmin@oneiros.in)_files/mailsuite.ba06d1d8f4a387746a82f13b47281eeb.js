"use strict";!function(){var a,b,c,d,e,f,g,h={},i=!0,j=null,k={},l=function(a,b,c){return zmText.get("mailsuite",a,b,c)},m=function(){zmAppLoader.load("supportWidget").then(function(){var a=zmail.aInfo[zmUtil.getZohoAccId()];if(zmail.supportWidget)zmail.supportWidget.toggleSideBar();else{var b="zm-feedback@zohocorp.com";zmail.isBaihui&&(b="support@zohocorp.com.cn");var c={type:"single",text:l("supportWidget"),privacyLink:location.protocol+"//"+zmail.zohoUrl,fromAddress:zmail.aInfo[zmUtil.getZohoAccId()].mailId,menubar:{details:{ticket:{uploadObj:{desktop:{uploadAPI:"/zm/attach.do?mode=temp",uploadAPIParam:{entityType:1,type:"f",zmrcsr:zmAjq.getCookie("zmcsr"),accId:a.accId,tSize:0},autoLaunch:!0},onAttachmentRemove:function(b){var c={mode:"d",aId:a.accId,zmrcsr:zmAjq.getCookie("zmcsr"),sN:b.sN,fP:b.fP};zmAjq.XHR({u:zmail.conPath+"/attach.do",t:"POST",p:c})},iconClasses:{closeIcon:"msi-close",dragIcon:"msi-drag"},annotateObj:{iconClasses:{undoClass:"msi-undo",redoClass:"msi-redo",squareClass:"msi-box",circleClass:"msi-ellipse",maskClass:"msi-mask",lineClass:"msi-line",penClass:"msi-pen",cropClass:"msi-crop",textClass:"msi-text",colorClass:"msi-colorPalette"},afterInit:function(a){a.removeClass("ZC_annotatebox")}},slideshowObj:{iconClasses:{closeClass:"msi-close",prevClass:"msi-atprev",nextClass:"msi-atnext",moreClass:"msi-action",zoominClass:"msi-zoomin",zoomoutClass:"msi-zoomout",printClass:"msi-print",addToCloudClass:"msi-addcloud",downloadClass:"msi-download",zoomPlusClass:"msi-plus",zoomMinusClass:"msi-minus"},afterInit:function(a){a.removeClass("ZC_lightbox")}},imagePath:function(a){return zmResource.get("image","annotate/"+a)}},supportId:b,postURL:zmail.conPath+"/sendfeedback.do",type:"POST",params:{zmrcsr:zmAjq.getCookie("zmcsr"),accId:a.accId,zemailId:a.disName+"<"+a.mailId+">"},headerTitle:l("helpcenter")}},hideTab:!0},faqDefaultParam:{categoryId:"4000000097801"},faqDomain:zmail.urls.supportURL};(zmail.isFuji||zmail.isBaihui)&&(c.type="ticket",c.menubar.details.ticket.headerTitle=l("contactus"),zmail.isFuji&&(c.menubar.details.ticket.supportId="skydesk-support@fujixerox.co.jp")),zmail.supportWidget=ZMate.init(c),zmUtil.updateFaqKey(zmUtil.getfaqDetails("searchKey")),zmail.supportWidget.toggleSideBar()}})},n=function(a,b){var c=/(zmThm[A-Z]+[a-z]*)/g,d=function(){var b=zmAdHocSettings.getTheme();if(b!==a)return!1;var d,e=_zm.getClassNameForTheme(a),f=$("body").attr("class");f&&(d=f.match(c)),d&&$("body").removeClass(d.join(" ")),$("body").addClass(e)};if(b){var e=_zm.getClassNameForTheme(a);$("body").addClass(e)}var f=a+(zmail.isProduction?"-min":"")+".css";zmAppLoader.__loadedFiles[zmResource.get("css",f)]?d():zmAppLoader.loadFiles("css",[f]).done(d)},o=function(){var a=zmAdHocSettings.getTheme();n(a||"theme1",!0),zmAdHocSettings.subscribeThemeChange(function(){n(zmAdHocSettings.getTheme())})},p=function(a){var b=a.id||k[a.name];$("body").removeClass("font"+f).addClass("font"+b),f=b},q=function(){zmAdHocSettings.getFontValidValues().forEach(function(a,b){b+=1,k[b]=a,k[a]=b}),zmAdHocSettings.getFont()in k||zmAdHocSettings.setFont(zmAdHocSettings.getFontDefault()),p({name:zmAdHocSettings.getFont()}),zmAdHocSettings.subscribeFontChange(function(){p({name:zmAdHocSettings.getFont()})})},r=function(){o(),zmAdHocSettings.subscribe("settingsloaded",q)},s=function(a){zmsuite.isMaxLimitReached()||zmAppLoader.load("streamsApp").then(function(){zmail.ContactBook.fetchProcess.done(function(){zmStreamsApp.init(a)})},function(){zmUtil.debugLog("Streams module not loaded")})},t=function(){zmail.accId===zmUtil.getZohoAccId()?zmsuite.isWorkspaceAvailable("attView")?zmsuite.showWorkSpace("attView"):zmsuite.isMaxLimitReached()||zmsuite.isWorkspaceAvailable("attView")||zmAppLoader.load("attachmentView").then(function(){zmail.ContactBook.fetchProcess.done(function(){zmsAtt.attView()})}):zmUtil.succErrMsg("e",l("attViewNotSupported"))},u=function(a){var b=a.handler;$(c).find(".msi-barrow").off("click").click(function(){zmDrop.show("zm_createLst",$(c).find(".zm_comp"))}),b&&b.create&&$(c).find("span").eq(0).off("click").click(_.debounce(b.create,250,!0))},v=function(a){return!!h[a]},w=function(){if(zmail.isRHSEnabled)return $("body").addClass("zmWdRhs"),zmAppLoader.load("zmWidget").then(function(){zmWidgets.toggleRHSWidget()})},x=function(){var a,b;return b=l("undefined"!=typeof _zm.isSmartComposeEnabled&&_zm.isSmartComposeEnabled()&&zmail.fromOtherService!==!0?"smartCompose":"compose"),a=["DIV",{attrs:{"class":"zm_compose"},child:[["DIV",{attrs:{"class":"zm_comp"},child:[["SPAN",{child:[["text",b]]}]]}]]}],a[1].child[0][1].child[1]=["SPAN",{child:[["I",{attrs:{"class":"msi-barrow"}}]]}],c=_zm.getDOM(a)},y=function(){var a,b,c=Object.keys(zmail.aInfo);for(var d in zmail.aInfo)if("1"===zmail.aInfo[d].accountType){zmail.defAccId=d;break}c.splice(c.indexOf(zmail.defAccId),1);var e=zmAdHocSettings.getAccountsLhsOrder();return"-no_acc-"!==e&&(b=e.split(","),c&&c.length&&(c=_.sortBy(c,function(c){return a=b.indexOf(c),a>-1?a:100}))),c.length&&(a=c.indexOf(zmail.accId))>0&&(c.splice(a,1),c.unshift(zmail.accId),zmAdHocSettings.setAccountsLhsOrder(_.first(c,3).join(","))),$.subscribe("/acc/unreadCountChange",function(a,b){if(b.mode&&b.accId&&zmail.aInfo[b.accId]){var c=parseInt(zmail.aInfo[b.accId].c);switch(b.mode){case"inc":zmail.aInfo[b.accId].c=[c+1].join("");break;case"dec":c>1&&(zmail.aInfo[b.accId].c=[c-1].join(""));break;case"update":c="undefined"!=typeof b.count?b.count:0,zmail.aInfo[b.accId].c=[c].join("");break;case"bulkInc":var d=parseInt([b.count].join(""));zmail.aInfo[b.accId].c=[c+d].join("");break;case"bulkDec":var e=c-parseInt([b.count].join(""));e<-1||0===e?zmail.aInfo[b.accId].c="0":zmail.aInfo[b.accId].c=[e].join("")}zmail.appList.accListObj[b.accId]&&zmail.appList.accListObj[b.accId].updateCount(zmail.appList.accListObj[b.accId].$el,zmail.aInfo[b.accId].c,b.mode,b.accId)}}),c},z=function(){var a,b;a=[{icon:"msi-mailApp zmDoubleIcon",id:"mail",dataName:"mail",tooltip:l("tooltips.mail"),clk:function(){zmApp.showApp("m")}},{icon:"msi-calendarApp zmDoubleIcon",id:"cal",dataName:"calendar",tooltip:l("tooltips.calendar"),clk:function(){zmApp.showApp("c")}},{icon:"msi-taskApp zmDoubleIcon",id:"task",dataName:"task",tooltip:l("tooltips.tasks"),clk:function(){zmApp.showApp("t")}},{icon:"msi-notesApp zmDoubleIcon",id:"notes",dataName:"notes",tooltip:l("tooltips.notes"),clk:function(){zmApp.showApp("n")}},{icon:"msi-contactsApp zmDoubleIcon",id:"contacts",dataName:"contacts",tooltip:l("tooltips.contacts"),clk:function(){zmApp.showApp("cn")}},{icon:"msi-bookmarksApp zmDoubleIcon",id:"links",dataName:"bookmarks",tooltip:l("tooltips.links"),clk:function(){zmApp.showApp("l")}}],zmail.fromService&&(a="recruit"===zmail.fromService?[a[0],a[1],a[4]]:"workerly"===zmail.fromService?[a[0],a[1],a[4]]:[a[0],a[4]]),zmsuite.lhsAppsAvailable=[];for(var c=0;c<a.length;c++)zmsuite.lhsAppsAvailable.push(a[c].id);return b=y(),zmail.appList=new zmAppList(a,b),zmail.appList.constructDOM(),zmail.appList.constructAccountsDOM(),zmail.appList.appObj.mail.selectApp(),$.subscribe("settings/mail-accounts/pop-account-removed",function(a,b){var c=b.id;delete zmail.aInfo[c];var d=zmail.appList.popAccList.indexOf(c);zmail.appList.popAccList.splice(d,1),$("#zm-ac-"+c).remove(),zmail.appList.reRenderAccArea()}),$.subscribe("settings/mail-accounts/pop-account-added",function(a,b){var c,d;c=b.id,d=b.data,zmail.aInfo[c]={Enabled:"true",accId:c,accName:"",accountType:"0",c:"0",disName:d.displayName,mailId:d.emailAddress},zmail.appList.popAccList.push(c),zmail.appList.reRenderAccArea()}),zmail.appList.getDOM()},A=function(){var a,b;return a=["DIV",{attrs:{"class":"SCl_parent"},child:[["DIV",{attrs:{"class":"SClcom_parent"},child:[["DIV",{attrs:{id:"zm_mailLeft","class":"SCl SC_show"}}]]}],["DIV",{attrs:{"class":"zmTreeResize",id:"zmTreeResize"}}]]}],b=_zm.getDOM(a)},B=function(){var a,b;return a=["DIV",{attrs:{"class":"zmTtab"},child:[["DIV",{attrs:{"class":"SC_tab"},child:[["UL",{child:[["LI",{}]]}]]}]]}],b=_zm.getDOM(a)},C=function(a){var b=["DIV",{attrs:{"class":"SCr_parent"}}];return $("body").addClass("SC_nrp"),_zm.getDOM(b)},D=function(){return $("<div id='zm_centerHolder' class='SCm_parent'></div>")},E=function(){zmAppLoader.load("whatsSeen").then(function(){zmail.Components.WhatsSeen.init()})},F=function(a){zmail.isAdmin=!1,a&&a.info&&(zmail.isAdmin=a.info.isAdmin,zmail.superAdmin=a.info.superAdmin,zmail.fetchPlanDetails.resolve(a))},G=function(){if("undefined"==typeof zmail.fetchPlanDetails){zmail.fetchPlanDetails=$.Deferred();var a={};a.mode="getUserProfile",zmAjq.XHR({u:"/biz/bizApi.do",t:"post",p:a,fn:F,csr:"s"})}return zmail.fetchPlanDetails.promise()},H=function(){var a=zmail.staticVersion;a=a.replace(".","_"),zmAdHocSettings.setTotUIVersion(a)},I="UnKnown",J={setLoadingTime:function(a){if(!zmail.isInternalOrgUser)return 0;var b="Unknown",c=navigator.userAgent,d=[{s:"Windows10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows8_1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows7",r:/(Windows 7|Windows NT 6.1)/},{s:"WindowsVista",r:/Windows NT 6.0/},{s:"WindowsServer2003",r:/Windows NT 5.2/},{s:"WindowsXP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"WindowsME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows98",r:/(Windows 98|Win98)/},{s:"Windows95",r:/(Windows 95|Win95|Windows_95)/},{s:"WindowsNT4_0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"WindowsCE",r:/Windows CE/},{s:"Windows3_11",r:/Win16/},{s:"Android",r:/Android/},{s:"OpenBSD",r:/OpenBSD/},{s:"SunOS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"MacOSX",r:/Mac OS X/},{s:"MacOS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS_2",r:/OS\/2/}];for(var e in d){var f=d[e];if(f.r.test(c)){b=f.s;break}}var g,h=navigator.userAgent;if((g=h.indexOf("Chrome"))!==-1){var i=h.match(/\b(OPR|Edge)\/(\d+)/);null!==i?I=i.slice(1).join("_").replace("OPR","Opera"):(I="Chrome",I+="_"+parseInt(h.substring(g+7)))}else if((g=h.indexOf("Firefox"))!==-1)I="Firefox",I+="_"+parseInt(h.substring(g+8));else if((g=h.indexOf("MSIE"))!==-1)I="IE",I+="_"+parseInt(h.substring(g+5));else if((g=h.indexOf("Safari"))!==-1){I="Safari";var j;I+=(j=h.indexOf("Version"))!==-1?"_"+parseInt(h.substring(j+8)):"_"+h.substring(g+7)}I=b+I;var k=Math.ceil((new Date).getDate()/7),l=(new Date).getMonth()+1,m=zmAdHocSettings.getUiStats(),n=!1;m[k]||(m[k]={}),m[k]&&m[k].month!==l&&(m[k]={}),m[k].month=l,m[k][I]||(m[k][I]={}),m[k][I].fastTime||(n=!0,m[k][I].fastTime=a,m[k][I].slowTime=a,m[k][I].tabLimit=1),m[k][I].fastTime>a&&(n=!0,m[k][I].fastTime=a),m[k][I].slowTime<a&&(n=!0,m[k][I].slowTime=a),n===!0&&zmAdHocSettings.setUiStats(m),zmsuite.statsUpdated=!0},setTabStats:function(a){var b=Math.ceil((new Date).getDate()/7),c=zmAdHocSettings.getUiStats();(!c[b][I].tabLimit||c[b][I].tabLimit<5*Math.ceil(a/5))&&(c[b][I].tabLimit=5*Math.ceil(a/5),zmAdHocSettings.setUiStats(c))}},K=function(){zmail.postJsDeffered.promise.then(function(){H(),zmAppLoader.load("dragNDropUtil").then(function(){var a=$("#topBar .SC_tab");if(a){var b=function(a,b){if("draggingAtt"!==b.id&&"attachView"!==b.id)return!1;zmDragger.hoverOnTabs($(a));var c={allowDragOver:!0};return c},c=function(){return!1},d=new zmail.dndComp.Drop;d.init(a[0],{onDrop:c,onDragOver:b})}})})},L=function(){var a=function(a){if(a)return!1},b=function(a){"NOT BLOCKED"!==a.blockstatus&&zmail.postJsDeffered.promise.then(function(){a=JSON.parse(a.blockstatus);var b,c,d=a[0].BlockCategoryInt,e=a[0].Blocktype;"Blocked"===a[0].BlockStatus&&1===d?(b=['<div id="accountBlock" class="SC_simg zmErrMsg" ref="accountBlock">',"<span>",l("accountBlock",{companyName:zmail.globalI18N.companyName}),'<a target= "_blank" href = /UnblockMe> ',l("_clickHere")," </a>",l("unblock"),"</span>","</div>"].join(""),c=_zm.getDOMReferenceMap(b,!0),$(document.body).addClass("zmErrBand"),$(c.accountBlock).insertAfter(".SC_top")):"Blocked"===a[0].BlockStatus&&2===d&&(b=12===e?['<div id="OutgoingBlock" class="SC_simg zmErrMsg" ref="accountBlock">',"<span>",l("outgoingPermanent"),'<a target= "_blank" href = /UnblockMe> ',l("learnmore")," </a>","</span>","</div>"].join(""):['<div id="OutgoingBlock" class="SC_simg zmErrMsg" ref="accountBlock">',"<span>",l("outgoingBlock"),'<a target= "_blank" href = /UnblockMe> ',l("clickHere")," </a>","</span>","</div>"].join(""),c=_zm.getDOMReferenceMap(b,!0),$(document.body).addClass("zmErrBand"),$(c.accountBlock).insertAfter(".SC_top"))})},c={mode:"blockstatus"};zmAjq.XHR({u:"userStatus.do",t:"POST",fn:b,efn:a,p:c,csr:"s"})},M=function(){var a,b=String(window.location.href);b.match(/fromService=?(.*)/)&&(a=b.match(/fromService=?(.*)/)[1].toString(),"recruit"===a.slice(0,7)?zmail.fromService="recruit":"workerly"===a.slice(0,8)?zmail.fromService="workerly":zmail.fromService="crm")},N=function(){var a,b=document.body;a=B(),g=a,M(),zmsuite.topbarInitialized=!1,zmsuite.$el={};var c=parseInt(zmAdHocSettings.getLhsResize()),d=A();if($(d).css("width",c),zmsuite.$el.lhs=$(d),zmCustomization.initLHSResizeHandlers(),$(d).find(".SClcom_parent").prepend(x()),"true"===zmail.hasCustomLogo&&zmail.isInternalOrgUser!==!0){var e=zmTopBar.View.getLogoElement();$(e).find("a").attr("href",zmail.conPath+"/#mail"),$(e).find("img").attr("src",zmail.logoSrc),$(d).prepend(e)}$(b).append(d),zmsuite.customization.appBar={width:60,isVisible:!1},zmsuite.$el.appBar=z(),$("body").append(zmsuite.$el.appBar),zmsuite.$el.centerListing=$(D()),$(b).append(zmsuite.$el.centerListing);var f=c;if(zmail.fromOtherService||(f+=zmsuite.customization.appBar.width),zmsuite.$el.centerListing.css({left:f}),window.zmTopBar.init({}),zmCustomization.initAppBarToggle(),!zmail.fromOtherService){var h="en",i=zmail.urls.zohoWebsiteLink+"/new/help/";zmail.urls.whatsNew=location.protocol+"//"+zmail.zohoUrl+"/mail/whats-new.html",zmail.isFuji&&("ja"===zmail.user.lang&&(h=zmail.user.lang),i="//www.skydesk.jp/"+h+"/apps/mail/new/help"),zmail.urls.helpURL=i;var j,k={},l=zmail.Utils.FeatureUtil;l.isHidden("FeedbackForm")||(k.feedback=m);var n=!1;!zmail.isInternalOrgUser&&j&&zmail.showNewRefProg&&zmail.zoid!==-1&&(n=!0),j=!zmail.isRebranded&&zmail.hideZohoApps!==!0;var o={};o.zohoAppsMenu=j&&!l.isHidden("topbar:apps"),o.displayUserID=j,o.websiteAccess=j,o.blogAccess=j,o.forumAccess=j&&!l.isHidden("ForumAccess"),o.myAccountAccess=j,o.hasUserReferrals=n,o.logo=zmail.logoSrc,zmsuite.topbarInitialized=!0,L(),K(),G().done(function(a){zmNCenter.bizNotification.load(a)}),E()}var p=$(".SC_top");p.append(a),$(b).append(C(a)),r(),zmail.fromOtherService&&$(b).addClass("SC_nlab"),zmail.isInternalOrgUser&&$(b).addClass("zmZC")},O=function(c){var d,e,f;d=c.appId,h[d]={},h[d].obj=c,u(c),e=c.data.CNodes||"3",h[d].left=new zmLeft(c),h[d].centerObj=new zmCenterWrapper(e,c),h[d].rightObj=new zmRight,b=a&&a.obj.appId,a=h[c.appId],i=!1,c.shortcuts&&zmComponent.keybindings.registerAll({scope:c.appId,shortcuts:c.shortcuts,allowDefaultScope:void 0===c.allowDefaultShortcutScope||c.allowDefaultShortcutScope}),zmComponent.keybindings.setScope(d),c.titleProvider&&zmWinTitle.registerTitleProvider(c.appId,c.titleProvider),h[d].router=c.router,f=h[d].router,f instanceof zmail.Suite.RouteHelper||(h[d].router=void 0),c.hashKey&&"function"==typeof c.hashChangeHandler&&(f=zmail.Suite.RouteHelper.create(),h[d].router=f,f.initialize({hashKey:c.hashKey,handler:c.hashChangeHandler})),c.faqKey&&(h[d].faqKey=c.faqKey),c.appBodyClassName&&(h[d].appBodyClassName=c.appBodyClassName),$.publish("mailsuite/appCreated",d)},P=function(a){var b,c,d;b=a.appId,h[b]={},h[b].obj=a,c=a.data.CNodes||"3",h[b].left=new zmLeft(a),h[b].centerObj=new zmCenterWrapper(c,a),h[b].rightObj=new zmRight,i=!1,a.shortcuts&&zmComponent.keybindings.registerAll({scope:a.appId,shortcuts:a.shortcuts,allowDefaultScope:void 0===a.allowDefaultShortcutScope||a.allowDefaultShortcutScope}),a.titleProvider&&zmWinTitle.registerTitleProvider(a.appId,a.titleProvider),h[b].router=a.router,d=h[b].router,d instanceof zmail.Suite.RouteHelper||(h[b].router=void 0),a.hashKey&&"function"==typeof a.hashChangeHandler&&(d=zmail.Suite.RouteHelper.create(),h[b].router=d,d.initialize({hashKey:a.hashKey,handler:a.hashChangeHandler})),a.faqKey&&(h[b].faqKey=a.faqKey),a.appBodyClassName&&(h[b].appBodyClassName=a.appBodyClassName),$.publish("mailsuite/appCreated",b)},Q=function(a){e=a.appId,O(a),zmTab.setTabForApp(a),a.stateData&&(zmState.appInfo.addNew(a.appId,a.stateData.data,!0),zmState.sendRequestToSaveState())},R=function(a){return a?h[a]:h},S=function(a){var b=h[a];return delete h[a],b},T=function(a){return!("object"!==("undefined"==typeof a?"undefined":babelHelpers["typeof"](a))||a.isSearch!==!0&&zmTab.isMaxLimitReached()||v(a.appId))&&(O(a),zmTab.addTabLst(a),!0)},U=function(a){return"object"===("undefined"==typeof a?"undefined":babelHelpers["typeof"](a))&&!zmTab.isMaxLimitReached()&&!v(a.appId)&&(P(a),zmTab.addTabLst(a),!0)},V=function(a){zmComponent.keybindings.dropScope(a),zmCenterListing.mailObjectAPI.dropViewObjectStore(a),h[a].centerObj.$el.remove(),S(a)},W=function(a,b){V(a),O(b),zmTab.updateTabLst(b,{appId:a})},X=function(a){var b;if(b=zmTab.remTabLst(a)){zmComponent.keybindings.dropScope(a),zmCenterListing.mailObjectAPI.dropViewObjectStore(a);var c=S(a);$.publish("mailsuite/appClosed",{appID:a,app:c})}return b},Y=function(b){a=R(b),zmTab.showTab(b),u(a.obj),h[b].left&&h[b].left.updateRowSelection(),zmComponent.keybindings.setScope(b),zmUtil.hideMenu(),$.publish("mailsuite/appOpened",b)},Z=function(c){if(i&&(b=a.obj.appId),!R(c))return!1;a=R(c);try{a.obj.appId!==b&&(u(a.obj),h[c].left&&h[c].left.render())}catch(d){}a.obj.appClass&&a.centerObj.$el.addClass(a.obj.appClass),i=!0,zmTab.showTab(c),zmComponent.keybindings.setScope(c),zmUtil.hideMenu(),$.publish("mailsuite/appOpened",c)},aa=function(a){e=a,Z(a)},ba=function(a){a.paint(),zmsTemplates.appendToCenter(a.$el)},ca=function(b){b?ba(b):a.centerObj.paint()},da=function(a){a.paint(),zmsTemplates.appendToRight(a.$el)},ea=function(b){b?da(b):a.rightObj.paint()},fa=function(){return $("#ms_topband")[0]},ga=function(b){return b?h[b].centerObj.centerArr:a.centerObj.centerArr},ha=function(b){return b?h[b].centerObj:a.centerObj},ia=function(b){return b?(h[b]||{}).rightObj:a.rightObj},ja=function(b){return b?(h[b]||{}).left:a.left},ka=function(a){return T(a)},la=function(a){return h[a].centerObj.centerArr},ma=function(a,b){var c;return c=new zmContextMenu,c.setMenuObj(b),c.paint(a),zmail.debug&&(window._lastContextMenu=c),c},na=function(a){var b;return b=new zmDropDownMenu,b.setDropObj(a),b.paint(),zmail.debug&&(window._lastDropMenu=b),b},oa=function(a){a=a||{};var b=a.app;b&&b.router&&b.router.activate()},pa=function(a,b){b=b||{};var c=b.app;c&&c.router&&c.router.deactivate()},qa=function(a){var b=R(a);b&&(b.router?(b.router.activate(),b.router.update()):zmHash.clearHash(),b.faqKey&&zmUtil.updateFaqKey(b.faqKey),b.appBodyClassName&&(j&&$(document.body).removeClass(j),$(document.body).addClass(b.appBodyClassName),j=b.appBodyClassName),$(b).triggerHandler("tabFocused"))},ra=function(a){var b=R(a);b&&(b.router&&b.router.deactivate(),$(b).triggerHandler("tabBlurred"))},sa=function(a,b,c){ra(c),qa(b)},ta=function(){qa(zmTab.currentTab)},ua=function(a,b){var c,d="",e="",f=function(a){var c=this;zmUtil.debugLog("External app hash url changed",a,d,b,c)};"zm_Contacts"===b?(d="contacts",e="contacts"):"zcal_Container"===b&&(e="calendar"),d&&(c=zmail.Suite.RouteHelper.create(),zmsuite.setAppRouter(b,c),c.initialize({hashKey:d,handler:f})),e&&(zmsuite.setFaqKey(b,e),zmUtil.updateFaqKey(e))},va=function(){$("#zm_centerHolder").scrollTop(0).scrollLeft(0)},wa=function(){zmsuite.customization={},N(),$.subscribe("mailsuite/appOpened",oa),$.subscribe("mailsuite/appClosed",pa),$.subscribe("/apps/tabSwitched",sa),$.subscribe("zm/framework/dialogClosed",ta),$.subscribe("mailsuite/appCreated",ua),$.subscribe("mailsuite/center/fixScroll",va)},xa=function(a){var b="";b+="<div class='SC_dg'>",a.count&&(b+=$("<span />").text(a.count)[0].outerHTML),b+=$("<font />").text(a.text)[0].outerHTML,b+="</div>",d=$(b),$(document.body).append(d)},ya=function(a,b,c){var e,f;e=a.pageX,f=a.pageY,d||xa(c),d.css({left:e+1+"px",top:f+1+"px"})},za=function(){d&&(d.remove(),d=null)},Aa=function(){return zmTab.isMaxLimitReached()},Ba=function(){return e},Ca=function(){return R(Ba()).left},Da=function(){var a={},b=$(".zm_apps");a.hamburger=b.find(".zmHamburger")[0],a.notification=b.find(".zmBoxNoti")[0];for(var c=b.find(".zmApps li"),d=0;d<c.length;d++){var e=$(c[d]),f=e.data("name");a[String(f)]=e[0]}return a},Ea=function(){return{feedback:$(".jszmChtBndFdbck")[0]}};window.zmsuite={setAppInfo:Q,showApp:aa,showExistingApp:Y,setWorkSpace:ka,createWorkspace:U,showWorkSpace:Z,isWorkspaceAvailable:v,closeWorkspace:X,getLeftBandElements:Da,getChatBandElements:Ea,getAppObj:R,getTopNodes:fa,getLeft:ja,getCenter:ga,getCenterOuter:ha,getRight:ia,renderCenter:ca,renderRight:ea,renderWorkSpace:ca,getWorkSpace:la,isMaxLimitReached:Aa,deleteAppInfo:S,getCurrentAppObjId:Ba,setFaqKey:function(a,b){var c=R(a);c&&(c.faqKey=b)},getAppLeft:Ca,getTabDOM:function(){return $(g)},getAppRouter:function(a){var b=R(a);return b?b.router||null:null},setAppRouter:function(a,b,c){if(c=c||{},null===zmsuite.getAppRouter(a)||c.replace===!0){var d=R(a);d&&(d.router=b)}},createAppRouter:function(a){var b=zmail.Suite.RouteHelper.create();return a&&zmsuite.setAppRouter(a,b),b},addLoadingBand:function(a,b,c){var d,e,f,g,h;if(c=c||"listing",v(a)){if(d=R(a),h=d.centerObj,f=h.node,"header"===b){if("2"===f)return!1;g=1}else"action"===b?g=0:"list"===b&&("2"===f&&(g=1),g=2);if(e=h.centerArr[0].getNodes()[g].$el,e.length)return zmComponent.loadingBand({container:e[0],type:c,notToSetInnerHTML:!0,addAtFirst:!0})}},showContextMenu:ma,showMenu:na,showDragHandler:ya,removeDragHandler:za,setLoadingTime:J.setLoadingTime,setTabStats:J.setTabStats,loadStreams:s,loadAttachView:t,loadFeedback:m,toggleRHS:w,resetWorkspace:W,init:wa}}(),window.zmCenterWrapper=function(){var a=function(a){this.listData=a&&a.listData,this.listType=a&&a.listType,this.$el=$("<div class='SC_mclst'></div>"),this.prevObj=a&&a.prevObj,this.data=a&&a.data,this.layerCount=a&&a.count,this.dragEventObj=void 0,this.handlerElem=void 0,this.dragHelper=void 0};a.prototype={getDOMNode:function(){return this.$el},setListData:function(a){this.listData=a},setListType:function(a){this.listType=a},setListElem:function(a){this.$el=a},getListElem:function(){return this.$el},setPrevObj:function(a){this.prevObj=a},setListener:function(a,b){this.$el.off(a).on(a,b)},setData:function(a){this.data=a},selectRow:function(a){this.unselectRow(),$("#"+a).addClass("zmSLst")},unselectRow:function(a){a?$("#"+a).removeClass(a):this.$el.find(".zmL").removeClass("zmSLst")},onMouseMove:function(a,b){var c,d;return c=a.target||a.srcElement,c=$(c),d=c.closest(b.allowedParents),d.length?void zmsuite.showDragHandler(a,!0,b.helperText):void zmsuite.showDragHandler(a,!1,b.helperText)},setDragDrop:function(a){var b=this;this.dragEventObj=a,this.$el.mousedown(function(c){var d,e,f,g,h,i,j,k,l=!1,m=!0;3!==c.which&&(e=c.pageY,d=c.target||c.srcElement,j=a.rowCls||"zmL",k=a.selCls||"SC_check",d=$(d).closest("."+j),d.length&&(a.allowDrag&&!a.allowDrag(d)||(i=zmTab.currentTab,d.hasClass(k)&&(d=b.$el.find("."+j+"."+k)),a.fromData=d,$.publish("mail/draggingStarted",{text:zmDragger.getDropMessage()}),$(document).on("mousemove.ZMCenter",function(b){var c,d,i,j;l=!0,c=b.target||b.srcElement,d=$(c),(i=d.parents(".SC_lbx"))&&i.length?(h="MovingToFolder",j=zmsuite.getLeft().getNodes()[0],j||(j=zmsuite.getAppObj(zmsuite.getCurrentAppObjId()).left.getNodes()[0])):(i=d.parents(".zmTtab"))&&i.length?(zmDragger.hoverOnTabs(d),h="MovingToCompose"):(i=d.hasClass("SC_drag"))&&i.length?$.publish("mail/draggingOnCmpMask",{}):(i=d.parents(".SC_Twpr"))&&i.length?zmDragger.updateScroll(c,i):h="",m&&(a.helperText=a.dragStart(b,a.fromData)),m=!1,"MovingToFolder"===h?(g=j.getLayer(i[0].id),f=g.onMouseMove(b,a,e)):(zmsuite.showDragHandler(b,!1,a.helperText),j&&j.removeDragHelperFromLayers()),e=b.pageY}),b.$el.on("mouseleave.ZMCenter",function(){zmsuite.showDragHandler(c,!1,a.helperText)}),$(document).on("mouseup.ZMCenter",function(c){zmDragger.resetScrollPos();var d,e,j,k,m,n=[];if(d=c.target||c.srcElement,d=$(d),(e=d.parents(".SC_lbx"))&&e.length?h="MovingToFolder":d.hasClass("SC_drag")?(e=d,h="MovingToCompose"):d.parent().hasClass("SC_drag")?(e=d.parent(),h="MovingToCompose"):d.closest(".zmTasksApp")&&(e=d.closest(".zmTasksApp"),h="MovingToTaskList"),$(document).off("mousemove.ZMCenter"),$(document).off("mouseup.ZMCenter"),b.$el.off("mouseleave.ZMCenter"),zmsuite.removeDragHandler(),$.publish("mail/draggingEnded",{}),l&&e.length){if(g&&(g.removeDragHelper(),g.showHoverOnRow()),d=c.target||c.srcElement,d=$(d),n=d.parents(a.allowedParents),"MovingToFolder"===h&&!n.length||"MovingToCompose"===h&&!e.length)return;f&&f.toDrop&&"MovingToFolder"===h?(d=f.curElem,"inside"===f.pos&&(k=d.data("zmsData").rowObject,j=a.fromData,delete a.fromData,a.onDrop(c,j,k,m))):"MovingToCompose"===h?zmDragger.dropOnCompose(a.fromData,i,e):"MovingToTaskList"===h&&(k=d.closest("div.zmL").data(),j=a.fromData,delete a.fromData,a.onDrop(c,j,k,m))}l=!1}))))})},paint:function(){var a=this;this.id||(this.id="zm_Container"),this.lftClkFn&&this.$el.undelegate("click").delegate("div.zmL","click",function(b){a.callback?a.callback(b,this):a.lftClkFn&&a.lftClkFn(b,this)}),this.rgtClkFn&&this.$el.undelegate("contextmenu").delegate("div.zmL","contextmenu",function(b){a.callback?a.callback(b,this):a.lftClkFn&&a.rgtClkFn(b,this)})}};var b=function(a){this.actionArr=a&&a.actionArr,this.elemHolder=void 0,this.groupId=a&&a.groupId,this.isHidden=a&&a.hideGroup};b.prototype={setActionArr:function(a){this.actionArr=a},setGroupId:function(a){this.groupId=a},paint:function(){var a,b=this;return a=zmsTemplates.constructActionListIcons(this.actionArr,{hideGroup:b.isHidden}),this.elemHolder=a,a},show:function(){var a=this;a.isHidden=!1,$(a.elemHolder).show()},hide:function(){var a=this;a.isHidden=!0,$(a.elemHolder).hide()},unSelect:function(){$(this.elemHolder).find("b").removeClass("Sel")}};var c=function(){this.iconArr=void 0,this.iconObjArr=void 0,this.iconRightArr=void 0,this.iconClick=void 0,this.$el=$("<div class='SCmb'></div>")},d=function(a,c){function d(a){var c,d,e=[];for(c=a.length,d=0;d<c;d++)e.push(new b(a[d]));return e}var e=[],f=[];c=c||{},$.isArray(a.iconArr)?e=d(a.iconArr):(e=d(a.iconArr.left),f=d(a.iconArr.right)),a.iconRightArr=f,a.iconObjArr=e,c.leftElemCustomClass&&(a.leftElemCustomClass=c.leftElemCustomClass),c.rightElemCustomClass&&(a.rightElemCustomClass=c.rightElemCustomClass)};c.prototype={push:function(a,b){this.iconArr=a,d(this,b)},clear:function(){this.iconArr=[]},checkAndRemoveElementInHideArray:function(a){var b=this.isElementPresentInHideArray(a);if(b===-1)return 0;var c,d=this.iconArr.monitor.hiddenElements.length;for(c=0;c<d;c++)$(this.iconArr.monitor.hiddenElements[c]).is(a)&&this.iconArr.monitor.hiddenElements.splice(c,1)},isElementPresentInHideArray:function(a){var b,c=this.iconArr.monitor.hiddenElements.length;for(b=0;b<c;b++)if($(this.iconArr.monitor.hiddenElements[b]).is(a))return b;return-1},addElementInHideArray:function(a){this.isElementPresentInHideArray(a)===-1&&this.iconArr.monitor.hiddenElements.unshift(a)},getDOMNode:function(){return this.$el},setinnerHTML:function(a){this.$el.html(a)},appendChild:function(a){this.$el.empty(),this.$el.append(a)},monitorElements:function(){this.iconArr.isMonitoringEnabled=!0;var a=this;this.iconArr.forceArrange=function(){a.onResize(a,a.iconArr.monitor.minIconWidth)},$.subscribe("/integ/rhs",function(b,c){a.onResize(a)}),$.subscribe("mailsuite/appOpened",function(b,c){var d=zmsuite.getCenter(c)[0].getNodes()[0];d&&d.iconArr&&d.iconArr.monitor&&d.iconArr.isMonitoringEnabled&&a.onResize(a)})},onResize:function(a,b){var c;if(a.isSpaceAvailable(b)){var d=a.iconArr.monitor.hiddenElements.length;for(c=0;c<d;c++){var e=a.iconArr.monitor.hiddenElements.shift();if($(e).show(),!a.isSpaceAvailable(a.iconArr.monitor.minIconWidth))break}}else{var f=a.iconArr.monitor.groupToMonitor.find("li:visible").not(a.iconArr.monitor.moreIcon);for(c=f.length-1;c>=2&&!a.isSpaceAvailable();c--)a.hideElement(f[c]),a.iconArr.monitor.hiddenElements.unshift(f[c])}a.iconArr.monitor.hiddenElements.length>0&&$(a.iconArr.monitor.moreIcon).show()},initMonitor:function(a){if(!this.iconArr.isMonitoringEnabled){this.monitorElements();var b={groupToMonitor:a.groupToMonitor,hiddenElements:[],moreIcon:a.moreIcon,padding:a.padding,minIconWidth:a.minIconWidth,iconContainer:a.iconContainer};this.iconArr.monitor=b}},isSpaceAvailable:function(a){var b=this.iconArr.monitor.groupToMonitor,c=this.iconArr.monitor.padding.additionalPadding||0;$(this.iconArr.monitor.moreIcon[0]).is(":visible")||(c+=$(this.iconArr.monitor.moreIcon[0]).outerWidth()),c+=a||0;var d=this.iconArr.monitor.iconContainer.outerWidth();return!(b.outerWidth()+c>=d)},showElement:function(a){if(this.iconArr.isMonitoringEnabled){if(this.checkAndRemoveElementInHideArray(a),$(a).is(":visible"))return!1;this.isSpaceAvailable(this.iconArr.monitor.minIconWidth)?a.show():($(a).hide(),$(this.iconArr.monitor.moreIcon).show(),a.is(this.iconArr.monitor.moreIcon)||this.iconArr.isMonitoringEnabled!==!0||this.isElementPresentInHideArray(a)===-1&&this.iconArr.monitor.hiddenElements.push(a))}else a.show()},hideElement:function(a){this.iconArr.isMonitoringEnabled&&this.checkAndRemoveElementInHideArray(a),$(a).hide()},setListener:function(a,b){this.$el.off(a).on(a,function(a){var c,d,e,f,g=a.target||a.srcElement;c=$(g),c.hasClass("SCmb")||(d="I"===g.tagName?c:c.find("i").last(),f=c.parents("li").data("event"),d.length||(d=c),d.length?e=d.attr("class")||d.html():c.is("i")&&(e=c.attr("class")),e||(e=c.find("span").text()),e&&b(a,e,f))})},getIconArrForGroup:function(){var a=[];return this.iconArr&&(a=$.isArray(this.iconArr)?this.iconArr:this.iconArr.left.concat(this.iconArr.right)),a},hideGroup:function(a){var b,c,d,e;for(d=this.getIconArrForGroup(),this.iconObjArr=this.iconObjArr||[],e=this.iconObjArr.concat(this.iconRightArr),c=d.length,b=0;b<c;b++)d[b].groupId===a&&e[b].hide()},showGroup:function(a){var b,c,d,e;for(d=this.getIconArrForGroup(),this.iconObjArr=this.iconObjArr||[],e=this.iconObjArr.concat(this.iconRightArr||[]),c=d.length,b=0;b<c;b++)if(d[b].groupId===a){e[b].show();break}},unSelectGroup:function(a){var b,c,d;for(d=this.getIconArrForGroup(),c=d.length,b=0;b<c;b++)if(d[b].groupId===a){this.iconObjArr[b].unSelect();break}},paint:function(){var a,b,c,d,e,f;if(c=this.iconObjArr,f=this.iconRightArr,d=$("<div class='SC_flt' id='jsMSCenterIcon'></div>"),e=$("<div class='SC_frt'></div>"),this.$el.empty(),c)for(b=c.length,a=0;a<b;a++)d.append(c[a].paint());if(f)for(b=f.length,a=0;a<b;a++)e.append(f[a].paint());this.leftElemCustomClass&&d.addClass(this.leftElemCustomClass),this.rightElemCustomClass&&e.addClass(this.rightElemCustomClass),this.$el.append(e),this.$el.append(d)}};var e=function(a){this.headerArr=a&&a.list,this.iconClick=a&&a.clk,this.$el=$("<div class='SC_mhd'></div>")};e.prototype={push:function(a){this.headerArr=a},clear:function(){this.headerArr=[]},getDOMNode:function(){return this.$el},setinnerHTML:function(a){this.$el.html(a)},appendChild:function(a){this.$el.empty(),this.$el.append(a)},setListener:function(a,b){this.$el.off(a).on(a,function(a){var c,d,e=a.target||a.srcElement;c=$(e).closest("span"),d=c.data("data-event"),d&&b(d)})},paint:function(){if(this.headerArr)return this.$el.html(zmsTemplates.constructHeader(this.headerArr)),this.$el}};var f=function(a){a=a||{},this.id=a.id,this.count=a.count,this.customHeader=a.customHeader,this.centerArr=[],this.$el=$("<div class='SCmc'></div>"),a.customCenterClass&&this.$el.addClass(a.customCenterClass),this.init()};f.prototype={getNodes:function(){return this.centerArr},init:function(){this.centerArr.push(new c),
"2"!==this.count&&this.centerArr.push(new e),this.centerArr.push(new a({count:this.count}))},setId:function(a){this.id=a,this.$el[0].id=a},paint:function(){for(var a=0;a<this.centerArr.length;a++)this.centerArr[a].paint();this.customHeader||this.$el.append(this.centerArr[1].$el),this.centerArr[2]&&this.$el.append(this.centerArr[2].$el)}};var g=function(){this.$el=$("<div class='SC_Twpr'></div>")};g.prototype={push:function(a){this.$el.empty(),this.append(a)},getDOMNode:function(){return this.$el},append:function(a){this.$el.append(a)}};var h=function(){this.$el=$("<div class='SC_ptit'></div>"),this.headerArr=[],this.headerElemObj={}};h.prototype={push:function(a){this.headerArr=a},getDOMNode:function(){return this.$el},showElement:function(a){$(a).show()},hideElement:function(a){$(a).hide()},setListener:function(a,b){this.$el.off(a).on(a,function(a){var c,d;d=a.target||a.srcElement,c=$(d).closest("li").data("data-event"),c=c||$(d).attr("data-event"),c&&b(c,d)})},render:function(){var a,b,c,d,e,f,g,h,i=this.headerArr,j=0,k=0,l=0,m=[],n=[],o="";for(i.rIcons&&(k=i.rIcons.length),j=0;j<k;j++){for(a=i.rIcons[j],$.isArray(a)||(a=a.actionArr),b=a.length,l=0;l<b;l++)o="","right"===a[l].tooltipDir&&(o="ttr"),n.push(["LI",{child:[["B",{child:[["DIV",{attrs:{"class":"SC_hd"}}],["SPAN",{attrs:{"class":"SC_ttip "+o,"data-tooltip":a[l].tooltip},child:a[l].html?a[l].html:[["I",{attrs:{"class":a[l].iconClass}}]]}]]}]]}]);m.push(["UL",{child:n}]),n=[]}d=["DIV",{attrs:{"class":"SCmb"},child:[["DIV",{attrs:{"class":"SC_frt"},child:m}]]}],c=["DIV"],e=_zm.getDOM(c);var p=i.text,q="undefined"==typeof p?"undefined":babelHelpers["typeof"](p);for(e.appendChild("object"===q?_zm.getDOM(p):document.createTextNode("string"===q?p:"")),this.$el.empty(),f=_zm.getDOM(d),this.$el.append(f),this.$el.append(e),this.headerElemObj={},j=0;j<k;j++)for(a=i.rIcons[j],$.isArray(a)||(h=a.groupId,a=a.actionArr),b=a.length,l=0;l<b;l++)g=this.$el.find(".SCmb ul").eq(j),h&&(this.headerElemObj[h]=g,h=""),g.find("li").eq(l).data("data-event",a[l].data)},hideGroup:function(a){a&&this.headerElemObj[a]&&this.headerElemObj[a].hide()},showGroup:function(a){a&&this.headerElemObj[a]&&this.headerElemObj[a].show()}};var i=function(){this.$el=$('<div class="zmPreviewResize"></div>'),this.horizontalPreviewMinWidth=40,this.verticalPreviewMinWidth=30};i.prototype={init:function(a){this.mouseEvent(a)},setPreviewSize:function(a){var b,c;return c=a.percent,"horizontal"===a.previewType?(c=c<this.horizontalPreviewMinWidth?this.horizontalPreviewMinWidth:c,$(this.$el).parent().css({top:100-c+"%",width:"100%"}),b=$(this.$el).parent().parent(),b.find(".SC_mclst").css({bottom:c+"%",right:"0px"})):(c=c<this.verticalPreviewMinWidth?this.verticalPreviewMinWidth:c,$(this.$el).parent().css("width",c+"%"),b=$(this.$el).parent().parent(),b.find(".SC_mclst").css({right:c+"%",bottom:"0px"}).removeClass("SC_swB")),c},mouseEvent:function(a){var b,c,d,e=this,f=function(a){$(e.$el).addClass("zmPRon"),c=$(e.$el).data("previewType"),b=e.$el.parent().parent()[0].getBoundingClientRect()},g=function(){e.percent=d,e.setValue(e),$(this).off("mousemove.zmresizehandler")},h=function(f){d=e.movePreview({event:f,type:c,boundingValue:b}),$.publish("zmsuite/previewResize",{previewSize:d}),a&&"horizontal"!==a.previewType&&zmsuite.getCenter()[0].getNodes()[0].iconArr&&zmsuite.getCenter()[0].getNodes()[0].iconArr.isMonitoringEnabled&&(zmsuite.getCenter()[0].getNodes()[0].iconArr.forceArrange(),zmPreviewTemplate.setPreviewHeaderHeight()),zmStreamsApp.util.adjustWidth(),zmPreviewTemplate.setPreviewHeaderHeight()},i={target:this.$el,mousedownClbk:f,mousemoveClbk:h,mouseupClbk:g};zmUtil.resizeHandler(i)},setValue:function(a){$(a.$el).removeClass("zmPRon"),zmsuite.getCenter()[0].getNodes()[0].iconArr.isMonitoringEnabled&&zmsuite.getCenter()[0].getNodes()[0].iconArr.forceArrange(),$.publish("zmsuite/previewResize",{previewSize:a.percent,completed:!0}),zmAdHocSettings.setMailPreviewSize(parseInt(a.percent))},movePreview:function(a){var b,c;"horizontal"===a.type?(b=a.event.clientY-a.boundingValue.top,c=100*b/a.boundingValue.height):(b=a.event.clientX-a.boundingValue.left-3,c=100*b/a.boundingValue.width),c=100-c,c=c>75?75:c,c=c<30?30:c;var d=this.setPreviewSize({base:a.base,percent:c,previewType:a.type});return d}};var j=function(){this.$el=$('<div class="SC_pv zmHideV"></div>'),this.headerObj=new h,this.contentObj=new g,this.resizeContainer=new i};j.prototype={getNodes:function(){return[this.headerObj,this.contentObj]},show:function(a){var b=this;this.headerObj.render();var c="SC_pv";return a&&a.fromMail&&"horizontal"===a.previewType&&(c+=" SC_w100"),this.$el.parent().removeClass("SC_swB"),this.$el.attr("class",c).css("top","0px"),this.$el.append(this.contentObj.$el),this.$el.append(this.headerObj.$el),a&&a.fromMail?(this.$el.append(this.resizeContainer.$el),this.resizeContainer.init(a),this.resizeContainer.$el.data("previewType",a.previewType),a.percent=zmAdHocSettings.getMailPreviewSize(),this.resizeContainer.setPreviewSize(a)):this.$el.parent().parent().find(".SC_mclst").css({right:"63.5%"}),this.$el.addClass("shw").removeClass("zmHideV"),a&&"horizontal"===a.previewType?(b.$el.parent().addClass("SC_swB").removeClass("SC_sw"),0):(b.$el.parent().addClass("SC_sw"),void setTimeout(function(){b.$el.removeClass("zmHideV")},200))},close:function(){var a=this;return this.headerObj.$el.detach().empty(),this.contentObj.$el.detach().empty(),this.$el.append(this.headerObj.$el),this.$el.append(this.contentObj.$el),this.$el.parent().removeClass("SC_sw"),this.$el.removeClass("shw"),this.$el.parent().parent().find(".SC_mclst").css({right:"0px",bottom:"0px"}),this.$el.parent().parent().find(".SC_frt.SC_prm").css("right","15px"),this.$el.hasClass("SC_w100")?(a.$el.parent().removeClass("SC_swB"),this.$el.removeClass("SC_w100"),a.$el.addClass("zmHideV"),0):void setTimeout(function(){a.$el.addClass("zmHideV")},200)}};var k=function(a,b){this.node=a,this.obj=b,this.noPreview=b.noPreview,this.customHeader=b.customHeader,this.centerArr=[],this.$el=$("<div class='SCm'></div>"),this.init()};return k.prototype={init:function(){this.centerArr.push(new f($.extend(this.obj,{count:this.node}))),this.noPreview||this.centerArr.push(new j)},paint:function(){var a,b;a=this.centerArr[0],b=a.getNodes(),a.paint(),this.customHeader||(a.$el.find(".SC_mhd").length?a.$el.find(".SC_mhd").after(b[0].$el):a.$el.find(".SC_mclst").length&&a.$el.find(".SC_mclst").append(b[0].$el)),this.$el.append(a.$el),this.noPreview||a.$el.append(this.centerArr[1].$el),this.$el.parent().length||zmsTemplates.appendToCenter(this.$el)}},k}(),window.zmRight=function(){function a(){this.$el=$("<div class='SCr SC_show'><div class='zoSidebar_container'></div></div>")}return a.prototype={paint:function(){this.$el.parent().length||zmsTemplates.appendToRight(this.$el)}},a}(),function(){function a(){this.showList=!0,this.mapObject=void 0,this.classObject=void 0,this.entityClass=void 0,this.headerType=void 0,this.headerObject=void 0,this.listType=void 0,this.hasChild=void 0,this.listId=void 0,this.isListArr=void 0,this.listObject=void 0,this.id=void 0,this.fn=void 0,this.el=void 0,this.trashId=void 0,this.hasCount=void 0,this.childToggleFn=void 0,this.dragHelper=void 0,this.dragEventObj=void 0,this.disableSelection=!1}var b,c=zmail.Core.Namespaces,d=c.get("zmState.leftStateInfo"),e=function(a,b,c,d){var e={};return e.name=a[b.name]||a.name||"",e.count=a[b.count]||a.count||"",e.seq=a[b.seq]||a.seq||"",e.id=a[b.id]||a.id||"",e.parentId=a[b.parentId]||a.parentId||"",e.color=a[b.color]||a.color||"",e.hasChild=a[b.hasChild]||a.hasChild||"",e.check=a[b.check]||a.check||"",e.expChild=a[b.expChild]||a.expChild||"",e.dropdown=a[b.dropdown]||a.dropdown||"",e.licon=a[b.licon]||a.licon||"",e.ricon=a[b.ricon]||a.ricon||"",e.isSel=a[b.isSel]||a.isSel||"",e.showList=a[b.showList]||a.showList||"",e.shared=a[b.shared]||a.shared||"",e.OZUID=a[b.OZUID]||a.OZUID||"",e.hideNode=a[b.hideNode]||a.hideNode||!1,e.notBold=b.notBold||!1,e.addNewType=a[b.addNewType]||a.addNewType||!1,e.customNode=a[b.customNode]||a.customNode||!1,e.customNodeHtmlTemplate=a[b.customNodeHtmlTemplate]||a.customNodeHtmlTemplate||"",e.sharedFolderToolTip=a[b.sharedFolderToolTip]||a.sharedFolderToolTip||"",e.txtNodeClass=a.txtNodeClass,e.rowTitle=a.rowTitle,c&&(e.accessText=zmCenterListing.getMappedClass(b,c,a,"accessText")),d&&(e.entityClass=zmCenterListing.getMappedClass(b,d,a,"entityClass")),e},f=function(a,b){var c,e,f=d.utils.getKeyFromAppId(zmApp.currentApp)||b.getAppKey();return e=d.utils.checkForPresence(a,f),e||(c=_zm.getCookie("ZM-left-"+a),c&&(_zm.removeCookie("ZM-left-"+a),e="s"!==c&&d.addEntry(f,a))),e};a.prototype={constructor:a,rebindChildToggleEvents:function(){this.childToggleFn&&this.setChildToggle(this.childToggleFn)},setChildToggle:function(a){var b=this,c=b.el;a=a||_.noop,this.childToggleFn=this.childToggleFn===a?this.childToggleFn:a,"function"==typeof this.childToggleFn&&c.off("click").on("click","i.msi-rarrow","i.msi-arrow45",function(){return function(a){a.preventDefault(),a.stopPropagation();var c,d,e=a.type,f=a.target||a.srcElement;f=d=$(f);var g=2,h=["msi-rarrow","msi-arrow45","SClbl"];for(c in h)if(f.hasClass(h[c])){g=1;break}f.hasClass("SC_tre")||(f=f.parents(".SC_tre")),f.find("span:first").removeClass("SC_new"),f.length||(f=d,f.hasClass("SC_ltl")||(f=f.parents(".SC_ltl")));var i={};i.zmsData=f.data("zmsData"),i.zmsData.type=e,i.zmsData.colInfo={column:g},i.zmsData.eventInfo=a;var j=this;b.childToggle(i,f,j,b)}}())},push:function(a){a=a||{},this.disableSelection=Boolean(a.disableSelection),this.avoidStateSave=Boolean(a.avoidStateSave),this.showList=Boolean(a.showList),this.isHeaderSel=a.isHeaderSel,this.mapObject=a.mapObject,this.classObject=a.classObject,this.entityClass=a.entityClass,this.headerObject=a.dataObject&&a.dataObject.headerObject,this.headerObject&&"function"==typeof this.headerObject.onAdd&&(this.headerObject.onAdd=_.debounce(this.headerObject.onAdd,400)),this.listType=a.type,this.hasChild=Boolean(a.hasChild),this.hasCountObject=Boolean(a.hasCountObject),this.listId=a.listId,this.trashId=a.trashId,this.listObject=a.dataObject&&a.dataObject.listObject,this.hasCountObject&&(this.countObject=a.dataObject&&a.dataObject.countObject),this.hasChild&&(this.childObject=a.dataObject&&a.dataObject.childObject),this.id=a.id,this.clearEl(),this.isListArr=Boolean(a.isListArr),this.childToggleFn=a.childToggleFn||this.childToggleFn,this.listObject&&this.listObject instanceof Array&&(this.isListArr=!0),this.listObject||(this.listObject=this.isListArr?[]:{})},setListener:function(a,b){this.el.off(a).on(a,b)},setLayerId:function(a){this.id=a},setHeaderObject:function(a){this.headerObject=a},setMapObject:function(a){this.mapObject=a},setCountObject:function(a){this.countObject=a},setChildObject:function(a){this.childObject=a},setListId:function(a){this.listId=a},setType:function(a){this.listType=a},setListObject:function(a){this.listObject=a},getListObject:function(){return this.listObject},getHeaderObject:function(){return this.headerObject},getChildObject:function(){return this.childObject},editHeader:function(a){this.headerObject=a;var b=this.getHeaderDOM();$("#"+this.id).children().first().remove(),$("#"+this.id).prepend(b)},hasUnreadChild:function(a){var b,c;if(!this.isListArr&&this.countObject&&this.childObject&&this.childObject[a]){c=this.childObject[a].CH;for(b in c)if(c.hasOwnProperty(b)){if(this.countObject[b]&&this.countObject[b].c>"0")return!0;this.childObject[b]&&this.childObject.CH&&this.hasUnreadChild(b)}}},getRowDom:function(b,c,d){var f,g=this.listType,h=e(b,c,this.classObject,this.entityClass);if(!this.isListArr&&(h.id=d,this.countObject)){f=this.countObject||"";var i=f[d]||"";i&&(h.count=i[c.count]||i.count||0,h.parentId=i[c.parentId]||i.parentId||-1)}var j=a.views.listDom(h,g);this.hasUnreadChild(d)&&!h.notBold&&j.find(".zmTreTxt").addClass("SC_bld");var k={layerId:this.id,type:"list"};c.infoObject&&(k.info=c.infoObject);var l={};if(l.rowInfo=k,this.isListArr)l.rowObject=b;else{var m=d,n=b;f=this.countObject||"";var o=f[m],p={};if(p[m]=n,l.rowObject=p,o){var q={};q[m]=o,l.countObject=q}}return j.data("zmsData",l),j},getUserObjRow:function(a){var b,c={};if(this.isListArr){var d=this.mapObject,e=a[d.id]||a.id||"";c.id=e,c.data=a}else for(b in a)a.hasOwnProperty(b)&&(c.id=b,c.data=a[b]);return c},getNodeIndex:function(a){var b,c=-1,d=this.mapObject,e=this.listObject.length;for(b=0;b<e;b+=1){var f=this.listObject[b][d.id]||this.listObject[b].id||"";if(f===a){c=b;break}}return c},getFirstObj:function(a){var b;for(b in a)if(a.hasOwnProperty(b))return a[b]},editNode:function(a,b,c){if(a){var d,e,f,g,h,i,j,k;if(d=$.extend({},a),e=this.id,f=$("#"+e),b=b||this.mapObject,g=this.getUserObjRow(d),h={mode:"edit",nObj:d},i=f.find("#"+g.id),this.hasCountObject&&"undefined"!=typeof this.countObject[g.id]&&(h.pId=this.countObject[g.id].p),this.updateListObject(h),i.length&&(j=this.getRowDom(g.data,b,g.id))){if(i.hasClass("Stre")&&j.addClass("Stre"),i.find("span").eq(0).hasClass("SC_new")&&j.find("span").eq(0).addClass("SC_new"),i.find(".SC_ct").hasClass("SC_new")&&j.find(".SC_ct").addClass("SC_new"),k=i.css("padding-left"),k=parseInt(k.replace("px","")),i.replaceWith(j),c&&this.hasChild){$("#"+g.id+"cld").remove();var l,m,n,o=g.data;for(l in o)o.hasOwnProperty(l)&&(m=o.HC,n=o.E);m&&n&&this.consChild(g.id,j,k,!0)}j.css("padding-left",k)}}},moveNode:function(a,b,c,d,e){if(a){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=0,x=0,y=!0;for(v in a)a.hasOwnProperty(v)&&(l=v);if(!l||!c||l!==c){if(o=$.extend({},a),u=$.extend(!0,{},a),this.countObject&&(p=this.countObject[l].p),s={mode:"delete",nObj:o,pId:p,NoRecursiveDelete:!0},this.updateListObject(s),o=u,!this.isListArr){d&&"-1"!==d?this.childObject[d]&&(t=this.childObject[d].CH):t=this.listObject;var z=this.mapObject.sequence||"SE";c&&(x=t[c][z]),this.getFirstObj(o)[z]=x+1}s={mode:"add",nObj:o,pId:d},this.updateListObject(s),g=this.el.find("#"+l).eq(0),r=parseInt(g.css("padding-left")),i=g.clone(!0),g.remove(),m=this.el.find("#"+l+"cld").eq(0),m.length&&(n=m.clone(!0)),p&&(q=this.el.find("#"+p+"cld").eq(0),q.children(".SC_tre").length||(q.remove(),this.el.find("#"+p+" i.msi-rarrow").remove())),f=this.createNodeDetails(d,e),c?(j=this.el.find("#"+c).eq(0),k=this.el.find("#"+c+"cld"),k.length&&(j=k.eq(0))):j=this.el.find(".SC_ldt"),d&&(h=this.el.find("#"+d),h.length&&(w=parseInt(h.css("padding-left"))),this.el.find("#"+d+"cld").length&&(h=this.el.find("#"+d+"cld"))),f.padLeft?i.css("padding-left",f.padLeft):i.removeAttr("style"),m.remove(),d?c?j.after(i):(h=this.el.find("#"+d+"cld"),h.length?h.prepend(i):(this.consChild(d,$("#"+d),w,!0),y=!1)):c?j.after(i):j.prepend(i),n&&n.length&&(n.find(".SC_tre").each(function(){var a,b;a=parseInt($(this).css("padding-left"))-r,b=a+(f.padLeft||21),$(this).css("padding-left",b+"px")}),y&&this.el.find("#"+l).after(n)),p&&"-1"!==p&&this.removeHighlightFromParent(p),this.hasUnreadChild(d)&&this.highlightParent(d,this.el)}}},deleteNode:function(a,b){if(a){var c=$.extend({},a),d=this.createNodeDetails(),e=d.domEl,f=this.getUserObjRow(c);if(e.find("#"+f.id).remove(),e.find("#"+f.id+"cld").remove(),this.hasChild){var g=f.id,h=this.countObject[g];if(h&&"-1"!==h.p){var i=h.p,j=e.find("#"+i+"cld");if(j.length&&0===j.children().length){j.remove();var k=e.find("#"+i);k.find("i.msi-rarrow").remove()}}}var l={mode:"delete",nObj:c,pId:b};this.updateListObject(l)}},createNodeDetails:function(a,b){var c,d,e={},f=0,g=this.el.find(".SC_ldt");if(a){d=this.el.find("#"+a);var h=d,i={zmsData:h.data("zmsData")};if(h.find(".msi-rarrow").length&&!h.find(".msi-arrow45").length){var j,k,l=i.zmsData.rowObject;for(k in l)l.hasOwnProperty(k)&&(j=k);b?(c=parseInt(h.css("padding-left")),this.consChild(j,h,c,!0),this.hideChild(h.find(".msi-rarrow"),j)):this.showChild(h.find(".msi-rarrow"),j,h),g=this.el.find("#"+a+"cld")}if(g.length||(g=$("<div class = 'SC_parcnt' id='"+a+"cld'></div>"),this.el.find("#"+a).after(g)),!d.find(".msi-rarrow").length){var m=d.children("span:first");m.length&&!m.hasClass("SC_ct")||d.prepend($("<span />")),b?d.children("span:first").append("<i class='msi-rarrow'></i>"):d.children("span:first").append("<i class='msi-rarrow msi-arrow45'></i>")}f=parseInt(d.css("padding-left"))+12}return e.domEl=g,e.padLeft=f,e},addClassAtStart:function(a,b){if("1"===String(this.listType)){var c=this.el.find("#"+a),d=c.find("."+b);if(!d.length){var e=$("<i></i>");e.addClass(b),c.prepend(e)}}},removeClassAtStart:function(a,b){if("1"===String(this.listType)){var c=this.el.find("#"+a),d=c.find("."+b);d.length&&d.remove()}},addClass:function(a,b){var c=this.el.find("#"+a).eq(0);c.length&&c.addClass(b)},removeClass:function(a,b){var c=this.el.find("#"+a).eq(0);c.length&&c.removeClass(b)},hideNode:function(a){var b,c,d,e;"1"===String(this.listType)&&(b=this.mapObject.hideNode||"hideNode",c=this.el.find("#"+a).eq(0),c.length&&(a in this.listObject&&(this.listObject[a][b]=!0),c.hide({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)}),"more"!==a&&"less"!==a&&"object"===babelHelpers["typeof"](this.childObject)&&a in this.childObject&&(e=c.find("span:first").children().first(),e.hasClass("msi-arrow45")&&(d=this.el.find("#"+a+"cld").eq(0),d.hide({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)})))))},showNode:function(a){var b,c,d,e;"1"===String(this.listType)&&(b=this.mapObject.hideNode||"hideNode",c=this.el.find("#"+a).eq(0),c.length&&(this.listObject[a][b]=!1,c.show({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)}),"more"!==a&&"less"!==a&&"object"===babelHelpers["typeof"](this.childObject)&&a in this.childObject&&(e=c.find("span:first").children().first(),e.hasClass("msi-arrow45")&&(d=this.el.find("#"+a+"cld").eq(0),d.show({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)})))))},appendNode:function(a,b,c){if(a){var d,e=$.extend({},a),f=this.createNodeDetails(c),g=f.domEl;b=b||this.mapObject;var h=this.getUserObjRow(e),i=this.getRowDom(h.data,b,h.id);if(c&&f.padLeft&&i.css("padding-left",f.padLeft),!this.isListArr){var j=this.childObject&&this.childObject[c]&&this.childObject[c].CH;j||(j=this.listObject);var k,l=0;if(j)for(k in j)j.hasOwnProperty(k)&&l<j[k].SE&&(l=j[k].SE);this.getFirstObj(e).SE=l+1}var m={mode:"add",nObj:e,pId:c};this.updateListObject(m),c?(this.consChild(c,i,f.padLeft,!0),d=$("#"+c),this.showChild(d.find("i.msi-rarrow"),c,d)):(g.append(i),this.callStaticHeaderAndScrollBarFn())}},prependNode:function(a,b,c){if(a){var d=$.extend({},a),e=this.createNodeDetails(c),f=e.domEl;b=b||this.mapObject;var g=this.getUserObjRow(d),h=this.getRowDom(g.data,b,g.id);c&&e.padLeft&&h.css("padding-left",e.padLeft),f.prepend(h),this.callStaticHeaderAndScrollBarFn(),this.isListArr||(this.getFirstObj(d).SE=1);var i={mode:"add",nObj:d,pId:c};this.updateListObject(i)}},insertNodeBefore:function(a,b,c,d){if(a){var e=$.extend({},a),f=this.createNodeDetails(d),g=f.domEl;b=b||this.mapObject;var h=this.getUserObjRow(e),i=this.getRowDom(h.data,b,h.id);if(d&&f.padLeft&&i.css("padding-left",f.padLeft),c){if(g.find("#"+c).before(i),!this.isListArr){var j=this.getRowObj(c),k=this.mapObject.sequence||"SE",l=this.getFirstObj(j)[k];this.getFirstObj(e)[k]=l}var m={mode:"add",nObj:e,rel:{id:c,mode:"before"},pId:d};this.updateListObject(m)}}},insertNodeAfter:function(a,b,c,d){if(a){var e=$.extend({},a),f=this.createNodeDetails(d),g=f.domEl,h=g;b=b||this.mapObject;var i=this.getUserObjRow(e),j=this.getRowDom(i.data,b,i.id);if(d&&f.padLeft&&j.css("padding-left",f.padLeft),c){if(h=g.find("#"+c),this.hasChild&&g.find("#"+c+"cld").length&&(h=g.find("#"+c+"cld")),!this.isListArr){var k=this.getRowObj(c),l=this.mapObject.sequence||"SE",m=this.getFirstObj(k)[l];this.getFirstObj(e)[l]=m+1}var n={mode:"add",nObj:e,rel:{id:c,mode:"after"},pId:d};this.updateListObject(n)}h.after(j),this.callStaticHeaderAndScrollBarFn()}},insertNodeAt:function(a,b,c,d){if(a){var e=$.extend({},a),f=this.createNodeDetails(d);b=b||this.mapObject;var g=this.getUserObjRow(e),h=this.getRowDom(g.data,b,g.id);if(d&&f.padLeft&&h.css("padding-left",f.padLeft),!this.isListArr){var i=this.mapObject.sequence||"SE";this.getFirstObj(e)[i]=parseInt(c)}var j={mode:"add",nObj:e,pId:d};this.updateListObject(j)}},getRowObj:function(a){return this.getRowObjfromId(a)},clearNew:function(a){this.el.find("#"+a+" .SC_new").removeClass("SC_new")},getRowObjfromId:function(a){if(a){var b,c={};if(this.isListArr){var d=this.getNodeIndex(a);c=this.listObject[d]}else if(this.hasCountObject&&this.countObject){var e=this.countObject[a]||{},f=e.p;if("-1"!==f&&f){if(this.hasChild&&this.childObject&&this.childObject[f]&&this.childObject[f].CH){var g=this.childObject[f].CH[a];g.p=f,c[a]=g}}else b=this.listObject[a],c[a]=b}else b=this.listObject[a],c[a]=b;return c}},highlightNode:function(a,b,c){var d;a&&(d=b.find("#"+a),c&&d.find(".SC_ct").addClass("SC_new"),d.find(".zmTreTxt").hasClass("SC_bld")||d.find(".zmTreTxt").addClass("SC_bld"))},removeHighlightFromNode:function(a){var b;b=this.el.find("#"+a).eq(0),b.length&&(b.find(".SC_ct").removeClass("SC_new"),b.find(".zmTreTxt").removeClass("SC_bld"))},highlightParent:function(a,b,c,d,e){var f;if(a)f=b.find("#"+a),c&&f.find(".SC_ct").addClass("SC_new"),d&&e&&!f.find(".msi-arrow45").length&&f.find("span:first").addClass("SC_new"),f.find(".zmTreTxt").hasClass("SC_bld")||f.find(".zmTreTxt").addClass("SC_bld"),"-1"!==String(a)&&"-1"!==this.countObject[a].p&&this.highlightParent(this.countObject[a].p,b,!1,!0,e);else{var g,h,i=this.childObject;for(g in i){var j=i[g].CH;for(h in j)parseInt(this.countObject[h].c)>0&&(c&&b.find("#"+a).addClass("SC_new"),b.find("#"+g+" .zmTreTxt").addClass("SC_bld"),this.countObject[g].p!==-1&&this.highlightParent(this.countObject[g].p,b,!1,!0))}}},removeHighlightFromParent:function(a,b){var c,d,e;c=$("#"+a),d=$("#"+a+"cld"),e=this.countObject[a].c,c.find(".SC_ct").removeClass("SC_new"),b||e<="0"&&!d.find("span.SC_bld").length&&c.find(".zmTreTxt").removeClass("SC_bld"),d.find(".SC_ct.SC_new").length||c.find("span.SC_new").removeClass("SC_new"),"-1"!==String(this.countObject[a].p)&&(e=this.countObject[this.countObject[a].p].c,this.removeHighlightFromParent(this.countObject[a].p))},updateCount:function(a,b,c,d,e,f){var g,h,i,j,k=this.mapObject&&this.mapObject.notBold;g=this.getRowObjfromId(a),this.countObject?(j=this.countObject[a],h="c"):(j=g[a]||g,h=this.mapObject.count);var l=!!f&&f.state;switch(i=parseInt(j[h]),b){case"dec":i>0&&(j[h]=i-1);break;case"inc":j[h]=i+1;break;case"bdec":i>0&&(j[h]=i-c);break;case"binc":j[h]=i+c;break;case"upd":j[h]=c}j[h]<0&&(j[h]=0),this.editNode(g,this.mapObject),k||(this.hasChild?("inc"!==b&&"binc"!==b&&"upd"!==b||parseInt(j[h])&&this.highlightParent(a,this.el,d,!1,e),"dec"!==b&&"bdec"!==b&&"upd"!==b||parseInt(j[h])||this.removeHighlightFromParent(a)):("inc"!==b&&"binc"!==b&&"upd"!==b||parseInt(j[h])&&("read"!==l?this.highlightNode(a,this.el,d):this.removeHighlightFromNode(a)),"dec"!==b&&"bdec"!==b&&"upd"!==b||parseInt(j[h])||this.removeHighlightFromNode(a)))},isLayerExpanded:function(){return!f(this.id,zmsuite.getLeft())},getHeaderDOM:function(){var a,b;if(this.headerObject){var c,d=this.mapObject||"",g=this.headerObject,h=e(g,d),i=$("<div class='SC_ct' style='text-align: right;'><b></b></div>"),j=!1;this.avoidStateSave||(a=f(this.id,zmsuite.getLeft()),this.showList=!a);var k=h.isSel?"SC_tre":"";if(b=$('<div class="SC_ltl '+k+'">'),(g.onAdd||g.settingsOption)&&(b.append(i),i=i.find("b").eq(0),j=!0),h.count<0&&(h.count=0),g.settingsOption){var l=$("<i class='"+g.settingsObject.className+"'></i>");l.data("action","settings"),g.settingsObject.tooltip&&l.attr("title",g.settingsObject.tooltip),i.append(l)}if(h.count&&j){var m=$(h.count);g.addIconTooltip&&m.attr("title",g.addIconTooltip),m.data("action","add"),i.append(m)}var n=$("<div class='zmTreWra'></div>");c=$('<span class="zmTreTxt">'),c.text(h.name),n.append(c),b.append(n),h.id&&b.attr("id",h.id);var o={type:"header",layerId:this.id};d.infoObject&&(o.info=d.infoObject),b.data({zmsData:{rowObject:g,rowInfo:o}})}return b},consChild:function(a,b,c,d){var e,f,g,h,i=this.mapObject,j=[],k=this.childObject[a].CH;if(!k)return b;if($("#"+a+"cld").remove(),b=b.add("<div class='SC_parcnt' id='"+a+"cld'></div>"),this.callStaticHeaderAndScrollBarFn(),c+=12,!this.isListArr){for(g in k)if(k.hasOwnProperty(g)){var l=this.getRowDom(k[g],i,g);l=$(l).css("padding-left",c);var m=k[g][i.expChild]||k[g].expChild||"",n=k[g][i.hasChild]||k[g].hasChild||"";m&&n&&(l=this.consChild(g,l,c,!0)),j[k[g].SE-1]=l}for(h=$(b[1]),f=j.length,e=0;e<f;e+=1)h.append(j[e]),this.callStaticHeaderAndScrollBarFn()}if(d){var o=$(b[0]).find(".msi-rarrow");o.addClass("msi-arrow45"),b.eq(0).after(h),this.callStaticHeaderAndScrollBarFn()}return b},getListDOM:function(){if(this.listObject){var b,c,d=this.listObject,e=this.mapObject||"",f=this.showList?"":"display:none",g=this.listId||"",h=a.views.getLeftRowsContainerDom({id:g,style:f});if(this.isListArr){var i,j=d.length;for(i=0;i<j;i+=1)b=d[i],c=this.getRowDom(b,e),h.append(c)}else{var k,l,m=[];for(k in d)if(d.hasOwnProperty(k)){b=d[k],c=this.getRowDom(b,e,k);var n=b[e.expChild]||b.expChild||"",o=b[e.hasChild]||b.hasChild||"";b[e.sequence]?b[e.sequence]=parseInt(b[e.sequence]):b.sequence&&(b.sequence=parseInt(b[e.sequence]));var p=b[e.sequence]||b.sequence||"";if(o&&n&&("1"===String(this.listType)||"6"===String(this.listType))&&this.childObject){var q=15;c=this.consChild(k,c,q)}p?m[p-1]=c:m.push(c)}for(l=0;l<m.length;l+=1)m[l]&&h.append(m[l])}return this.hasChild&&!e.notBold&&this.highlightParent(void 0,h),h}},showChild:function(a,b,c){var d,e=this.el;a.addClass("msi-rarrow msi-arrow45"),e.find("#"+b+"cld").length?e.find("#"+b+"cld").show({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)}):(d=parseInt(c.css("padding-left")),this.consChild(b,c,d,!0)),this.updateExpCollapseState(e.find("#"+b).eq(0),!0)},hideChild:function(a,b){a.removeClass("msi-arrow45");var c=this.el;c.find("#"+b+"cld").eq(0).hide({duration:0,easing:"_default",queue:!1,complete:this.callStaticHeaderAndScrollBarFn.bind(this)}),this.updateExpCollapseState(c.find("#"+b).eq(0),!1)},childToggle:function(a,b,c,d){var e,f,g=a.zmsData.rowObject;c=$(c);for(f in g)g.hasOwnProperty(f)&&(e=f);c.hasClass("msi-arrow45")?d.hideChild(c,e):d.showChild(c,e,b)},updateExpCollapseState:function(a,b){var c={};this.childToggleFn&&(c.zmsData=a.data("zmsData"),this.childToggleFn(c,a,b)),this.callStaticHeaderAndScrollBarFn()},recursiveChildDelete:function(a){if(this.childObject&&this.childObject[a]){var b=this.getRowObjfromId(a)[a];b.HC=0,b.E=0;var c,d=this.childObject[a].CH;for(c in d)d.hasOwnProperty(c)&&this.recursiveChildDelete(c);delete this.childObject[a]}},clearChild:function(a){var b=this.getRowObjfromId(a);this.clearChildObj(a),this.editNode(b,this.mapObject,!0)},clearChildObj:function(a){var b,c=this.getRowObjfromId(a);this.childObject[a]&&this.recursiveChildDelete(a);for(b in c)c.hasOwnProperty(b)&&(c[b].HC=0,c[b].E=0)},updateListObject:function(a){var b,c,d,e,f,g,h,i,j,k=a.mode,l=a.nObj;if(this.isListArr)if("add"===k){f=a.rel&&a.rel.id?a.rel.id:"";var m=a.rel&&a.rel.pos?a.rel.pos:"";f&&m?"before"===m?(e=this.getNodeIndex(f),e!==-1&&this.listObject.splice(e,0,l)):"after"===m&&(e=this.getNodeIndex(f),e!==-1&&this.listObject.splice(e+1,0,l)):this.listObject.push(l)}else"edit"===k?(g=this.mapObject,h=l[g.id]||l.id||"",e=this.getNodeIndex(h),this.listObject[e]=l):"delete"===k&&(g=this.mapObject,h=l[g.id]||l.id||"",e=this.getNodeIndex(h),this.listObject.splice(e,1));else{var n=a.pId||"-1";if(f=a.rel||"","add"===k||"edit"===k)for(c in l)if(this.hasCountObject&&(this.countObject[c]?"-1"!==n?this.countObject[c].p=n:this.countObject[c].p="-1":this.countObject[c]={p:n,c:0}),n&&"-1"!==n){if(this.childObject[n]&&this.childObject[n].CH){for(d in this.childObject[n].CH)this.childObject[n].CH[d].SE>=l[c].SE&&this.childObject[n].CH[d].SE++;this.childObject[n].CH[c]=l[c]}else{this.childObject[n]={CH:{}},this.childObject[n].CH[c]=l[c],b=this.getRowObjfromId(n);for(c in b)b.hasOwnProperty(c)&&(b[c].HC=1)}n in this.listObject&&(this.listObject[n].HC=1)}else{i=this.mapObject.sequence||"SE",j=l[c][i];for(d in this.listObject){var o=this.listObject[d][i];o>=j&&(this.listObject[d][i]=o+1)}this.listObject[c]=l[c]}else if("delete"===k){var p;for(c in l){p=n&&"-1"!==String(n)?this.childObject[n].CH:this.listObject,i=this.mapObject.sequence||"SE",j=p[c][i];for(d in p){var q=p[d][i];q&&q>j&&(p[d][i]=q-1)}n&&"-1"!==String(n)&&(a.NoRecursiveDelete||this.clearChildObj(c),$.isEmptyObject(this.childObject[n].CH)&&(delete this.childObject[n],this.clearChildObj(n))),delete p[c]}n in this.listObject&&this.childObject[n]&&0===Object.keys(this.childObject[n].CH).length&&(this.listObject[n].HC=0)}}},clearEl:function(){this.el=a.views.getLeftLayerContainerDom({id:this.id}),"2"===String(this.listType)&&this.el.addClass("SC_lblpad"),this.callStaticHeaderAndScrollBarFn()},constructLayer:function(){if(this.headerObject||this.listObject){this.clearEl();var a=this.el,b=this.getHeaderDOM(),c=this.getListDOM();return a.append(b),a.append(c),this.dragEventObj&&this.attachDragDropEvents(),a}},onMouseMove:function(a,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y="",z=!0,A=this;if(x=a.target||a.srcElement,x=$(x),s=x,t=c.fromData,o=x.parents(c.allowedParents),s=x.closest(".SC_tre"),s.length||(s=x.closest(".SC_ltl")),zmUtil.removeDocSelection(),j=$("#zm_mailLeft"),u=$("#zm_lftree"),k=j.offset(),h=a.pageY,q=a.pageX,d-h>0?r="top":d-h<=0&&(r="bottom"),q<k.left+j.width()&&(h-k.top<50&&h-k.top>0&&"top"===r?(u[0].scrollTop-=20,this.removeDragHelper()):k.top+j.height()-h<50&&"bottom"===r&&(u[0].scrollTop+=20,this.removeDragHelper())),!o.length)return this.removeDragHelper(),void zmsuite.showDragHandler(a,!1,c.helperText);if(!s.length){if(x=x.closest(".SC_fdrag"),!x.length)return this.removeDragHelper(),void zmsuite.showDragHandler(a,!1,c.helperText);if(x.prev().hasClass("SC_tre"))s=x.prev(),y="next";else if(x.next().hasClass("SC_tre"))s=x.next(),y="prev";else if(x.parent().hasClass("SC_parcnt"))s=x.parent().prev(),y="next";else{if(!x.prev().prev().hasClass("SC_tre"))return this.removeDragHelper(),void zmsuite.showDragHandler(a,!1,c.helperText);s=x.prev().prev(),y="next"}}if(s.length&&(l=s.data("zmsData").rowObject),e=s.find(".zmTreTxt"),g=s.offset().top,f=e.offset()&&e.offset().top,this.stopHoverOnRow(),s.hasClass("SC_ltl"))y="header",z=c.allowDrop&&c.allowDrop(t,l,y),zmsuite.showDragHandler(a,!1,c.helperText);else if(g<h&&f>h){if(y="prev",b&&(clearTimeout(b),b=0,i=null),z=c.allowDrop&&c.allowDrop(t,l,"prev"),!z)return this.removeDragHelper(),zmsuite.showDragHandler(a,!1,c.helperText),!1;this.showDragHelper(s,y),zmsuite.showDragHandler(a,!0,c.helperText)}else if(g+s.outerHeight()>h&&f+e.height()<h){y="next",b&&(clearTimeout(b),b=0,i=null),v=s,s.next().hasClass("SC_fdrag")&&(v=s.next()),v=v.next(),v.hasClass("SC_parcnt")&&(s=v.children(".SC_tre").eq(0),y="prev"),v.length||(p=s.parents(".SC_parcnt"),p.length&&(v=p.next().eq(0),v.length?v.hasClass("SC_fdrag")?v.next().length?(s=v.next(),y="prev"):(s=p.prev(),w=!0):(s=v,y="prev"):(s=p.prev(),w=!0)));try{l=s.data("zmsData").rowObject}catch(B){window.console.log("ex thrown")}if(z=c.allowDrop&&c.allowDrop(t,l,y),!z)return this.removeDragHelper(),zmsuite.showDragHandler(a,!1,c.helperText),!1;w?this.showDragHelper(p,y):this.showDragHelper(s,y),zmsuite.showDragHandler(a,!0,c.helperText)}else if(g<h&&f+e.height()>=h){if(y="inside",z=c.allowDrop&&c.allowDrop(t,l,y),!z)return this.removeDragHelper(),zmsuite.showDragHandler(a,!1,c.helperText),!1;if(s.find("i.msi-rarrow").length&&!s.find("i.msi-arrow45").length){for(n in l)l.hasOwnProperty(n)&&(m=n);i!==m&&(i=m,b&&(clearTimeout(b),b=0),b=setTimeout(function(){A.showChild(s.find("i.msi-rarrow"),i,s)},500))}this.showDragHelper(e,y),zmsuite.showDragHandler(a,!0,c.helperText)}return{
toDrop:z,curElem:s,pos:y}},onDrop:function(a,b,c){var d,e,f,g,h,i;c&&c.toDrop&&(h=c.curElem,i=c.pos,"prev"===i?(f=h.prev(),f.length?h=f.hasClass("SC_tre")?f:f.prev():(h=h.parent().prev(),i="inside")):"inside"===i&&b.getDescendant&&(g=h.next(),g.length&&!g.hasClass("SC_tre")&&(i="next",h=g.children(".SC_tre:last"))),e=h.data("zmsData").rowObject,d=b.fromData,delete b.fromData,b.onDrop(a,d,e,i))},setDragDrop:function(a){this.dragEventObj=a},attachDragDropEvents:function(){var a,b,c=this;b=this.dragEventObj,c.el.find(".SC_ldt").off("mousedown").mousedown(function(d){var e,f,g,h,i=!1,j=b.rowCls||"zmL",k=b.selCls||"SC_check";3!==d.which&&(h=d.pageY,f=d.target||d.srcElement,f=$(f).closest(".SC_tre"),a=$("#zm_mailLeft"),f.length&&(e=f.data("zmsData").rowObject,b.fromData=e),b.allowDrag&&!b.allowDrag(e)||($(document).off("mousemove.ZMLeft").on("mousemove.ZMLeft",function(a){var d,f;a.preventDefault(),d=a.target||a.srcElement,d=$(d),f=d.parents(".SC_lbx"),f.length||(f=d.closest(".SC_ltl")),i=!0,i&&(b.helperText=b.dragStart(a,e)),f.length?g=c.onMouseMove(a,b,h):(c.removeDragHelper(),zmsuite.getCenter()[0].getNodes()[2].onMouseMove(a,b)),h=a.pageY}),a.off("mouseleave.ZMLeft").on("mouseleave.ZMLeft",function(){}),$(document).off("mouseup.ZMLeft").on("mouseup.ZMLeft",function(a){var d,e,f,h,l;l=a.target||a.srcElement,l=$(l),d=l,e=l.closest(".SC_tre"),e.length||(e=l.closest(".SC_ltl")),h=d.parents(b.allowedParents),zmsuite.removeDragHandler(),c.removeDragHelper(),c.showHoverOnRow(),f=$("#zm_mailLeft"),$(document).off("mousemove.ZMLeft"),$(document).off("mouseup.ZMLeft"),f.off("mouseleave.ZMLeft"),h.length&&(i&&(e.length||l.closest(".SC_fdrag").length?c.onDrop(a,b,g):d.closest("."+j).length&&(d=d.closest("."+j),d.hasClass(k)&&(d=d.parents(".SC_mclst").find("."+j+"."+k)),b.onDrop(a,b.fromData,d,"center"))),i=!1)})))})},showDragHelper:function(b,c){var d,e;d=a.views.getDragHelperDom(),e=b,"next"===c&&(e=b.next()),e.hasClass("SC_fdrag")||(this.dragHelper&&this.dragHelper.remove(),e&&e.length?e.before(d):b.after(d),this.dragHelper=d)},removeDragHelper:function(){this.dragHelper&&(this.dragHelper.remove(),delete this.dragHelper)},showHoverOnRow:function(){this.el.removeClass("SC_nohvr")},stopHoverOnRow:function(){this.el.addClass("SC_nohvr")},setStaticHeaderAndScrollBarFn:function(a){this.staticHeaderAndScrollBarFn=a},callStaticHeaderAndScrollBarFn:function(){this.staticHeaderAndScrollBarFn&&"function"==typeof this.staticHeaderAndScrollBarFn&&this.staticHeaderAndScrollBarFn()},setCustomNodeInnerHTML:function(a,b){if(b&&(b=Array.isArray(b)?_zm.getDOM(b):b,this.el[0]&&a&&b)){var c=this.el.find("#"+a).eq(0);c[0]&&c.append(b)}},getCustomNodeInnerHTML:function(a){if(this.el[0]&&a)return this.el.find("#"+a).eq(0)[0]}},window.ZMLayer=a}(),window.ZMLayer=function(a){var b=a.views={};return b.getDragHelperDom=function(){var a=$('<div class="SC_fdrag"><span></span></div>');return a},b.getLeftRowsContainerDom=function(a){var b=$('<div class="SC_ldt">');return a&&a.id&&b.attr("id",a.id),a&&a.style&&b.attr("style",a.style),b},b.getLeftLayerContainerDom=function(a){var b=$('<div class="SC_lbx">');return a&&a.id&&b.attr("id",a.id),b},b.getCustomNodeDom=function(a){a=a||{};var b=$('<div class="SC_tre SC_onBoard"></div>');if(a.id&&b.attr("id",a.id),a.title&&b.attr("title",a.title),a.customNodeHtmlTemplate){var c=Array.isArray(a.customNodeHtmlTemplate)?_zm.getDOM(a.customNodeHtmlTemplate):a.customNodeHtmlTemplate;b.append(c)}return b},b.getTopLayerDom=function(a){var b=$('<div class="SC_tre"></div>');return a&&a.id&&b.attr("id",a.id),a&&a.title&&b.attr("title",a.title),b},b.getCountDom=function(a){var b=$("<div/>",{"class":"zmTreWra"}),c=$('<span class="zmTreTxt"></span>');return a&&a.title&&c.attr("title",a.title),a.txtNodeClass&&c.addClass(a.txtNodeClass),b.append(c),b},b.listDom=function(a,c){var d,e,f,g,h="",i="",j="",k=a.txtNodeClass,l="SC_thm";if(a.customNode)d=b.getCustomNodeDom({id:a.id,customNodeHtmlTemplate:a.customNodeHtmlTemplate});else if("1"===c){a.count&&a.count>0&&(a.notBold||(h="SC_bld")),i=a.count,g=a.hideNode,j=a.rowTitle||a.name,i<0&&(i=0),i&&"0"!==i&&(j+=" ("+i+")"),d=b.getTopLayerDom({id:a.id,title:j});var m=$("<span>");a.hasChild&&(a.expChild?m.append('<i class="msi-rarrow msi-arrow45"></i>'):m.append('<i class="msi-rarrow"></i>')),e=b.getCountDom({txtNodeClass:k}),e.find(".zmTreTxt").text(a.name).addClass(h),a.shared&&"-1"!==a.shared?e.find(".zmTreTxt").prepend('<i class="msi-share"></i>'):a.addNewType&&(e.prepend('<i class="msi-plus '+l+'"></i>'),e.addClass(l)),(a.hasChild||a.shared&&"-1"!==a.shared||a.addNewType)&&d.append(m),d.append(e),i>99&&(i="99+"),i&&0!==parseInt(i)&&d.prepend('<span class="SC_ct">'+i+"</span>"),g&&d.hide()}else if("2"===c){d=b.getTopLayerDom({id:a.id}),f=$('<div class="SClbl">'),f.css("background-color",a.color),e=b.getCountDom({title:a.name});var n=e.find(".zmTreTxt");n.text(a.name),d.append(f),a.shared&&"-1"!==a.shared&&n.prepend('<i class="msi-share"></i>'),n.prepend(f),d.append(e)}else if("3"===c){if(d=b.getTopLayerDom({id:a.id}),a.accessText){var o=$('<span class = "SperR">');o.text(a.accessText),d.append(o),o.attr("title",a.sharedFolderToolTip)}var p=$('<div class="SC_ct">');e=b.getCountDom({title:a.name}),a.entityClass&&e.prepend("<i class='"+a.entityClass+"'/>");var q=$("<img />");q.attr("src",zmResource.get("image","SC-Photo.png")),p.append(q),zmail.ContactBook.fetchProcess.done(function(){zmail.ContactBook.get({zuid:a.OZUID,type:"org"}).done(function(a){if(a.length>0){var b=a[0].attrs;q.attr("src",b.photo)}})}),e.find(".zmTreTxt").text(a.name),d.append(p),d.append(e)}else"4"===c?(d=b.getTopLayerDom({id:a.id}),d.append('<i class="msi-workspace"></i>'),e=b.getCountDom({title:a.name}),e.find(".zmTreTxt").text(a.name),d.append(e)):"5"===c?(d=b.getTopLayerDom({id:a.id}),d.addClass("SC_cal"),"1"===a.check&&d.addClass("calCheck"),f=$('<i class="msi-tick"></i>'),f.css("color",a.color),e=b.getCountDom({title:a.name}),$(e.find(".zmTreTxt")).text(a.name),$(e).append(f),d.append(e)):"6"===c&&(d=a.hasChild||a.addNewType?b.listDom(a,"1"):b.listDom(a,"5"));return d},a}(window.ZMLayer),function(){function a(a){this.id=void 0,this.sortLayer=a&&a.sortLeft,this.layerArr=void 0,this.push()}function b(){this.id=void 0,this.el=void 0}var c=zmail.Core.Namespaces,d=c.get("zmState.leftStateInfo"),e={SELECTION:"Stre"};a.prototype={push:function(a){this.id="zm_lftree",this.sortLayer?this.layerArr=this.getSortedLayer(a):this.layerArr=a&&a.layerArr,this.el=window.zmLeft.views.getLeftTreeContainer({id:this.id})},getSortedLayer:function(a){var b=zmAdHocSettings.getLeftOrder();if(zmail.leftOrder=b.split(","),a&&a.layerArr)return _.sortBy(a.layerArr,function(a){var b=zmail.leftOrder.indexOf(a.id);return b>-1?b:100})},setListener:function(a,b){this.el.off(a).on(a,b)},resetDefaultSelection:function(){var a,b,c=this,d=zmsuite.getCurrentAppObjId(),f=zmsuite.getLeft(d),g=f.selLayerId,h=f.selId,i=c.el.find("."+e.SELECTION);i.length&&i.removeClass(e.SELECTION),a=this.getLayer(g),b=a.el.find("#"+h),b.addClass(e.SELECTION)},setTempSelection:function(a,b){var c,d=this,f=d.el.find("."+e.SELECTION),g=this.getLayer(a);g&&(c=g.el.find("#"+b),f.length&&c.length&&(f.removeClass(e.SELECTION),c.addClass(e.SELECTION),c.find(".SC_new").removeClass("SC_new")))},getLayer:function(a){var b,c;if("undefined"!=typeof this.layerArr){for(c=0;c<this.layerArr.length;c+=1)if(this.layerArr[c].id===a){b=this.layerArr[c];break}return b}},getNextLayer:function(a){var b,c;for(c=0;c<this.layerArr.length;c+=1)if(this.layerArr[c].id===a&&c<this.layerArr.length-1){b=this.layerArr[c+1];break}return b},getPreviousLayer:function(a){var b,c;for(c=0;c<this.layerArr.length;c+=1)if(this.layerArr[c].id===a&&c>0){b=this.layerArr[c-1];break}return b},getLayerSeq:function(a){var b,c;for(c=0;c<this.layerArr.length;c+=1)if(this.layerArr[c].id===a){b=c;break}return b},getLayerClone:function(a){var b,c;for(c=0;c<this.layerArr.length;c+=1)if(this.layerArr[c].id===a){b=this.layerArr[c];break}var d=$.extend(!0,{},b);return d},setLayerArr:function(a){this.layerArr=a},replaceLayer:function(a,b){var c=b.constructLayer(),d=this.getLayerSeq(a);this.layerArr.splice(d,1,b),$("#"+a).replaceWith(c)},deleteLayer:function(a){var b=this.getLayerSeq(a);this.layerArr.splice(b,1),$("#"+a).remove(),this.showStaticHeaderAndScrollBar()},appendLayer:function(a,b){var c=b.constructLayer();this.layerArr.push(b),$("#"+this.id).append(c),this.showStaticHeaderAndScrollBar()},prependLayer:function(a){var b=a.constructLayer();this.layerArr.splice(0,0,a),$("#"+this.id).prepend(b),this.showStaticHeaderAndScrollBar()},insertLayerBefore:function(a,b){var c=b.constructLayer();if(this.sortLayer)return void this.insertLayerAtSortedPosition(b);var d=this.getLayerSeq(a);this.layerArr.splice(d,0,b),$("#"+a).before(c),this.showStaticHeaderAndScrollBar()},insertLayerAfter:function(a,b){if(this.sortLayer)return void this.insertLayerAtSortedPosition(b);var c=b.constructLayer(),d=this.getLayerSeq(a);this.layerArr.splice(d+1,0,b),$("#"+a).after(c),this.showStaticHeaderAndScrollBar()},insertLayerAtSortedPosition:function(a){var b=a.constructLayer(),c=this.getLayerIdToInsert(a.id);if(c===-1)this.appendLayer(c,a);else if(0===c)this.prependLayer(a);else{var d=this.getLayerSeq(c);this.layerArr.splice(d+1,0,a),$("#"+c).after(b),this.showStaticHeaderAndScrollBar()}},insertLayerAt:function(a,b){},removeDragHelperFromLayers:function(){var a,b;for(b=this.layerArr.length,a=0;a<b;a+=1)this.layerArr[a].removeDragHelper()},getLayerIdToInsert:function(a){var b,c,d=zmail.leftOrder.indexOf(a);if(b=d,d>-1)for(c=0;c<d;c+=1)this.getLayer(zmail.leftOrder[c])&&(b=zmail.leftOrder[c]);return b},showStaticHeaderAndScrollBar:function(){this.staticHeaderAndScrollBarFn&&"function"==typeof this.staticHeaderAndScrollBarFn&&this.staticHeaderAndScrollBarFn()},setStaticHeaderAndScrollBarFn:function(a){this.staticHeaderAndScrollBarFn=a},enableLayerSortable:function(){if(this.sortLayer){var a=this;c.get("zmAppLoader").load("zmLeft-reOrder").then(function(){a._dragNDropInstance=c.get("ZMLeft.ZMLayerReOrder").init({$el:a.el,__instance:a})})}},disableLayerSortable:function(){this.sortLayer&&this._dragNDropInstance&&this._dragNDropInstance.unbindDragNDropEvents()}},b.prototype={init:function(){},setListener:function(a,b){this.el.off(a).on(a,b)},setId:function(a){this.id=a}};var f=function(a,b,c,e){var f=$(a).next(),g=d.utils.getKeyFromAppId(zmApp.currentApp)||c.getAppKey(),h=c.getNodes()[0].getLayer(b),i=h.avoidStateSave;f.is(":visible")?("function"==typeof e?f.slideUp({duration:"slow",progress:e}):f.slideUp("slow"),i||d.addEntry(g,b)):("function"==typeof e?f.slideDown({duration:"slow",progress:e}):f.slideDown("slow"),i||d.removeEntry(g,b))},g=function h(a){return window===this?new h(a):(this.id="zm_mailLeft",this.leftAppKey=a.appKey||a.appId,this.top=void 0,this.center=void 0,this.bottom=void 0,this.sortLeftCenter=a&&a.sortLeftLayers,this.nodeArr=[],a.data.LNodes&&this.push(a.data.LNodes),this.selId=void 0,this.noSelClass=a.noLeftSel,void(this.scrollBar=void 0))};g.prototype={constructor:g,push:function(){this.nodeArr[0]=this.center=new a({sortLeft:this.sortLeftCenter}),this.nodeArr[0].setStaticHeaderAndScrollBarFn(this.showStaticHeaderAndScrollBar.bind(this)),this.center.setStaticHeaderAndScrollBarFn(this.showStaticHeaderAndScrollBar.bind(this)),this.nodeArr[1]=this.bottom=new b},getNodes:function(){return this.nodeArr},getAppKey:function(){return this.leftAppKey},setAppKey:function(a){this.leftAppKey=a},renderTop:function(){if($(".SClt").remove(),this.top){var a=this.top.construct();a&&$("#"+this.id).prepend(a)}},isLayerExp:function(a){if(a){var b,c,d=this.center,e=d.layerArr;for(c=0;c<e.length;++c)if(e[c].id===a){b=e[c];break}if(b&&!b.avoidStateSave)return!b.isLayerExpanded();var f=$("#"+this.center.id).find("#"+a).eq(0).children().last();return f[0]?"block"===f.css("display"):void 0}},renderLayers:function(){var a=this.center.el;a.html("");var b,c=this.center,d=c.layerArr;for(b=0;b<d.length;b+=1){var e=d[b].constructLayer();c.layerArr[b].setStaticHeaderAndScrollBarFn(this.showStaticHeaderAndScrollBar.bind(this)),d[b].rebindChildToggleEvents(),a.append(e)}if(a.length){if(zmsuite.$el.popAccContainer){var f=parseInt(zmsuite.$el.popAccContainer.css("height"))||0;$(this.center.el).css("bottom",f)}$("#"+this.id).append(this.center.el)}},rerender:function(a,b){if(a){var c,d=this.center,e=d.layerArr;if(e.length)for(c=0;c<e.length;++c)if(e[c].id===a){d.disableLayerSortable(),"header"===b?$(e[c].el).find(".SC_ltl").replaceWith(e[c].getHeaderDOM()):"list"===b?$(e[c].el).find(".SC_ldt").replaceWith(e[c].getListDOM()):($(e[c].el).replaceWith(e[c].constructLayer()),d.layerArr[c].setStaticHeaderAndScrollBarFn(this.showStaticHeaderAndScrollBar.bind(this))),d.enableLayerSortable();break}}},showStaticHeaderAndScrollBar:function(){},scrollIntoView:function(a,b){var c,d,e;c="object"===("undefined"==typeof a?"undefined":babelHelpers["typeof"](a))?a:$("#"+a)[0],b=b||!0;var f=0;c&&(c.scrollIntoView(),d=e=0,$("#"+this.center.id)[0]&&(d=$("#"+this.center.id)[0].scrollTop),e=b?$("#zmLeft-upstatic-header")[0]?$("#zmLeft-upstatic-header")[0].offsetHeight:0:$("#zmLeft-btstatic-header")[0]?$("#zmLeft-btstatic-header")[0].offsetHeight:0,f=d-e,$("#"+this.center.id).animate({scrollTop:f+"px"},{duration:"slow",progress:this.showStaticHeaderAndScrollBar.bind(this)}))},renderStaticHeader:function(){var a,b,c,d=document.getElementById("zmLeft-upstatic-header"),e=document.getElementById("zmLeft-btstatic-header"),g=document.getElementById(this.center.id),h=$("#"+this.id).find(".zmScrollTrail").eq(0),i=[];if(g)for(a=0;a<g.children.length;++a)$(g.children[a]).hasClass("SC_lbx")&&i.push(g.children[a]);if(0===i.length)return $(d).html(""),void $(e).html("");var j=this;d?$(d).html(""):(d=_zm.getDOM(["DIV",{attrs:{id:"zmLeft-upstatic-header","class":"SClDup top"}}]),$("#"+this.id).append(d)),e?$(e).html(""):(e=_zm.getDOM(["DIV",{attrs:{id:"zmLeft-btstatic-header","class":"SClDup bottom"}}]),$("#"+this.id).append(e)),$("#"+this.id).children().last()[0]!==h[0]&&$("#"+this.id).children().last().after(h);var k=function(){for($(d).html(""),$(e).html(""),a=0;a<i.length;++a)$(i[a]).hasClass("zmScrollTrail")||(b=$(i[a].firstElementChild).clone(!0,!0),c=$(i[a].firstElementChild).clone(!0,!0),$(b).addClass("SC_dyn"),$(c).addClass("SC_dyn"),$(d).append(b),$(e).append(c))},l=function(c){c=c||g;var e=c.scrollTop,f=0,h=0;for(a=0;a<i.length;++a){if(f=0,a>0){h=0;for(var j=0;j<a;++j)f+=i[j].offsetHeight,h+=i[j].firstElementChild.offsetHeight;f+=parseInt($(i[a]).css("padding-top"))-h}else f+=1;e>=f?(b=d.querySelector("#"+i[a].firstElementChild.id),b&&$(b).removeClass("SC_dyn")):e<=f&&(b=d.querySelector("#"+i[a].firstElementChild.id),b&&$(b).addClass("SC_dyn"))}},m=function(c){c=c||g;var d=c.scrollTop,f=0,h=0;for(a=0;a<i.length;++a){f=h=0;for(var j=0;j<a;++j)f+=i[j].offsetHeight;for(var k=a;k<i.length;++k)h+=i[k].firstElementChild.offsetHeight;var l=parseInt($(i[a]).css("padding-top"));f+l>=$(g).height()+d-h?(b=e.querySelector("#"+i[a].firstElementChild.id),b&&$(b).removeClass("SC_dyn")):f+l<=$(g).height()+d-h&&(b=e.querySelector("#"+i[a].firstElementChild.id),b&&$(b).addClass("SC_dyn"))}},n=function(a){var b=g;a&&"scroll"===a.type&&(a.stopPropagation(),b=a.target||a.srcElement),k(),l(b),m(b)},o=function(b){b.preventDefault(),b.stopPropagation();var c,d,e=b.type,h=b.target||b.srcElement;h=d=$(h);var k,l=2,m=["msi-rarrow","msi-arrow45"];for(k in m)if(m.hasOwnProperty(k)&&h.hasClass(m[k])){h.parent().removeClass("SC_bld"),l=1;break}h=h.closest(".SC_tre"),h.length||(h=d,h.closest(".SC_ct").length&&(l=3),h.hasClass("SC_ltl")||(h=h.parents(".SC_ltl")));var o={};o.zmsData=h.data("zmsData"),o.zmsData.type=e,o.zmsData.colInfo={column:l},o.zmsData.eventInfo=b,o.zmsData.prevSelectLayer=zmsuite.getAppLeft().selLayerId;var p,q,r,s=o.zmsData.rowInfo.layerId;if("click"===e&&1!==l){p=zmsuite&&zmsuite.getAppLeft(),q=p&&p.getNodes()&&p.getNodes()[0].getLayer(s),q||(p=zmsuite.getAppObj(zmsuite.getCurrentAppObjId()).left,q=p.getNodes()[0].getLayer(s));var t,u=q&&q.isHeaderSel||!1;if(t=$("#zm_mailLeft"),h.hasClass("SC_ltl"))if(u)q.disableSelection||(2===l&&(t.find(".SC_tre").removeClass("Stre"),t.find(".SC_ltl").removeClass("Stre"),h.addClass("Stre")),j.selId=h.attr("id"),j.selLayerId=s,n());else if(2===l){var v,w=0,x=0;for(a=0;a<i.length;++a)if(s===i[a].id){for(v=0;v<a;++v)w+=i[v].offsetHeight,x+=i[v].firstElementChild.offsetHeight;c=i[a].firstElementChild;break}a>0&&(w-=x,w+=15),g.scrollTop===w?f(c,s,p,j.showStaticHeaderAndScrollBar.bind(j)):($(g).animate({scrollTop:w+"px"},{duration:"slow",progress:n}),$(g).find("#"+s).find(":nth-child(2)").css("display",""))}else if(3===l){var y=$(b.target).closest("i").data("action");r=q.headerObject,"add"===y?r.onAdd&&r.onAdd(o):"settings"===y&&r.settingsObject&&r.settingsObject.onClick&&r.settingsObject.onClick(o)}}},p=function(a){};n(),g.onscroll=n,d.onclick=o,e.onclick=o,d.onwheel=p,e.onwheel=p,d.addEventListener("DOMMouseScroll",p),e.addEventListener("DOMMouseScroll",p),window.onresize=n},updateRowSelection:function(){var a;a=$("#"+this.id),this.noSelClass?a.addClass("SC_nosel"):a.removeClass("SC_nosel")},render:function(){this.nodeArr.length&&($("#"+this.id).find(".SClm").remove(),this.renderTop(),this.renderLayers(),this.showStaticHeaderAndScrollBar(),this.selId&&$("#"+this.selId).addClass("Stre"),this.center.disableLayerSortable(),this.center.enableLayerSortable()),this.updateRowSelection()},clear:function(){$("#"+this.id).html(""),this.top=void 0,this.center=void 0,this.bottom=void 0,this.nodeArr=[],this.showStaticHeaderAndScrollBar()},expParentOfRId:function(a,b){var c=b&&b.getRowObj(a)||{},d=c.p||(c[a]||{}).p;if(d){var e=$("#"+this.id).find("#"+d),f=e.find("i.msi-rarrow");e.is(":visible")&&!f.hasClass("msi-arrow45")?f.trigger("click"):(this.expParentOfRId(d,b),e.is(":visible")&&!f.hasClass("msi-arrow45")&&f.trigger("click"))}},selRow:function(a,b,c){if(a){$("#"+this.id).find("div.SC_tre").removeClass("Stre"),this.selId=a;var d=$("#"+this.id).find("#"+a);if(d.addClass("Stre"),!d.is(":visible")){var e=this.center.layerArr.filter(function(a){return a.id===b})[0];this.expParentOfRId(a,e),$("#"+a).addClass("Stre")}}if(b&&(this.selLayerId=b),c){var f=$("#"+(a||b))[0];f&&this.scrollIntoView(f)}},getSelectedRowObj:function(){var a,b;return a=this.center.getLayer(this.selLayerId),a&&(b=a.getRowObj(this.selId)),b},setListener:function(a,b){var c=b,d=this;a&&("click"===a||"contextmenu"===a?$("#"+d.id).off(a).on(a,"div.SC_tre,div.SC_ltl",function(){return function(a){a.preventDefault(),a.stopPropagation();var b,e=a.type,g=a.target||a.srcElement;g=b=$(g);var h,i=2,j=["msi-rarrow","msi-arrow45"];for(h in j)if(j.hasOwnProperty(h)&&g.hasClass(j[h])){g.parent().removeClass("SC_bld"),i=1;break}g=g.closest(".SC_tre"),g.length||(g=b,g.closest(".SC_ct").length&&(i=3),g.hasClass("SC_ltl")||(g=g.parents(".SC_ltl")),g.closest(".SC_cent").length&&(i=2));var k={};k.zmsData=g.data("zmsData"),k.zmsData.type=e,k.zmsData.colInfo={column:i},k.zmsData.eventInfo=a,k.zmsData.prevSelectLayer=zmsuite.getAppLeft().selLayerId;var l,m,n,o=k.zmsData.rowInfo.layerId;if("click"===e&&1!==i){l=zmsuite&&zmsuite.getAppLeft(),m=l&&l.getNodes()&&l.getNodes()[0].getLayer(o),m||(l=zmsuite.getAppObj(zmsuite.getCurrentAppObjId()).left,m=l.getNodes()[0].getLayer(o));var p,q=m&&m.isHeaderSel||!1;if(p=$("#zm_mailLeft"),!g.hasClass("SC_tre")&&!g.hasClass("SC_cent")||g.hasClass("SC_cal")){if(g.hasClass("SC_ltl")){if(q)m.disableSelection||(2===i&&(p.find(".SC_tre").removeClass("Stre"),p.find(".SC_ltl").removeClass("Stre"),p.find(".SC_cent").removeClass("Stre"),g.addClass("Stre")),d.selId=g.attr("id"),d.selLayerId=o);else if(3===i){var r=$(a.target).closest("i").data("action");return n=m.headerObject,"add"===r?n.onAdd&&n.onAdd(k):"settings"===r&&n.settingsObject&&n.settingsObject.onClick&&n.settingsObject.onClick(k),!0}zmail.showFeature?f(g,o,l,d.showStaticHeaderAndScrollBar.bind(d)):f(g,o,l)}}else m.disableSelection||(p.find(".SC_tre").removeClass("Stre"),p.find(".SC_ltl").removeClass("Stre"),p.find(".SC_Cent").removeClass("Stre"),g.addClass("Stre"),g.find(".SC_ct.SC_new").removeClass("SC_new"),d.selId=g.attr("id"),d.selLayerId=o)}zmail.showFeature&&(k.clbk=_.throttle(d.showStaticHeaderAndScrollBar.bind(d),100)),c(k)}}(c)):"mouseover"!==a&&"mouseout"!==a||this.getNodes()[0].el.on(a,c))}},window.zmLeft=g}(),window.zmLeft=function(a){var b=a.views={},c=zmail.Utils.DOM;return b.getLeftTreeContainer=function(a){this.el=c.element(zdom("div",{className:"SClm",id:String(this.id)}));var b=c.element(zdom("div",{className:"SClm"}));return a&&a.id&&b.attr("id",a.id),b},a}(window.zmLeft),window.zmCenterListing=function(a){function b(a){a=a||{},this.listType=a.type,this.propertyMap=a.mapObj,this.classMap=a.classObj,this.data=a.dataObj}var c={};b.prototype={setDataObj:function(a){this.data=a},getHTML:function(a){a=a||"html";var b,d=c[this.listType];if("function"!=typeof d)throw new Error("HTMLGenerator not available for ListItem.Type="+this.listType);return b=d({returnType:a,propertyMap:this.propertyMap,classMap:this.classMap,data:this.data})}};var d=function(a){a=a||{};var b=a.type,d=a.generator;b&&"function"==typeof d&&(c[b]=d)},e=function(a,b,c,d){var e="";return b[d]&&("object"===babelHelpers["typeof"](b[d])?b[d][c[a[d]]]&&(e=b[d][c[a[d]]]):e=b[d]),e},f=function(a){return new b(a)};return a=a||{},a.create=f,a.getMappedClass=e,a.registerListItemTemplate=d,a}(),window.zmTab=function(){var a,b,c,d,e,f,g,h=["zm_Container"],i=5,j=20,k="activeTab",l=115,m=60,n=l,o=45,p=15,q=function(a){var b,c,d,e,f;f=zmsuite.getAppObj();for(e in f)e===a?c=f[e].centerObj.$el:(b=b?b.add(f[e].centerObj.$el):f[e].centerObj.$el,d=d?d.add(f[e].rightObj.$el):f[e].rightObj.$el);c.addClass("SC_show"),b&&b.removeClass("SC_show")},r=function(a){var b,c=zmTab.tabArr.length;for(b=0;b<c;b++)if(zmTab.tabArr[b].appId===a)return b;return 0},s=function(a){return"msi-calendar"===a||"msi-task"===a||"msi-notes"===a||"msi-contacts"===a||"msi-mail"===a?a+"App zmDoubleIcon":"msi-links"===a?"msi-bookmarksApp zmDoubleIcon":a},t=function(){i=parseInt(zmTab.getSpaceAvailable()/m),i=i<2?2:i},u=function(a,b){var c,d="",e=s(a.appIcon);return b&&e===a.appIcon&&(d='<div class="zm_tbcls"><i class="msi-close"></i></div>'),c=$("<li><span><i class='"+e+"'></i><span></span></span>"+d+"</li>"),c.children("span").eq(0).children("span").eq(0).text(a.appname).addClass("zmTabTitle"),c.click(a.clk),$(c).css("width",n),c},v=function(a,b){b.title&&$(a).attr("data-tooltip-title",b.title),$(a).attr("data-tooltip",b.appname)},w=function(){var a;if(!b){var c=$("<li class='jsZmMoreTabs cantClose'><span><i class='msi-barrowD' style='padding:0'></i></span><div class='zmDDc'></div></li>");b=c,$(c).css({"float":"right",width:"30px",height:"30px"}),b.off("mousedown").on("mousedown",function(){b.data("isOpened",$("#zmMoreTabDD").length>0)}),b.off("click").click(function(){if(b.data("isOpened"))return 0;var c=r(zmTab.currentTab);zmTab.tabArr[c].$el.addClass("zmSearchActive").removeClass(k),$(b).addClass(k);var d,e=[],f={},g=0;t();var h=zmTab.tabArr.length;for(g=0;g<h;g++){var i=$("<li/>"),j=s(zmTab.tabArr[g].appIcon),l=$("<i/>",{"class":j});zmTab.tabArr[g].appId===zmTab.currentTab&&$(i).addClass("zmThmClr");var m=$("<span/>");$(m).text(zmTab.tabArr[g].appname);var n=$("<i/>",{"class":"msi-close zmDDTabClose"});$(i).append(l).append(m).data(zmTab.tabArr[g]),0!==g&&$(i).append(n),e[g]=i}a="pleft",f={par:b,spanClass:"SC_dd zmMoreTabDD",defaultclass:!1,liDom:e,divId:"zmMoreTabDD",position:d,align:a,ulClass:"lp10",clk:function(a,b,c){$(c.target).hasClass("zmDDTabClose")?$(c.target).parent().remove():zmUtil.hideMenu(),a.clk(c)},onHide:function(){zmTab.tabArr[c].$el.removeClass("zmSearchActive"),zmTab.tabArr[c].$el.addClass(k),$(b).removeClass(k)}},zmsuite.showMenu(f)}),f.append(b)}},x=function(a){a&&a.$el&&(a.$el.remove(),a.$el=null)},y=function(){var a;return a=n<=m?zmTab.getSpaceAvailable()-o+20:(n+p)*(zmTab.tabArr.length-1),a=parseInt(a/(n+p)),a=a<1?1:a,a*=p+n,d.css({width:a}),a},z=function(){zmTab.tabArr.length<=i&&b&&(a.find("li").removeClass("zmSearchActive"),b.remove(),b=null,zmUtil.hideMenu())},A=function(){zmTab.tabArr.length>i&&!b?w():z()},B=function(a,b){y();var e,f;t(),f=zmTab.tabArr.length,e=u(a,!0),$(e).css("width",n),a.$el=e,c.append(e),v(e,a),$(e).addClass("jsTabDragDrop"),d.scrollLeft((n+p)*f),A()},C=function(b){var c;c=u(b,!1),b.$el=c,$(c).addClass("cantClose"),a.children(":first").replaceWith(c),v(c,b)},D=function(b){var d,f;for(f=zmTab.tabArr.length,d=0;d<f;d++)if(zmTab.tabArr[d].appId===b){e=d,c.find("li").removeClass(k),a.find("li").removeClass(k).removeClass("zmSearchActive"),zmTab.tabArr[d].$el&&zmTab.tabArr[d].$el.addClass(k);break}},E=function(a){var b;b=zmTab.tabArr[a],b&&b.$el&&x(b)},F=function(a,b){return a.clk=function(a){return function(b){var c=b.target||b.srcElement;return $(c).closest(".zm_tbcls").length||$(c).closest(".msi-close").length?void zmsuite.closeWorkspace(a):(zmUtil.hideMenu(),void(zmTab.currentTab!==a&&zmsuite.showExistingApp(a)))}}(a.appId),a.appname=a.appname||"",a},G=function(a){h=_zm.pluck(h,a),h.push(a)},H=function(){i=5},I=function(){var b=zmTopBar.getTopbarElementRef().find(".SC_tab").eq(0);a=b.find("ul").eq(0)},J=function(){zmAppLoader.load("dragNDropUtil").done(function(){var a,b,e,f,g,h,i,j,k,l,o,q,r,s,t,u=function(b){zmTooltip.remove(),l=Date.now(),e=d[0].getBoundingClientRect(),s=0,r=0,f=Date.now(),t=0,a=$(b).prevAll().length+1,o=$(b)},v=function(){return{allowDragOver:!0}},w=function(){b=$(o).prevAll().length,$(o).click(),b++,zmTab.tabArr.splice(b,0,zmTab.tabArr.splice(a,1)[0]),zmState.tabInfo.reorder()},x=new zmail.dndComp.Drop;x.init(c.parent().parent()[0],{onDragOver:v,onDrop:function(){}});var y=new zmail.dndComp.SortableDND;y.init(c.parent().parent()[0],{isPlaceHolderHide:!0,getDragInstance:function(a){return{allowDrag:zmTab.tabArr.length>2}},onSortDragEnd:w,sortDragStart:u,sortType:"horizontal",sortableIdentifier:"jsTabDragDrop",afterSortable:function(a){b=$(a).prevAll().length},sortableDragOverDetails:function(a,b,c){t++,s+=Math.abs(b.clientX-j),j=b.clientX,(Date.now()-q)/100>1?(l=Date.now(),q=l,s=0,r=0,t=0):t<4?(r=0,q=Date.now()):(r=s/((q-l)*(q-l)),q=Date.now()),r*=1e3,k=r<3?2:parseInt(zmTab.getSpaceAvailable()/m),b.clientX+30<e.left+n&&(Date.now()-f)/1e3>1.2&&(f=Date.now(),g=n+p,h=g*k,i=d.scrollLeft(),i-h>0?d.animate({scrollLeft:i-h},500):d.scrollLeft(0)),b.clientX+30>e.left+e.width-n&&(Date.now()-f)/1e3>1.2&&(f=Date.now(),i=d.scrollLeft(),g=n+p,h=g*k,d.animate({scrollLeft:i+h},500))}})})},K=function(){var a=zdom("div",{className:"secContainer"}),b=zdom("ul",{className:"secTabs"});b=$(b),c=b,c.css({"white-space":"nowrap"}),$(a).append(b),d=$(a),$(a).css({overflow:"hidden","float":"left","margin-left":p}),$(".SC_tab").append(a),f=zdom("ul",{className:"moreTabContainer"}),f=$(f),$(".SC_tab").append(f),J()},L=function(){var a=y(),b=d.scrollLeft();(Math.ceil(b/(n+p))>=e||Math.floor((b+a)/(n+p))<e)&&e>0&&d.scrollLeft((e-1)*(n+p))},M=function(){var a;$(window).on("resize",function(){clearTimeout(a),a=setTimeout(function(){zmTab.tabResize()},100),zmTab.applySizeForTabs(),t(),L(),A()})},N=function(){I(),H(),K(),M()},O={tabArr:[{id:"zm_Container",icon:"msi-mail"}],currentTab:"zm_Container",numberOfTabAvailable:function(){return a.find("li").length-(b?1:0)},applySizeForTabs:function(){var b=this.getSpaceAvailable(),d=b/zmTab.tabArr.length;d=d>l?l:d,d-=14,d=d<50?50:d,n=d,a.find("li").not(".jsZmMoreTabs").css("width",d),c.find("li").css("width",d)},addTabLst:function(a,b){var c;return a=F(a),x(zmTab.tabArr[a.appId]),zmTab.tabArr.push(a),b!==!0&&(g=g||$(".SC_tab")),B(a,c),this.applySizeForTabs(!0),!0},isSpaceAvailable:function(a){return this.getSpaceAvailable()/a>m},getSpaceAvailable:function(){var a,c,e=zmsuite.$el.topBar.find(".zmSearch");return zmsuite.$el.topBar||(e=$(document.body)),a=d.offset(),c=e.offset(),c.left-a.left-(b?o:0)},remTabLst:function(a,b){var c,d,e=zmTab.tabArr.length,f=!0;if(d=zmsuite.getAppObj(),zmTab.tabArr[0].appId===a)return!1;for(c=0;c<e;c++)if(zmTab.tabArr[c].appId===a){zmTab.tabArr[c].onDelete&&(f=zmTab.tabArr[c].onDelete(a));break}if(f){E(c),zmTab.tabArr.splice(c,1),t(),L(!0),zmTab.applySizeForTabs(),z(),y(),h=_zm.pluck(h,a),e=zmTab.tabArr.length,1===e&&($("#zm_tabAct").addClass("SC_vhide"),zmUtil.hideMenu()),b?zmsuite.showExistingApp(b):zmTab.currentTab===a&&zmsuite.showExistingApp(h[h.length-1]);for(c in d)c===a&&d[c].centerObj.$el.remove()}return f},showTab:function(a){g=g||$(".SC_tab");var b=zmTab.currentTab;$.publish("/apps/tabSwitching",[b,a]),zmTab.currentTab=a,D(a),G(a),q(a),L(),$.publish("/apps/tabSwitched",[a,b])},updateTabLst:function(a,b){b=b||{};var c,d,e,f,g=b.appId||a.appId;for(d=zmTab.tabArr.length,c=0;c<d;c++)zmTab.tabArr[c].appId===g&&(a=F(a),e=u(a,!0),f=zmTab.tabArr[c].$el,f&&(f.hasClass(k)&&e.addClass(k),zmTab.tabArr[c].$el.replaceWith(e),c>0&&e.addClass("jsTabDragDrop")),v(e,a),zmTab.tabArr[c]=a,zmTab.tabArr[c].$el=e)},isTabOpened:function(a){var b,c=zmTab.tabArr.length;for(b=0;b<c;b++)if(a===zmTab.tabArr[b].appId)return!0;return!1},getTabIndex:function(a){var b,c=zmTab.tabArr.length;for(b=0;b<c;b++)if(a===zmTab.tabArr[b].appId)return b;return-1},setTabForApp:function(a){a=F(a),h=_zm.pluck(h,zmTab.tabArr[0].appId),zmTab.tabArr[0]=a,C(a),G(zmTab.tabArr[0].appId)},getTabViewOrder:function(){return h},reorderTab:function(){L()},tabResize:function(){setTimeout(function(){zmTab.applySizeForTabs(),t(),L(),A()},100)},isMaxLimitReached:function(){return zmTab.tabArr.length>=j&&(Dialog.alert("Maximum tab limit reached"),!0)},getPreviousTabId:function(a){var b=r(a);return 0===b?zmTab.tabArr[zmTab.tabArr.length-1].appId:zmTab.tabArr[b-1].appId},getNextTabId:function(a){var b=r(a);return b===zmTab.tabArr.length-1?zmTab.tabArr[0].appId:zmTab.tabArr[b+1].appId},getTabObject:function(a){return a=a||zmTab.currentTab,_.find(zmTab.tabArr,function(b){return b.appId===a})},getLowerExtraTabDOM:function(){return zmsuite.getTabDOM().find(".SC_exp")},init:N};return O}(),function(){var a=zmail.Core.Namespaces,b=a.create("zmail.Suite"),c=function(){function a(b){babelHelpers.classCallCheck(this,a);var c=this;b=b||{},c._initialized=!1,c._hashKey=null,c._hashParams=null,c._handler=null,c._active=!1,c.initialize(b)}return babelHelpers.createClass(a,[{key:"initialize",value:function(a){var b=this;a=a||{},b._initialized||(a.hashKey=(a.hashKey||"").trim(),a.hashKey&&"function"==typeof a.handler&&(b._hashKey=a.hashKey,b._hashParams=[],b._handler=function(c,d){var e=a.handler.call(b,d);e=e||{};var f="updateParams";e[f]=!e.hasOwnProperty(f)||e[f];var g="handled";e[g]=!e.hasOwnProperty(g)||e[g];var h=e[f],i=e[g];return i&&h&&b.setParams(d),e},zmHash.register(b._hashKey,b._handler),b._initialized=!0,b.handleInitialHash()))}},{key:"uninitialize",value:function(){var a=this;a._initialized&&(a.deactivate(),zmHash.unregister(a._hashKey,a._handler),a._initialized=!1,a._hashKey=null,a._hashParams=null,a._handler=null)}},{key:"handleInitialHash",value:function(){var a=this,b=zmHash.decode();b.key===a._hashKey&&a._handler(b.key,b.params)}},{key:"activate",value:function(){var a=this;a._initialized&&(a._active=!0)}},{key:"deactivate",value:function(){var a=this;a._initialized&&(a._active=!1)}},{key:"update",value:function(a,b){var c=this;if(b=b||{},c._initialized){a=a||c._hashParams;var d=c.setParams(a);if(d){var e=a.join("/");b.appendSlash&&(e+="/"),c._active&&(b.replace?zmHash.replaceHash(c._hashKey,e):zmHash.setHash(c._hashKey,e))}}}},{key:"getParams",value:function(){var a=this;return a._initialized?a._hashParams:null}},{key:"setParams",value:function(a){var b=this;return!!b._initialized&&(!(!a||a.constructor!==Array)&&(b._hashParams=a,!0))}}]),a}();c.create=function(a){return new c(a)},b.RouteHelper=c}(),function(){var a=!1,b=!0,c=zmail.Utils.DOM,d=$.Deferred();window.zmail.contactsLoadProcess=d.promise();var e=null,f=function(a){if(a&&a.v&&a.app&&"zm"===a.app){if(a.all)return!0;if(a.notzoid&&_.isArray(a.notzoid))return!(a.notzoid.indexOf([zmail.zoid].join(""))>-1);
if(a.zuid&&_.isArray(a.zuid)&&a.zuid.indexOf(zmail.zuid)>-1)return!0;if(a.zoid&&_.isArray(a.zoid)&&a.zoid.indexOf([zmail.zoid].join(""))>-1)return!0;if(a.zgid&&_.isArray(a.zgid))for(var b=0;b<a.zgid.length;b++)if(zmail.ContactBook.isGroup(String(a.zgid[b])))return!0}return!1},g=function(){if(zmail.mailOpt.dtNotify){var a=zmUtil.getDesktopNotificationPermission();1===a&&Notification.requestPermission()}},h=function(){zmail.windowVisibility=-1;var a,b;"undefined"!=typeof document.hidden?(a="hidden",b="visibilitychange"):"undefined"!=typeof document.mozHidden?(a="mozHidden",b="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(a="msHidden",b="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(a="webkitHidden",b="webkitvisibilitychange"),"undefined"==typeof document.addEventListener||"undefined"==typeof document[a]?window.console.log("Visibilty API not supported"):(zmail.windowVisibility=1,c.element(document).on(b,function(){document[a]?zmail.windowVisibility=0:zmail.windowVisibility=1}))},i=function(a){_zm.checkForCRMMailAddonUser(a).done(function(a){window.zmail.isCRMMailAddonUser=a}),_zm.checkForCRMUser(a).done(function(a){window.zmail.isCRMServiceUser=a})},j=function(){$.subscribe("group/unread",function(a,b){zmUtil.streamUpdate(b)}),$.subscribe("zmail/SaveTabState",function(a,b){zmUtil.saveTabState(b)}),$.subscribe("SETTINGS_MAIL_VIEW",function(a,b){zmail.mailOpt.isPopup=b}),$.subscribe("SETTINGS_ASK_RECEIPT_ON_READ",function(a,b){zmail.mailOpt.askReceipt=b}),$.subscribe("SETTINGS_TIME_FORMAT",function(a,b){zmail.mailOpt.isRTime=b}),$.subscribe("CS_EDITOR_TYPE_CHANGED",function(a,b){zmail.mailOpt.compTab=b,1===b?zmail.allowInline=!1:zmail.allowInline=!0}),$.subscribe("CS_ENCODING_CHANGED",function(a,b){zmail.cmpdata.CHAR_SET=b}),$.subscribe("CS_SUGGEST_CONTACTS_CHANGED",function(a,b){"undefined"!=typeof zmComp&&(b?(zmComp.offSugList(),zmComp.offSugDOMList()):b||zmComp.onSugList())}),$.subscribe("ncenter/watchReminder",function(a,b){var c=b.mailID;c&&zmList.getMailData({msgId:c,tId:b.tId||c,opentype:2,type:"lt",src:"external",isReminder:!0})}),$.subscribe("CS_FONT_FAMILY_CHANGED",function(a,b){zmail.mailOpt.ff=b}),$.subscribe("CS_FONT_SIZE_CHANGED",function(a,b){zmail.mailOpt.fs=b}),$.subscribe("CS_SENDING_DELAY_CHANGED",function(a,b){zmail.cmpdata.OUT_INTERVAL=b}),$.subscribe("CS_SHOW_BCC_CHANGED",function(a,b){zmail.cmpdata.SHOWBCC=b}),$.subscribe("CS_ASK_RECEIPT_CHANGED",function(a,b){zmail.cmpdata.ASKRECEIPT=b?1:0}),$.subscribe("SIGNATURE_ADDED",function(a,b){zmail.cmpdata.SIGN_INFO[b.id]={},zmail.cmpdata.SIGN_INFO[b.id].SIG_CONT=b.content,zmail.cmpdata.SIGN_INFO[b.id].SIG_TIT=b.name,zmail.cmpdata.SIGN_INFO[b.id].SIG_POS=b.position}),$.subscribe("SIGNATURE_UPDATED",function(a,b){zmail.cmpdata.SIGN_INFO&&zmail.cmpdata.SIGN_INFO[b.id]&&(zmail.cmpdata.SIGN_INFO[b.id].SIG_CONT=b.content,zmail.cmpdata.SIGN_INFO[b.id].SIG_TIT=b.name,zmail.cmpdata.SIGN_INFO[b.id].SIG_POS=b.position)}),$.subscribe("SIGNATURE_DELETED",function(a,b){b.id&&delete zmail.cmpdata.SIGN_INFO[b.id]}),$.subscribe("SIGNATURE_ASSOCIATED",function(a,b){b.mailIds&&b.mailIds.length&&b.mailIds.forEach(function(a){a&&zmail.cmpdata.FROM_LIST[a]&&(zmail.cmpdata.FROM_LIST[a].FRM_SIGID=b.id)}),b.mailIdsWithNoSignature&&b.mailIdsWithNoSignature.length&&b.mailIdsWithNoSignature.forEach(function(a){a&&zmail.cmpdata.FROM_LIST[a]&&(zmail.cmpdata.FROM_LIST[a].FRM_SIGID=null)})}),$.subscribe("integration/CRMStatusChange",function(a,b){i(!0)}),$.subscribe("integration/chatStatusChange",function(a,b){zmUtil.reRegisterWMS()})},k=function(){var a=zmAppLoader.load("mail");return new Promise(function(b,c){a.then(function(){zmUtil.getIntegStatus().then(function(a){b(a)},function(a){b(a)}),setTimeout(function(){b()},5e3)})})},l=function(){var a=window.zmAppLoader,b=a.load("zm-settings-core"),c=a.load("zm-settings-mailsuite-appshell"),d=new Promise(function(a,c){b.then(function(){zmail.Settings.initializeSystem().then(a,c)},function(){window.console.log("Settings Core Module - failed to load")})});return c.then(null,function(){window.console.log("Settings App Shell Module - failed to load")}),d},m=function(){"string"==typeof zmail.adhocUserSettings&&(zmail.adhocUserSettings=$.parseJSON(zmail.adhocUserSettings)),"string"==typeof zmail.adhocAccountSettings&&(zmail.adhocAccountSettings=$.parseJSON(zmail.adhocAccountSettings)),zmAdHocSettings.fetchFromObject(zmail.adhocUserSettings,zmail.adhocAccountSettings),delete zmail.adhocUserSettings,delete zmail.adhocAccountSettings},n=function(){zmail.postJsDeffered.promise.then(function(){"0"!==_zm.getOnBoardingState()||zmail.isRebranded||zmAppLoader.load("onBoardingUtil").then(function(){setTimeout(function(){$.publish("mailsuite/searchClose"),zmComponent.onBoarding.previousScope=zmComponent.keybindings.getScope();var a=zmComponent.onBoarding.init();c.mount(a,document.body),zmComponent.onBoarding.onBoardingWelcome.bindEvents()},1e3)})})},o=function(){zmState.init()},p=function(){zmail.staticUrls.docsJS="//"+zmail.jstatic+"/personal/"+zmail.docsStaticVersion+"/docscomponents/js/docscomponent_mail.js",zmail.staticUrls.docsCSS="//"+zmail.jstatic+"/personal/"+zmail.docsStaticVersion+"/docscomponents/css/lightgrey/docscomponent_mail.css"},q=function(){b=!0},r=function(){zmail.featVer=zmail.featVer||{};var a=zmail.featVer;a.mailCollab=a.mailCollab||"1",zmail.collabVersion=a.mailCollab},s=function(){var a=function(a){zmUtil.loadLink({mode:"create",link:a})},b=function(b){var c,d,e,f,g,h,i,j=b&&b.type;if(h=b.target||b.srcElement,i=h.nodeName,"INPUT"!==i&&"TEXTAREA"!==i&&(c=b&&b.dataTransfer,d=c&&c.items))for(e=0,g=d.length;e<g;e++)if(f=d[e],f&&"text/uri-list"===f.type){b.preventDefault(),"drop"===j&&!c.getData("text/html").length&&c.getData("text/uri-list").length&&(b.preventDefault(),a(c.getData("text/uri-list")));break}};zmail.win.addEventListener("dragover",b,!1),zmail.win.addEventListener("drop",b,!1)},t=function(){var a=["(","ht","tp","s://",")|(","ht","tp","://",")"].join(""),b=new RegExp("^(/|"+a+").+$");c.element(zmail.win).on("resize",function(){zmInit.setHeight()}),c.element(zmail.win).on("click",function(a){var d=1===a.which||0===a.button;if(!d)return!0;var e,f,g,h,i,j=!1,k=a.target||a.srcElement,l=_zm.getLeftClickHandlers();for(g in l)e=l[g].attrName,f=zmUtil.regExpEscape(l[g].attrVal),h=new RegExp("^"+f+"$"),i=c.element(k).closest(l[g].tagName.toLowerCase()),i.length&&i[0].hasAttribute(e)&&h.test(i.attr(e))&&(j=!0,l[g].callback&&l[g].callback(i[0]));if(i){var m=i.length&&i[0].hasAttribute("href")&&b.test(i.attr("href"));j?a.preventDefault():(i=c.element(k).closest("a"),m&&i.attr("rel","noreferrer"))}}),c.element(zmail.win).on("mousedown",function(a){$.publish("ZMAIL_MOUSE_DOWN_EVENT",a),zmUtil.hideMenu(!0)}),c.element(zmail.win).on("mouseenter",function(a){(zmail.trialUsers||zmail.showFeature)&&zmComponent.setInitialAction(a)}),s()},u=function(){var a=function(a){if(a=a||{},a.trigger===!0)switch(a.hashKey){case"mail":break;case"task":zmApp.showApp("t");break;case"notes":zmUtil.requireNotesModule("notes");break;case"calendar":zmApp.showApp("c");break;case"contacts":zmApp.showApp("cn");break;case"links":zmApp.showApp("l");break;case"compose":var b=["6","1","2","3","4"];"draft"===a.hashParams[0]?zmUtil.requireComposeModule().done(function(){var b={};b.mode="draft",b.msgId=a.hashParams[1],b.hashKey=!0,zmComp.cmpReply(b)}):!zmail.fromOtherService&&_zm.isSmartComposeEnabled()&&1===a.hashParams.length&&b.indexOf(a.hashParams[0])!==-1?zmUtil.loadSmartCompose({eType:a.hashParams[0],type:"tab"}):zmUtil.requireComposeModule().done(function(){zmComp.compose()});break;case"stream":zmAppLoader.load("streamsApp");break;case"attachview":zmsuite.loadAttachView();break;case"notifications":zmNCenter.tab();break;case"groups":zmUtil.isNewGroupUser()&&zmUtil.loadGroupManagement().then(function(){zmStreamsApp.GroupManageApp.init({groupManage:!0})});break;case"settings":zmail.Settings.MailSuite.App.openApp();break;case"search":a.hashParams.length&&(zmSearch.updateSearchValues("m"),zmSearch.contextualSearch(a.hashParams[0]));break;case"check-crm-account":_zm.checkForCRMUser(!0).done(function(a){window.zmail.isCRMServiceUser=a,a?_zm.succErrMsg("s",zmText.get("mailsuite","crm.accountActive")):_zm.succErrMsg("e",zmText.get("mailsuite","crm.accountInactive"))}).fail(function(){_zm.succErrMsg("e",zmText.get("mailsuite","crm.accountInactive"))})}};$.subscribe("mailsuite/hashurl/changed",function(b,c){a(c)}),$.subscribe("mailsuite/hashurl/handleinitial",function(){var b=zmHash.decode();a({hashKey:b.key,hashParams:b.params,trigger:!0})})},v=function(){var a;if(e){if(e.key||zmail.fromOtherService)$.publish("mailsuite/hashurl/handleinitial");else if(a=zmAdHocSettings.getLPageType(),"restore"===a)zmState.setStoredLandingPageData();else if("none"!==a){var b=a.split("-");if("app"===b[0])switch(b[1]){case"mail":break;case"calendar":zmApp.showApp("c");break;case"tasks":zmApp.showApp("t");break;case"notes":zmApp.showApp("n");break;case"contacts":zmApp.showApp("cn");break;case"bookmarks":zmApp.showApp("l");break;case"streams":zmsuite.loadStreams()}}e=null}},w=function(){zmAppLoader.load("postLoadFilter")},x=function(){zmAppLoader.load("notes").then(function(){zNote.restoreStickyNotes()})},y=function(){u(),v(),g(),w(),x()},z=function(){zmInit.cliHgt=c.element(zmail.win).height(),zmInit.cliWid=c.element(zmail.win).width()},A=function(a,b){return a.indexOf(b)!==-1&&(a=a.substring(b.length,a.length)),a},B={display:function(a,b){(_zm?_zm.succErrMsg:window.console.log)(a,b.msg)},success:function(a){zmInit.notificationBand.display("s",a)},failure:function(a){zmInit.notificationBand.display("e",a)}},C=function(){a=!0},D=function(c){a||b?(window.console.log('zmInit.serverUp, Going to publish "zmailReconnect" -'+new Date),a=!1,b=!1,setTimeout(q,5e3),$.publish("zmailReconnect",[c])):window.console.log("zmInit.serverUp, Ignoring serverUp --"+new Date)},E=function(a){var b;try{b=$.parseJSON(a.msg)}catch(c){window.console.error("Improper wms message")}f(b)&&zmAppLoader.__reloadCacheBustMap().then(function(){zmAppLoader.load("updater",{forceLoad:!0,avoidCache:!0}).done(function(){b.type&&_updater.init([b.type].join(""),b.latVer,b.opts)})})},F=function(){},G=function(){var a=$.Deferred();return zmail.newSearch=!0,zmail.ContactBook.initialize(),zmail.ContactBook.groupsFetched.done(function(){zmCont.initGroups(),a.resolve()}),a.promise()},H=function(){F(),zmail.devMode&&(zmail.debug=!0),zmail.isRebranded=zmail.isRebranded||!1,zmail.rebrandInfo=zmail.rebrandInfo||{},zmail.rebrandInfo.serviceName=zmail.rebrandInfo.serviceName||zmText.get("mailsuite","global.companyName"),zmail.globalI18N={},zmail.globalI18N.companyName=zmail.rebrandInfo.serviceName,zmail.globalI18N.productName=zmText.get("mailsuite","global.productName",{companyName:zmail.globalI18N.companyName}),zmail._isNightModeSeen="undefined"!=typeof zmail.adhocUserSettings.nightMode,m(),zmsuite.init(),zmTab.init(),zmail.logoutURL=zmail.logoutURL||"/biz/logout",zmWinTitle.init(),zmWinTitle.updateTitle(),_zm.checkAndSetDarkMode();var a=l(),b=k();n(),o(),t(),p(),j(),h(),e=zmHash.decode(),zmail.showFeature&&"editor"===e.key&&(e.params.length&&(zmail.editorStatic=e.params[0]),e=null,zmHash.clearHash());var c=null;zmail.integStatusPromise=new Promise(function(a){c=a});var f=null,g=new Promise(function(a){f=a}),q=zmAppLoader.load("mail"),r=zmAppLoader.load("postLoad");if(a.then(function(){zmComponent.soundNotifier.initialize()}),Promise.all([a,b,q]).then(function(){c(),zmUtil.toggleChatBar(),i(),zmInit.initMailSuite(),f()}),Promise.all([a,q,r]).then(function(){zmail.postJsDeffered.resolve(),$.when(zmail.ContactBook.fetchProcess).done(function(){d.resolve()}),g.then(function(){y()})}),zmAppLoader.load("search-impl").then(function(){zmail.newSearch=!0,zmail.Search.init()}),"localStorage"in window&&null!==window.localStorage){var s=zmail.zuid+"_streamsContent";for(var u in localStorage)u.indexOf("_streamsContent")!==-1&&u!==s&&localStorage.removeItem(u)}};!function(){r(),zmail.postJsDeffered.promise.then(function(){zmUtil.requireMailCollab().then(null,function(){zmUtil.debugLog("Mail Collab - module load error")})})}();var I=window.zmInit||{},J={};window.zmInit=I,I.core=J,J.initMailSuite=function(){window.zmail.isCRMMailAddonUser=null,window.zmail.isCRMServiceUser=null,G(),H()},I.nn6=document.getElementById&&!document.all,I.topelement=document.getElementById&&!document.all?"HTML":"BODY",I.cliHgt=0,I.cliWid=0,I.isIE=$.browser.msie===!0,I.uagent=navigator.userAgent,I.hashObj={},I.bindWindowEvents=t,I.setHeight=z,I.zmsubStr=A,I.notificationBand=B,I.serverDown=C,I.serverUp=D,I.handleServiceMessage=E}(),define([],function(a){var b,c=a("zmail.Core.Namespaces"),d=a("zmail.Utils.DOM"),e=c.create("zmCustomization"),f=function(a,b,c){return zmText.get("mailsuite",a,b,c)},g=function(){var a=function(){this.$el=d.element(this.htmlStruct())};a.prototype={htmlStruct:function(){return zdom("div",{className:"zmCollapseLhs"},zdom("i",{className:"msi-collapsePane"}))},toggle:function(a,b){d.removeClass(zmsuite.$el.appBar,"zm_appsShow zm_appsHide");var c,e;c=parseInt(zmAdHocSettings.getLhsResize()),b.isVisible?(d.addClass(zmsuite.$el.appBar,"zm_appsShow"),d.removeClass(d.selector(".msi-collapsePane",a.$el),"paneToggle"),e=parseInt(zmsuite.customization.appBar.width),setTimeout(function(){d.removeClass(document.body,"SC_nlab SC_aniLhs")},100)):(d.addClass(d.selector(".msi-collapsePane",a.$el),"paneToggle"),d.addClass(zmsuite.$el.appBar,"zm_appsHide"),e=0,setTimeout(function(){d.addClass(document.body,"SC_nlab SC_aniLhs")},100)),zmsuite.$el.lhs.css({width:c,left:e+"px"}),zmsuite.$el.topBar.css("transition","all 0.3s ease"),zmsuite.$el.centerListing.css("transition","all 0.3s ease"),zmsuite.$el.topBar.css({left:c+e}),zmsuite.$el.centerListing.css({left:c+e}),$.publish("zmsuite/appBarToggle",{started:!0}),zmComponent.tooltip({elm:a.$el[0],text:f("customization."+(b.isVisible?"hideApps":"showApps")),arrow:"bottom"}),zmsuite.$el.lhs.css("transition","all 0.3s ease"),setTimeout(function(){zmsuite.$el.topBar.css("transition",""),zmsuite.$el.centerListing.css("transition",""),zmsuite.$el.lhs.css("transition",""),b.clbk&&b.clbk(),$.publish("zmsuite/appBarToggle",{completed:!0})},300)},initMouseEvent:function(a){zmsuite.customization.appBar.isVisible="true"===zmAdHocSettings.getLhsAppBarView();var b;d.element(a.$el).on("click",function(){zmsuite.customization.appBar.isVisible=!zmsuite.customization.appBar.isVisible,a.toggle(a,{isVisible:zmsuite.customization.appBar.isVisible}),clearTimeout(b),b=setTimeout(function(){a.setValue()},1e3)})},setValue:function(){zmAdHocSettings.setLhsAppBarView(String(zmsuite.customization.appBar.isVisible))}},b=new a,d.mount(b.$el,document.body),b.initMouseEvent(b),b.toggle(b,{isVisible:zmsuite.customization.appBar.isVisible})},h=function(a){a.show?b.toggle(b,{isVisible:!0,clbk:a.callback}):a.hide&&b.toggle(b,{isVisible:!1})},i=function(){var a=180,b=270;zmail.postJsDeffered.promise.then(function(){var c={},e={mousedown:function(a){c.target.addClass("zmTRon"),c.boundingBox=d.element(c.target).parent().offset()},mousemove:function(e){var f=e.clientX-c.boundingBox.left;f=f>b?b:f,f=f<a?a:f,c.orginalWidth=f,c.target.parent().css("width",f),zmsuite.$el.centerListing.css("left",f+c.boundingBox.left),d.setStyle(zmsuite.$el.topBar,{left:f+c.boundingBox.left}),"undefined"!=typeof zmStreamsApp&&zmStreamsApp.util&&zmStreamsApp.util.adjustWidth(),$.publish("zmsuite/lhsResize",{width:f})},mouseup:function(){var a=parseInt(zmAdHocSettings.getLhsResize());zmTab.tabResize({increaseInWidth:c.orginalWidth>a}),c.target.removeClass("zmTRon"),zmAdHocSettings.setLhsResize(c.orginalWidth),$.publish("zmsuite/lhsResize",{width:c.orginalWidth,completed:!0})}};c.target=zmsuite.$el.lhs.find("#zmTreeResize");var f={target:c.target,mousedownClbk:e.mousedown,mousemoveClbk:e.mousemove,mouseupClbk:e.mouseup};zmUtil.resizeHandler(f)})};return e.initLHSResizeHandlers=i,e.initAppBarToggle=g,e.appBarToggleState=h,e});